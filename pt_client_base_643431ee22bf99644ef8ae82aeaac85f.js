if("undefined"==typeof I$)I$=function(){var e={},t=function(){return!1},i={};var n=function(t,i){return e.toString.call(t)==="[object "+i+"]"};return function(e,a){var o=i[e],s=n(a,"Function");if(null!=a&&!s)o=a;if(s){var _=[];for(var r=2,c=arguments.length;r<c;r++)_.push(arguments.callee(arguments[r]));var d={};_.push.call(_,d,{},t,[]);var l=a.apply(null,_)||d;if(!o||!n(l,"Object"))o=l;else if(Object.keys)for(var f=Object.keys(l),r=0,c=f.length,u;r<c;r++){u=f[r];o[u]=l[u]}else for(var u in l)o[u]=l[u]}if(null==o)o={};i[e]=o;return o}}();I$("cb16f42daf02e8bc03f90d7a179f5573",function(e,t,i,n){var a=Function.prototype;a._$aop=function(e,t){var t=t||i,e=e||i,a=this;return function(){var i={args:n.slice.call(arguments,0)};e(i);if(!i.stopped){i.value=a.apply(this,i.args);t(i)}return i.value}};a._$bind=function(){var e=arguments,t=arguments[0],i=this;return function(){var a=n.slice.call(e,1);n.push.apply(a,arguments);return i.apply(t||null,a)}};a._$bind2=function(){var e=arguments,t=n.shift.call(e),i=this;return function(){n.push.apply(arguments,e);return i.apply(t||null,arguments)}};var a=String.prototype;if(!a.trim)a.trim=function(){var e=/(?:^\s+)|(?:\s+$)/g;return function(){return this.replace(e,"")}}();if(!this.console)this.console={log:i,error:i};if(!0){NEJ=this.NEJ||{};NEJ.copy=function(e,i){e=e||{};i=i||t;for(var n in i)if(i.hasOwnProperty(n))e[n]=i[n];return e};NEJ=NEJ.copy(NEJ,{O:t,R:n,F:i,P:function(e){if(!e||!e.length)return null;var t=window;for(var i=e.split("."),n=i.length,a="window"==i[0]?1:0;a<n;t=t[i[a]]=t[i[a]]||{},a++);return t}});return NEJ}return e});I$("2fe61ff824fccd979c2efb1c4c81e9ab",function(e,t,i,n){e.__forIn=function(e,t,i){if(!e||!t)return null;var n=Object.keys(e);for(var a=0,o=n.length,s,_;a<o;a++){s=n[a];_=t.call(i||null,e[s],s,e);if(_)return s}return null};e.__forEach=function(e,t,i){e.forEach(t,i)};e.__col2array=function(e){return n.slice.call(e,0)};e.__str2time=function(e){return Date.parse(e)};return e});I$("dcfbb39e75d6de6b8114c072c5b070e0",function(e,t,i,n,a){var o=this.navigator.platform,s=this.navigator.userAgent;var _={mac:o,win:o,linux:o,ipad:s,ipod:s,iphone:o,android:s};t._$IS=_;for(var r in _)_[r]=new RegExp(r,"i").test(_[r]);_.ios=_.ipad||_.iphone||_.ipod;_.tablet=_.ipad;_.desktop=_.mac||_.win||_.linux&&!_.android;t._$is=function(e){return!!_[e]};var c={engine:"unknow",release:"unknow",browser:"unknow",version:"unknow",prefix:{css:"",pro:"",clz:""}};t._$KERNEL=c;if(/msie\s+(.*?);/i.test(s)||/trident\/.+rv:([\d\.]+)/i.test(s)){c.engine="trident";c.browser="ie";c.version=RegExp.$1;c.prefix={css:"ms",pro:"ms",clz:"MS",evt:"MS"};var d={6:"2.0",7:"3.0",8:"4.0",9:"5.0",10:"6.0",11:"7.0"};c.release=d[document.documentMode]||d[parseInt(c.version)]}else if(/webkit\/?([\d.]+?)(?=\s|$)/i.test(s)){c.engine="webkit";c.release=RegExp.$1||"";c.prefix={css:"webkit",pro:"webkit",clz:"WebKit"}}else if(/rv\:(.*?)\)\s+gecko\//i.test(s)){c.engine="gecko";c.release=RegExp.$1||"";c.browser="firefox";c.prefix={css:"Moz",pro:"moz",clz:"Moz"};if(/firefox\/(.*?)(?=\s|$)/i.test(s))c.version=RegExp.$1||""}else if(/presto\/(.*?)\s/i.test(s)){c.engine="presto";c.release=RegExp.$1||"";c.browser="opera";c.prefix={css:"O",pro:"o",clz:"O"};if(/version\/(.*?)(?=\s|$)/i.test(s))c.version=RegExp.$1||""}if("unknow"==c.browser){var d=["chrome","maxthon","safari"];for(var l=0,f=d.length,u;l<f;l++){u="safari"==d[l]?"version":d[l];if(new RegExp(u+"/(.*?)(?=\\s|$)","i").test(s)){c.browser=d[l];c.version=RegExp.$1.trim();break}}}t._$SUPPORT={};t._$support=function(e){return!!t._$SUPPORT[e]};if(!0)e.copy(e.P("nej.p"),t);return t},"cb16f42daf02e8bc03f90d7a179f5573");I$("48a93251984a4481fcb16767240a7f74",function(e,t,i,n,a,o){if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="4.0")I$("84703763e6120555fd4ee4f79f9218f9",function(){e.__forIn=function(e,t,i){if(e&&t){var n;for(var a in e)if(e.hasOwnProperty(a)){n=t.call(i,e[a],a,e);if(n)return a}else;}};e.__forEach=function(e,t,i){for(var n=0,a=e.length;n<a;n++)t.call(i,e[n],n,e)};e.__col2array=function(e){var t=[];if(e&&e.length)for(var i=0,n=e.length;i<n;i++)t.push(e[i]);return t};e.__str2time=function(){var e=/-/g;return function(t){return Date.parse(t.replace(e,"/").split(".")[0])}}()});return e},"2fe61ff824fccd979c2efb1c4c81e9ab","dcfbb39e75d6de6b8114c072c5b070e0");I$("780a96dd705b8404d9982fdccc656c08",function(e,t,i,n,a,o){var s=function(e,t){try{t=t.toLowerCase();if(null===e)return"null"==t;if(void 0===e)return"undefined"==t;else return n.toString.call(e).toLowerCase()=="[object "+t+"]"}catch(i){return!1}};i._$isFunction=function(e){return s(e,"function")};i._$isString=function(e){return s(e,"string")};i._$isNumber=function(e){return s(e,"number")};i._$isBoolean=function(e){return s(e,"boolean")};i._$isDate=function(e){return s(e,"date")};i._$isArray=function(e){return s(e,"array")};i._$isObject=function(e){return s(e,"object")};i._$length=function(){var e=/[^\x00-\xff]/g;return function(t){return(""+(t||"")).replace(e,"**").length}}();i._$loop=function(e,n,a){if(i._$isObject(e)&&i._$isFunction(n))return t.__forIn.apply(t,arguments);else return null};i._$indexOf=function(e,t){var n=i._$isFunction(t)?t:function(e){return e===t},a=i._$forIn(e,n);return null!=a?a:-1};i._$binSearch=function(){var e;var t=function(i,n,a){if(n>a)return-1;var o=Math.ceil((n+a)/2),s=e(i[o],o,i);if(0==s)return o;if(s<0)return t(i,n,o-1);else return t(i,o+1,a)};return function(i,n){e=n||a;return t(i,0,i.length-1)}}();i._$reverseEach=function(e,t,n){if(e&&e.length&&i._$isFunction(t))for(var a=e.length-1;a>=0;a--)if(t.call(n,e[a],a,e))return a;return null};i._$forEach=function(e,n,a){if(e&&e.length&&i._$isFunction(n))if(!e.forEach)i._$forIn.apply(i,arguments);else t.__forEach(e,n,a)};i._$forIn=function(e,t,n){if(!e||!i._$isFunction(t))return null;if(i._$isNumber(e.length)){for(var a=0,o=e.length;a<o;a++)if(t.call(n,e[a],a,e))return a}else if(i._$isObject(e))return i._$loop(e,t,n);return null};i._$encode=function(e,t){t=""+t;if(!e||!t)return t||"";else return t.replace(e.r,function(t){var i=e[!e.i?t.toLowerCase():t];return null!=i?i:t})};i._$escape=function(){var e=/<br\/?>$/,t={r:/\<|\>|\&|\r|\n|\s|\'|\"/g,"<":"&lt;",">":"&gt;","&":"&amp;"," ":"&nbsp;",'"':"&quot;","'":"&#39;","\n":"<br/>","\r":""};return function(n){n=i._$encode(t,n);return n.replace(e,"<br/><br/>")}}();i._$unescape=function(){var e={r:/\&(?:lt|gt|amp|nbsp|#39|quot)\;|\<br\/\>/gi,"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" ","&#39;":"'","&quot;":'"',"<br/>":"\n"};return function(t){return i._$encode(e,t)}}();i._$format=function(){var e={i:!0,r:/\byyyy|yy|MM|cM|eM|M|dd|d|HH|H|mm|ms|ss|m|s|w|ct|et\b/g},t=["上午","下午"],n=["A.M.","P.M."],a=["日","一","二","三","四","五","六"],o=["一","二","三","四","五","六","七","八","九","十","十一","十二"],s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"];var _=function(e){e=parseInt(e)||0;return(e<10?"0":"")+e};var r=function(e){return e<12?0:1};return function(c,d,l){if(!c||!d)return"";c=i._$var2date(c);e.yyyy=c.getFullYear();e.yy=(""+e.yyyy).substr(2);e.M=c.getMonth()+1;e.MM=_(e.M);e.eM=s[e.M-1];e.cM=o[e.M-1];e.d=c.getDate();e.dd=_(e.d);e.H=c.getHours();e.HH=_(e.H);e.m=c.getMinutes();e.mm=_(e.m);e.s=c.getSeconds();e.ss=_(e.s);e.ms=c.getMilliseconds();e.w=a[c.getDay()];var f=r(e.H);e.ct=t[f];e.et=n[f];if(l)e.H=e.H%12;return i._$encode(e,d)}}();i._$var2date=function(e){var n=e;if(i._$isString(e))n=new Date(t.__str2time(e));if(!i._$isDate(n))n=new Date(e);return n};i._$fixed=function(e,t){return parseFloat(new Number(e).toFixed(t))};i._$absolute=function(){var e=/([^\/:])\/.*$/,t=/\/[^\/]+$/,i=/[#\?]/,n=location.href.split(/[?#]/)[0],a=document.createElement("a");var o=function(e){return(e||"").indexOf("://")>0};var s=function(e){return(e||"").split(i)[0].replace(t,"/")};var _=function(t,i){if(0==t.indexOf("/"))return i.replace(e,"$1")+t;else return s(i)+t};n=s(n);return function(e,t){e=(e||"").trim();if(!o(t))t=n;if(!e)return t;if(o(e))return e;e=_(e,t);a.href=e;e=a.href;return o(e)?e:a.getAttribute("href",4)}}();i._$url2origin=function(){var e=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(t){if(e.test(t||""))return RegExp.$1.toLowerCase();else return""}}();i._$string2object=function(e,t){var n={};i._$forEach((e||"").split(t),function(e){var t=e.split("=");if(t&&t.length){var i=t.shift();if(i)n[decodeURIComponent(i)]=decodeURIComponent(t.join("="))}});return n};i._$object2string=function(e,t,n){if(!e)return"";var a=[];i._$loop(e,function(e,t){if(!i._$isFunction(e)){if(i._$isDate(e))e=e.getTime();else if(i._$isArray(e))e=e.join(",");else if(i._$isObject(e))e=JSON.stringify(e);if(n)e=encodeURIComponent(e);a.push(encodeURIComponent(t)+"="+e)}});return a.join(t||",")};i._$query2object=function(e){return i._$string2object(e,"&")};i._$object2query=function(e){return i._$object2string(e,"&",!0)};i._$object2array=function(e){return t.__col2array(e)};i._$array2object=function(e,t){var n={};i._$forEach(e,function(e){var i=e;if(t)i=t(e);if(null!=i)n[i]=e});return n};i._$number2string=function(e,t){var i=(""+e).length,n=Math.max(1,parseInt(t)||0),a=n-i;if(a>0)e=new Array(a+1).join("0")+e;return""+e};i._$safeDelete=function(e,t){if(!i._$isArray(t))try{delete e[t]}catch(n){e[t]=void 0}else i._$forEach(t,function(t){i._$safeDelete(e,t)})};i._$randString=function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";return function(t){t=t||10;var i=[];for(var n=0,a;n<t;++n){a=Math.floor(Math.random()*e.length);i.push(e.charAt(a))}return i.join("")}}();i._$randNumber=function(e,t){return Math.floor(Math.random()*(t-e)+e)};i._$randNumberString=function(e){e=Math.max(0,Math.min(e||8,30));var t=Math.pow(10,e-1),n=10*t;return i._$randNumber(t,n).toString()};i._$uniqueID=function(){var e=+new Date;return function(){return""+e++}}();i._$query=function(e,t){e=e||n;var i=(t||"").split(".");for(var a=0,o=i.length;a<o;a++){e=e[i[a]];if(!e)break}return e};i._$merge=function(){var e=arguments.length-1,t=arguments[e];if(i._$isFunction(t))e-=1;else t=a;var n=arguments[0]||{};for(var o=1;o<=e;o++)i._$loop(arguments[o],function(e,i){
if(!t(e,i))n[i]=e});return n};i._$fetch=function(e,t){if(t)i._$loop(e,function(e,i,n){var a=t[i];if(null!=a)n[i]=a});return e};i._$hasProperty=function(e){if(!e)return!1;if(null!=e.length)return e.length>0;var t=0;i._$loop(e,function(){t++;return t>0});return t>0};if(!0){e.Q=i._$query;e.X=i._$merge;e.EX=i._$fetch;e.copy(this.NEJ,e);e.copy(e.P("nej.u"),i)}return i},"cb16f42daf02e8bc03f90d7a179f5573","48a93251984a4481fcb16767240a7f74");I$("43182f014b9d40a77d4ee9e345c2f016",function(e,t,i,n,a){var o=8;var s=function(e,t){return e<<t|e>>>32-t};var _=function(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i};var r=function(e,t,i,n){if(e<20)return t&i|~t&n;if(e<40)return t^i^n;if(e<60)return t&i|t&n|i&n;else return t^i^n};var c=function(e){if(e<20)return 1518500249;if(e<40)return 1859775393;if(e<60)return-1894007588;else return-899497514};var d=function(){var e=function(e){return e%32},t=function(e){return 32-o-e%32};return function(i,n){var a=[],s=(1<<o)-1,_=n?e:t;for(var r=0,c=i.length*o;r<c;r+=o)a[r>>5]|=(i.charCodeAt(r/o)&s)<<_(r);return a}}();var l=function(){var e="0123456789abcdef",t=function(e){return e%4},i=function(e){return 3-e%4};return function(n,a){var o=[],s=a?t:i;for(var _=0,r=4*n.length;_<r;_++)o.push(e.charAt(n[_>>2]>>8*s(_)+4&15)+e.charAt(n[_>>2]>>8*s(_)&15));return o.join("")}}();var f=function(){var e=function(e){return e%32},t=function(e){return 32-o-e%32};return function(i,n){var a=[],s=(1<<o)-1,_=n?e:t;for(var r=0,c=32*i.length;r<c;r+=o)a.push(String.fromCharCode(i[r>>5]>>>_(r)&s));return a.join("")}}();var u=function(){var e="=",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(e){return e%4},n=function(e){return 3-e%4};return function(a,o){var s=[],_=o?i:n;for(var r=0,c;r<4*a.length;r+=3){c=(a[r>>2]>>8*_(r)&255)<<16|(a[r+1>>2]>>8*_(r+1)&255)<<8|a[r+2>>2]>>8*_(r+2)&255;for(var d=0;d<4;d++)s.push(8*r+6*d>32*a.length?e:t.charAt(c>>6*(3-d)&63))}return s.join("")}}();var h=function(e,t,i,n,a,o){return _(s(_(_(t,e),_(n,o)),a),i)};var m=function(e,t,i,n,a,o,s){return h(t&i|~t&n,e,t,a,o,s)};var p=function(e,t,i,n,a,o,s){return h(t&n|i&~n,e,t,a,o,s)};var g=function(e,t,i,n,a,o,s){return h(t^i^n,e,t,a,o,s)};var b=function(e,t,i,n,a,o,s){return h(i^(t|~n),e,t,a,o,s)};var $=function(e,t){e[t>>5]|=128<<t%32;e[(t+64>>>9<<4)+14]=t;var i=1732584193,n=-271733879,a=-1732584194,o=271733878;for(var s=0,r=e.length,c,d,l,f;s<r;s+=16){c=i;d=n;l=a;f=o;i=m(i,n,a,o,e[s+0],7,-680876936);o=m(o,i,n,a,e[s+1],12,-389564586);a=m(a,o,i,n,e[s+2],17,606105819);n=m(n,a,o,i,e[s+3],22,-1044525330);i=m(i,n,a,o,e[s+4],7,-176418897);o=m(o,i,n,a,e[s+5],12,1200080426);a=m(a,o,i,n,e[s+6],17,-1473231341);n=m(n,a,o,i,e[s+7],22,-45705983);i=m(i,n,a,o,e[s+8],7,1770035416);o=m(o,i,n,a,e[s+9],12,-1958414417);a=m(a,o,i,n,e[s+10],17,-42063);n=m(n,a,o,i,e[s+11],22,-1990404162);i=m(i,n,a,o,e[s+12],7,1804603682);o=m(o,i,n,a,e[s+13],12,-40341101);a=m(a,o,i,n,e[s+14],17,-1502002290);n=m(n,a,o,i,e[s+15],22,1236535329);i=p(i,n,a,o,e[s+1],5,-165796510);o=p(o,i,n,a,e[s+6],9,-1069501632);a=p(a,o,i,n,e[s+11],14,643717713);n=p(n,a,o,i,e[s+0],20,-373897302);i=p(i,n,a,o,e[s+5],5,-701558691);o=p(o,i,n,a,e[s+10],9,38016083);a=p(a,o,i,n,e[s+15],14,-660478335);n=p(n,a,o,i,e[s+4],20,-405537848);i=p(i,n,a,o,e[s+9],5,568446438);o=p(o,i,n,a,e[s+14],9,-1019803690);a=p(a,o,i,n,e[s+3],14,-187363961);n=p(n,a,o,i,e[s+8],20,1163531501);i=p(i,n,a,o,e[s+13],5,-1444681467);o=p(o,i,n,a,e[s+2],9,-51403784);a=p(a,o,i,n,e[s+7],14,1735328473);n=p(n,a,o,i,e[s+12],20,-1926607734);i=g(i,n,a,o,e[s+5],4,-378558);o=g(o,i,n,a,e[s+8],11,-2022574463);a=g(a,o,i,n,e[s+11],16,1839030562);n=g(n,a,o,i,e[s+14],23,-35309556);i=g(i,n,a,o,e[s+1],4,-1530992060);o=g(o,i,n,a,e[s+4],11,1272893353);a=g(a,o,i,n,e[s+7],16,-155497632);n=g(n,a,o,i,e[s+10],23,-1094730640);i=g(i,n,a,o,e[s+13],4,681279174);o=g(o,i,n,a,e[s+0],11,-358537222);a=g(a,o,i,n,e[s+3],16,-722521979);n=g(n,a,o,i,e[s+6],23,76029189);i=g(i,n,a,o,e[s+9],4,-640364487);o=g(o,i,n,a,e[s+12],11,-421815835);a=g(a,o,i,n,e[s+15],16,530742520);n=g(n,a,o,i,e[s+2],23,-995338651);i=b(i,n,a,o,e[s+0],6,-198630844);o=b(o,i,n,a,e[s+7],10,1126891415);a=b(a,o,i,n,e[s+14],15,-1416354905);n=b(n,a,o,i,e[s+5],21,-57434055);i=b(i,n,a,o,e[s+12],6,1700485571);o=b(o,i,n,a,e[s+3],10,-1894986606);a=b(a,o,i,n,e[s+10],15,-1051523);n=b(n,a,o,i,e[s+1],21,-2054922799);i=b(i,n,a,o,e[s+8],6,1873313359);o=b(o,i,n,a,e[s+15],10,-30611744);a=b(a,o,i,n,e[s+6],15,-1560198380);n=b(n,a,o,i,e[s+13],21,1309151649);i=b(i,n,a,o,e[s+4],6,-145523070);o=b(o,i,n,a,e[s+11],10,-1120210379);a=b(a,o,i,n,e[s+2],15,718787259);n=b(n,a,o,i,e[s+9],21,-343485551);i=_(i,c);n=_(n,d);a=_(a,l);o=_(o,f)}return[i,n,a,o]};var v=function(e,t){var i=d(e,!0);if(i.length>16)i=$(i,e.length*o);var n=Array(16),a=Array(16);for(var s=0;s<16;s++){n[s]=909522486^i[s];a[s]=1549556828^i[s]}var _=$(n.concat(d(t,!0)),512+t.length*o);return $(a.concat(_),640)};var y=function(e,t){e[t>>5]|=128<<24-t%32;e[(t+64>>9<<4)+15]=t;var i=Array(80),n=1732584193,a=-271733879,o=-1732584194,d=271733878,l=-1009589776;for(var f=0,u=e.length,h,m,p,g,b;f<u;f+=16){h=n;m=a;p=o;g=d;b=l;for(var $=0;$<80;$++){i[$]=$<16?e[f+$]:s(i[$-3]^i[$-8]^i[$-14]^i[$-16],1);var v=_(_(s(n,5),r($,a,o,d)),_(_(l,i[$]),c($)));l=d;d=o;o=s(a,30);a=n;n=v}n=_(n,h);a=_(a,m);o=_(o,p);d=_(d,g);l=_(l,b)}return[n,a,o,d,l]};var C=function(e,t){var i=d(e);if(i.length>16)i=y(i,e.length*o);var n=Array(16),a=Array(16);for(var s=0;s<16;s++){n[s]=909522486^i[s];a[s]=1549556828^i[s]}var _=y(n.concat(d(t)),512+t.length*o);return y(a.concat(_),672)};t._$hmacsha12hex=function(e,t){return l(C(e,t))};t._$hmacsha12b64=function(e,t){return u(C(e,t))};t._$hmacsha12str=function(e,t){return f(C(e,t))};t._$hmacmd52hex=function(e,t){return l(v(e,t),!0)};t._$hmacmd52b64=function(e,t){return u(v(e,t),!0)};t._$hmacmd52str=function(e,t){return f(v(e,t),!0)};t._$sha12hex=function(e){return l(y(d(e),e.length*o))};t._$sha12b64=function(e){return u(y(d(e),e.length*o))};t._$sha12str=function(e){return f(y(d(e),e.length*o))};t._$md52hex=function(e){return l($(d(e,!0),e.length*o),!0)};t._$md52b64=function(e){return u($(d(e,!0),e.length*o),!0)};t._$md52str=function(e){return f($(d(e,!0),e.length*o),!0)};t._$str2hex=function(e,t){return l(d(e,!t),!t)};if(!0)e.copy(e.P("nej.u"),t);return t},"cb16f42daf02e8bc03f90d7a179f5573");I$("896cb07cc0accd905cb9463bfe34f2be",function(e,t,i,n,a,o){var s={};i.__url2host=function(){var e=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(t){t=t||"";if(e.test(t))return RegExp.$1;else return location.protocol+"//"+location.host}}();i.__set=function(e,t){s[e]=t};i.__get=function(e){return s[e]};var _=function(){var e={portrait:{name:"portrait",dft:"portrait/"},"ajax.swf":{name:"ajax",dft:"nej_proxy_flash.swf"},"chart.swf":{name:"chart",dft:"nej_flex_chart.swf"},"audio.swf":{name:"audio",dft:"nej_player_audio.swf"},"video.swf":{name:"video",dft:"nej_player_video.swf"},"clipboard.swf":{name:"clipboard",dft:"nej_clipboard.swf"},"upload.image.swf":{name:"uploadimage",dft:"nej_upload_image.swf"}};var a=function(e){var t={};if(!e||!e.length)return t;for(var n=0,a=e.length,o;n<a;n++){o=e[n];if(o.indexOf("://")>0)t[i.__url2host(o)]=o}return t};return function(o){i.__set("root",o.root||"/res/");var s=i.__get("root");t._$loop(e,function(e,t,n){i.__set(t,o[e.name]||s+e.dft)});var _=o.p_csrf;if(_===!0)_={cookie:"AntiCSRF",param:"AntiCSRF"};_=_||n;i.__set("csrf",{param:_.param||"",cookie:_.cookie||""});i.__set("frames",a(o.p_frame));i.__set("flashs",a(o.p_flash))}}();_(this.NEJ_CONF||n);return i},"cb16f42daf02e8bc03f90d7a179f5573","780a96dd705b8404d9982fdccc656c08");I$("d783805b0d3f106000b4e494b947a9c9",function(e,t,i,n,a,o){if("trident"===t._$KERNEL.engine)I$("7a3f06179ac3d62f0d072b1cb60a8d05",function(){e.__set("storage.swf",(this.NEJ_CONF||n).storage||e.__get("root")+"nej_storage.swf")});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="3.0")I$("45fda968abb5a1964e16e32c560c9952",function(){e.__set("blank.png",(this.NEJ_CONF||n).blank||e.__get("root")+"nej_blank.gif")});return e},"896cb07cc0accd905cb9463bfe34f2be","dcfbb39e75d6de6b8114c072c5b070e0");I$("04cd16543048e84cdc028e9a9d6bdb9e",function(e,t,i,n,a,o){i._$getFrameProxy=function(e){var n=t.__url2host(e);return i._$get("frames")[n]||n+"/res/nej_proxy_frame.html"};i._$getFlashProxy=function(e){return i._$get("flashs")[t.__url2host(e)]};i._$get=function(e){return t.__get(e)};if(!0)e.copy(e.P("nej.c"),i);return i},"cb16f42daf02e8bc03f90d7a179f5573","d783805b0d3f106000b4e494b947a9c9");I$("390efe7fffa9e37ec235fc1a8b9dd5b7",function(e,t,i,n,a,o){var s=+new Date;i._$CODE_NOTFUND=1e4-s;i._$CODE_NOTASGN=10001-s;i._$CODE_NOTSPOT=10002-s;i._$CODE_TIMEOUT=10003-s;i._$CODE_ERREVAL=10004-s;i._$CODE_ERRCABK=10005-s;i._$CODE_ERRSERV=10006-s;i._$CODE_ERRABRT=10007-s;i._$HEAD_CT="Content-Type";i._$HEAD_CT_PLAN="text/plain";i._$HEAD_CT_FILE="multipart/form-data";i._$HEAD_CT_FORM="application/x-www-form-urlencoded";i._$BLANK_IMAGE=t._$get("blank.png")||"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";if(!0)e.copy(e.P("nej.g"),i);return i},"cb16f42daf02e8bc03f90d7a179f5573","04cd16543048e84cdc028e9a9d6bdb9e");I$("b01c677ecd401a2fc164bad715b15e74",function(e,t){var i={};t._$merge=function(t){e._$merge(i,t)};t._$dump=function(){return i};t._$clear=function(){i={}};return t},"780a96dd705b8404d9982fdccc656c08");I$("31e5e693a2567a43414153bc991a3b12",function(e,t,i,n,a,o){i.__getElementById=function(e,t){if(e.getElementById)return e.getElementById(""+t);try{return e.querySelector("#"+t)}catch(i){return null}};i.__getChildren=function(t){return e._$object2array(t.children)};i.__getElementsByClassName=function(t,i){return e._$object2array(t.getElementsByClassName(i))};i.__nextSibling=function(e){return e.nextElementSibling};i.__previousSibling=function(e){return e.previousElementSibling};i.__dataset=function(e,t,i){e.dataset=e.dataset||{};if(void 0!==i)e.dataset[t]=i;return e.dataset[t]};i.__getAttribute=function(e,t){return e.getAttribute(t)};i.__serializeDOM2XML=function(e){
return(new XMLSerializer).serializeToString(e)||""};i.__parseDOMFromXML=function(e){var t=(new DOMParser).parseFromString(e,"text/xml").documentElement;return"parsererror"==t.nodeName?null:t};i.__fullScreen=function(){};i.__mask=function(){};i.__unmask=function(){};var s=t._$SUPPORT,_=t._$KERNEL.prefix;i.__isMatchedName=function(){var e=/^([a-z]+?)[A-Z]/;return function(t,i){return!!(i[t]||e.test(t)&&i[RegExp.$1])}}();i.__isNeedPrefixed=function(){var t=e._$array2object(["animation","transform","transition","appearance","userSelect","box","flex","column"]);return function(e){return i.__isMatchedName(e,t)}}();i.__fmtStyleName=function(){var e=/-([a-z])/g;return function(t){t=t||"";return t.replace(e,function(e,t){return t.toUpperCase()})}}();i.__getStyleName=function(){var e=/^[a-z]/,t=_.css||"";return function(n){n=i.__fmtStyleName(n);if(!i.__isNeedPrefixed(n))return n;else return t+n.replace(e,function(e){return e.toUpperCase()})}}();i.__getStyleValue=function(e,t){var n=window.getComputedStyle(e,null);return n[i.__getStyleName(t)]||""};i.__setStyleValue=function(e,t,n){e.style[i.__getStyleName(t)]=n};i.__getCSSMatrix=function(){var t=/\((.*?)\)/,i=/\s*,\s*/,n=["CSSMatrix",_.clz+"CSSMatrix"],a=["m11","m12","m21","m22","m41","m42"];var o=function(n){var o={};if(t.test(n||""))e._$forEach(RegExp.$1.split(i),function(e,t){o[a[t]]=e});return o};return function(t){var i;e._$forIn(n,function(e){if(this[e]){i=new this[e](t||"");return!0}});return!i?o(t):i}}();i.__injectCSSText=function(e,t){e.textContent=t};i.__processCSSText=function(){var t=/\$<(.*?)>/gi,a=/\{(.*?)\}/g,o="-"+_.css.toLowerCase()+"-",r={scale:"scale({x|1},{y|1})",rotate:"rotate({a})",translate:"translate({x},{y})",matrix:"matrix({m11},{m12},{m21},{m22},{m41},{m42})"},c={scale:"scale3d({x|1},{y|1},{z|1})",rotate:"rotate3d({x},{y},{z},{a})",translate:"translate3d({x},{y},{z})",matrix:"matrix3d({m11},{m12},{m13},{m14},{m21},{m22},{m23},{m24},{m31},{m32},{m33|1},{m34},{m41},{m42},{m43},{m44|1})"};var d=function(e,t){t=t||n;return e.replace(a,function(e,i){var n=i.split("|");return t[n[0]]||n[1]||"0"})};i.__processTransformValue=function(e,t){var i=(!s.css3d?r:c)[e.trim()];if(i)return d(i,t);else return""};return function(n){if(!n.replace)return n;else return n.replace(t,function(t,n){if("vendor"===n)return o;var a=(n||"").split("|");return i.__processTransformValue(a[0],e._$query2object(a[1]))||t})}}();i.__appendCSSText=function(e,t){var i=e.sheet,n=i.cssRules.length;i.insertRule(t,n);return i.cssRules[n]};i.__getClassList=function(){var e=/\s+/;return function(t){t=(t||"").trim();return t?t.split(e):null}}();i.__processClassName=function(t,n,a){if("replace"!=n)e._$forEach(i.__getClassList(a),function(e){t.classList[n](e)});else{i.__processClassName(t,"remove",a);i.__processClassName(t,"add",arguments[3])}};i.__hasClassName=function(t,n){var a=t.classList;if(!a||!a.length)return!1;else return e._$indexOf(i.__getClassList(n),function(e){return a.contains(e)})>=0};!function(){if(!s.css3d){var e=i.__getCSSMatrix();s.css3d=!!e&&null!=e.m41}}();return i},"780a96dd705b8404d9982fdccc656c08","dcfbb39e75d6de6b8114c072c5b070e0");I$("20e1e81b2a0ca3891d751049f66126d8",function(e,t,i,n,a,o,s){if("trident"===t._$KERNEL.engine)I$("67ba9d78d1c364fc43490d77de0e337c",function(){e.__getChildren=e.__getChildren._$aop(function(e){var t=e.args[0];if(!t.children){e.stopped=!0;var n=[];i._$forEach(t.childNodes,function(e){if(1==e.nodeType)n.push(e)});e.value=n}})});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="6.0")I$("2488cdb27307575f1605fe0a36b0c302",function(){e.__dataset=function(){var e={},t="data-",n=/\-(.{1})/gi;var a=function(a){var o=a.id;if(!e[o]){var s={};i._$forEach(a.attributes,function(e){var i=e.nodeName;if(0==i.indexOf(t)){i=i.replace(t,"").replace(n,function(e,t){return t.toUpperCase()});s[i]=e.nodeValue||""}});e[o]=s}};return function(t,i,n){a(t);var o=e[t.id];if(void 0!==n)o[i]=n;return o[i]}}()});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="5.0")I$("c55049cb93c3a7585a02309e4f05ee56",function(){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}e.__injectCSSText=function(){var t=30;return e.__injectCSSText._$aop(function(e){var i=e.args[0];if(i.styleSheet){e.stopped=!0;var n=e.args[1];var a=document.styleSheets;if(a.length>t){i=a[t];n=i.cssText+n}else i=i.styleSheet;i.cssText=n}})}();e.__getClassRegExp=function(){var e=/\s+/g;return function(t){t=(t||"").trim().replace(e,"|");return!t?null:new RegExp("(\\s|^)(?:"+t+")(?=\\s|$)","g")}}();e.__processClassName=function(t,i,n){n=n||"";var a=t.className||"",o=e.__getClassRegExp(n+" "+(arguments[3]||""));var s=a;if(o)s=s.replace(o,"");switch(i){case"remove":n="";break;case"replace":n=arguments[3]||""}s=(s+" "+n).trim();if(a!=s)t.className=s};e.__hasClassName=function(t,i){var n=e.__getClassRegExp(i);if(n)return n.test(t.className||"");else return!1}});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="4.0")I$("d3499d3a4d6837b7ae8aabfa8e0d01c5",function(){e.__getElementsByClassName=function(e,t){var n=[],a=new RegExp("(\\s|^)(?:"+t.replace(/\s+/g,"|")+")(?=\\s|$)");i._$forEach(e.getElementsByTagName("*"),function(e){if(a.test(e.className))n.push(e)});return n};e.__nextSibling=function(e){for(;e=e.nextSibling;)if(1==e.nodeType)return e};e.__previousSibling=function(e){for(;e=e.previousSibling;)if(1==e.nodeType)return e};e.__serializeDOM2XML=function(e){return"xml"in e?e.xml:e.outerHTML};e.__parseDOMFromXML=function(){var e=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.3.0"];var t=function(){try{for(var t=0,i=e.length;t<i;t++)return new ActiveXObject(e[t])}catch(n){return null}};return function(e){var i=t();if(i&&i.loadXML(e)&&!i.parseError.errorCode)return i.documentElement;else return null}}();e.__getStyleValue=function(){var t=/opacity\s*=\s*([\d]+)/i;var i={opacity:function(e){var i=0;if(t.test(e.filter||""))i=parseFloat(RegExp.$1)/100;return i}};return function(t,n){var a=t.currentStyle,o=i[n];if(o)return o(a);else return a[e.__getStyleName(n)]||""}}();e.__setStyleValue=function(){var t={opacity:function(e,t){e.style.filter="alpha(opacity="+100*t+")"}};return function(i,n,a){var o=t[n];if(o)o(i,a);else i.style[e.__getStyleName(n)]=a}}();e.__appendCSSText=function(e,t){var i=e.styleSheet,n=i.rules.length,a=t.split(/[\{\}]/);i.addRule(a[0],a[1],n);return i.rules[n]}});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="3.0")I$("ce1a0b2b93993177c923ed2faeb39e8c",function(){e.__getAttribute=e.__getAttribute._$aop(null,function(e){var t=e.args;if("maxlength"==t[1]&&2147483647==e.value)e.value=null})});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="2.0")I$("4302432e680d11b00b21feb15fd2572d",function(){e.__fullScreen=function(e,t){var i=e.style;i.width=t.scrollWidth+"px";i.height=t.scrollHeight+"px"};e.__mask=function(){var t={};e.__unmask=function(e){var i=e.id,n=t[i];if(n){delete t[i];n.parentNode.removeChild(n)}};return function(e){var i=e.id,n=t[i];if(!n){n=document.createElement("iframe");n.style.position="absolute";t[i]=n}var a=n.style,o=e.style;a.top=(parseInt(o.top)||0)+"px";a.left=(parseInt(o.left)||0)+"px";a.width=e.offsetWidth+"px";a.height=e.offsetHeight+"px";e.insertAdjacentElement("beforeBegin",n);return n}}()});if("gecko"===t._$KERNEL.engine)I$("02e40193aebf81d62f3f7bb4744345c4",function(){if(!t._$SUPPORT.css3d)t._$SUPPORT.css3d="MozPerspective"in document.body.style;if(!("insertAdjacentElement"in document.body))HTMLElement.prototype.insertAdjacentElement=function(e,t){if(e&&t)switch(e){case"beforeEnd":this.appendChild(t);return;case"beforeBegin":this.parentNode.insertBefore(t,this);return;case"afterBegin":!this.firstChild?this.appendChild(t):this.insertBefore(t,this.firstChild);return;case"afterEnd":!this.nextSibling?this.parentNode.appendChild(t):this.parentNode.insertBefore(t,this.nextSibling);return}};if(!("innerText"in document.body)){HTMLElement.prototype["__defineGetter__"]("innerText",function(){return this.textContent});HTMLElement.prototype["__defineSetter__"]("innerText",function(e){this.textContent=e})}});return e},"31e5e693a2567a43414153bc991a3b12","dcfbb39e75d6de6b8114c072c5b070e0","780a96dd705b8404d9982fdccc656c08");I$("455067b9dcb8d33b1e1808745dbbb96a",function(e,t,i,n,a,o,s,_,r,c){var d={},l,f={},u={},h=document.createDocumentFragment();if(!document.head)document.head=document.getElementsByTagName("head")[0]||document.body;s.dump=function(){return{pool:f,dirty:u,fragment:h}};s._$id=d._$id=function(e){e=s._$get(e);if(e){var t=e.id?e.id:"auto-id-"+i._$uniqueID();if(!("id"in e))f[t]=e;e.id=t;if(!s._$get(t))u[t]=e;return t}};s._$get=function(e){try{var t=f[""+e]}catch(n){console.log(n)}if(t)return t;if(!i._$isString(e)&&!i._$isNumber(e))return e;var t=document.getElementById(e);if(!t)t=o.__getElementById(h,e);if(t)delete u[e];return t||u[e]};s._$getChildren=d._$getChildren=function(e,t){e=s._$get(e);if(!e)return null;var n=o.__getChildren(e);if(t)i._$reverseEach(n,function(e,i,n){if(!s._$hasClassName(e,t))n.splice(i,1)});return n};s._$getParent=function(){var e;var t=function(t,i){var n=t.split(":");if(n.length>1){if(!e)e={a:s._$attr,d:s._$dataset,c:s._$hasClassName,t:function(e,t){return(e.tagName||"").toLowerCase()===t}};var a=e[n[0]];if(a)return!!a(i,n[1]);t=n[1]}return!!s._$attr(i,t)||!!s._$dataset(i,t)||s._$hasClassName(i,t)};return function(e,n){e=s._$get(e);if(e){if(!n)return e;if(i._$isString(n))n=t._$bind(null,n);if(i._$isFunction(n)){for(;e;){if(n(e))return e;e=e.parentNode}return null}return e}}}();s._$getByClassName=d._$getByClassName=function(e,t){e=s._$get(e);return!e?null:o.__getElementsByClassName(e,t.trim())};s._$getSibling=d._$getSibling=function(){var e=function(){return!0};return function(t,n){t=s._$get(t);if(!t)return null;var a={backward:!1,filter:e};if(i._$isFunction(n))a.filter=n;else a=i._$fetch(a,n);var _=a.backward?o.__previousSibling:o.__nextSibling;for(;(t=_(t))&&!a.filter(t););return t}}();s._$getScrollViewPort=function(e){e=s._$get(e);if(e){e=e.parentNode;for(;e&&!(e.scrollHeight>e.clientHeight);)e=e.parentNode;if(e)return e;
}var t=document.body.scrollHeight,i=document.documentElement.scrollHeight;return i>=t?document.documentElement:document.body};s._$getPageBox=function(){var e=function(e){var t=0;i._$forEach(e,function(e){if(e)if(!t)t=e;else t=Math.min(t,e)});return t};var t=[{main:"scroll",sub:["Top","Left"],func:function(e,t,i){return Math.max(t["scroll"+e],i["scroll"+e])}},{main:"client",sub:["Width","Height"],func:function(t,i,n){return e([i["client"+t],i["offset"+t],n["client"+t],n["offset"+t]])}},{main:"scroll",sub:["Width","Height"],func:function(e,t,i,n){return Math.max(n["client"+e],t["scroll"+e],i["scroll"+e])}}];return function(e){var n={},a=e||document,o=a.body,s=a.documentElement;i._$forEach(t,function(e){var t=e.main;i._$forEach(e.sub,function(i){n[t+i]=e.func(i,o,s,n)})});return n}}();s._$getMaxBox=function(e,t){var n=i._$merge({},e),a=t.width/t.height,o=e.width/e.height;if(a>o&&e.height>t.height){n.height=t.height;n.width=n.height*o}if(a<o&&e.width>t.width){n.width=t.width;n.height=n.width/o}return n};s._$scrollTo=d._$scrollTo=function(e){var t=s._$offset(e);window.scrollTo(t.x,t.y)};s._$align=function(){var e=/\s+/;var t={left:function(){return 0},center:function(e,t){return(e.width-t.width)/2},right:function(e,t){return e.width-t.width},top:function(){return 0},middle:function(e,t){return(e.height-t.height)/2},bottom:function(e,t){return e.height-t.height}};return function(i,n,a){var o={},s=(a||"").split(e),_=t[s[1]]||t.middle,r=t[s[0]]||t.center;o.top=_(i,n);o.left=r(i,n);return o}}();s._$offset=d._$offset=function(){var e=function(e){return e==document.body||e==document.documentElement};return function(t,i){t=s._$get(t);if(!t)return null;i=s._$get(i)||null;var n=t,a={x:0,y:0},o,_,r;for(;n&&n!=i;){o=e(n)||n==t;_=o?0:n.scrollLeft;r=parseInt(s._$getStyle(n,"borderLeftWidth"))||0;a.x+=n.offsetLeft+r-_;_=o?0:n.scrollTop;r=parseInt(s._$getStyle(n,"borderTopWidth"))||0;a.y+=n.offsetTop+r-_;n=n.offsetParent}return a}}();s._$fullScreen=d._$fullScreen=function(e){e=s._$get(e);if(e)o.__fullScreen(e,s._$getPageBox())};s._$mask=d._$mask=function(e){e=s._$get(e);if(e){s._$id(e);return o.__mask(e)}return null};s._$unmask=d._$unmask=function(e){e=s._$get(e);if(e){s._$id(e);return o.__unmask(e)}return null};s._$create=function(){var e={a:{href:"#",hideFocus:!0},style:{type:"text/css"},link:{type:"text/css",rel:"stylesheet"},iframe:{frameBorder:0},script:{defer:!0,type:"text/javascript"}};return function(t,n,a){var o=document.createElement(t),_=e[t.toLowerCase()];i._$merge(o,_);if(n)o.className=n;a=s._$get(a);if(a)a.appendChild(o);else if(!_)h.appendChild(o);return o}}();s._$createXFrame=function(){var e=function(){if(location.hostname==document.domain)return"about:blank";else return'javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();})();'};var t=function(e){e=e.trim();if(!e)return s._$create("iframe");var t;try{t=document.createElement('<iframe name="'+e+'"></iframe>');t.frameBorder=0}catch(i){t=s._$create("iframe");t.name=e}return t};return function(a){a=a||_;var o=t(a.name||"");if(!a.visible)o.style.display="none";if(i._$isFunction(a.onload))n._$addEvent(o,"load",function(e){if(o.src){n._$clearEvent(o,"load");a.onload(e)}});var r=a.parent;if(i._$isFunction(r))try{r(o)}catch(c){}else(s._$get(r)||document.body).appendChild(o);var d=a.src||e();window.setTimeout(function(){o.src=d},0);return o}}();s._$remove=d._$remove=function(){var e={img:function(e){e.src=t._$BLANK_IMAGE},iframe:function(e){e.src="about:blank"}};var a=function(t,n){if(n){if(t.getElementsByTagName)i._$forEach(t.getElementsByTagName(n),a)}else{var o=(t.tagName||"").toLowerCase(),s=e[o];if(s)s(t)}};return function(e){e=s._$get(e);if(e){if(!arguments[1])n._$clearEvent(e);a(e);a(e,"img");a(e,"iframe");if(e.parentNode)e.parentNode.removeChild(e)}}}();s._$removeByEC=d._$removeByEC=function(e){e=s._$get(e);if(e)try{h.appendChild(e)}catch(t){console.error(t)}};s._$clearChildren=d._$clearChildren=function(e){e=s._$get(e);if(e)i._$reverseEach(e.childNodes,function(e){s._$remove(e)})};s._$wrapInline=d._$wrapInline=function(){var e,t=/\s+/;var i=function(){if(!e){e=s._$pushCSSText(".#<uispace>{position:relative;zoom:1;}.#<uispace>-show{position:absolute;top:0;left:100%;cursor:text;white-space:nowrap;overflow:hidden;}");s._$dumpCSSText()}};return function(n,a){n=s._$get(n);if(!n)return null;i();a=a||_;var o=n.parentNode;if(!s._$hasClassName(o,e)){o=s._$create("span",e);n.insertAdjacentElement("beforeBegin",o);o.appendChild(n)}var r=a.nid||"",c=s._$getByClassName(o,r||e+"-show")[0];if(!c){var d=((a.clazz||"")+" "+r).trim();d=e+"-show"+(!d?"":" ")+d;c=s._$create(a.tag||"span",d);o.appendChild(c)}var d=a.clazz;if(d){d=(d||"").trim().split(t)[0]+"-parent";s._$addClassName(o,d)}return c}}();s._$dataset=d._$dataset=function(e,t,n){var a=s._$id(e);if(!a)return null;if(i._$isString(t))return o.__dataset(s._$get(e),t,n);if(i._$isObject(t)){var _={};i._$forIn(t,function(e,t){_[t]=s._$dataset(a,t,e)});return _}if(i._$isArray(t)){var _={};i._$forEach(t,function(e){_[e]=s._$dataset(a,e)});return _}return null};s._$attr=d._$attr=function(e,t,i){e=s._$get(e);if(!e)return"";if(void 0!==i&&e.setAttribute)e.setAttribute(t,i);return o.__getAttribute(e,t)};s._$html2node=function(){var e=/<(.*?)(?=\s|>)/i,t={li:"ul",tr:"tbody",td:"tr",th:"tr",option:"select"};return function(i){var n;if(e.test(i))n=t[(RegExp.$1||"").toLowerCase()]||"";var a=s._$create(n||"div");a.innerHTML=i;var o=s._$getChildren(a);return o.length>1?a:o[0]}}();s._$dom2xml=d._$dom2xml=function(e){e=s._$get(e);return!e?"":o.__serializeDOM2XML(e)};s._$xml2dom=function(e){e=(e||"").trim();return!e?null:o.__parseDOMFromXML(e)};s._$dom2object=d._$dom2object=function(e,t){t=t||{};e=s._$get(e);if(!e)return t;var n=e.tagName.toLowerCase(),a=s._$getChildren(e);if(!a||!a.length){t[n]=e.textContent||e.text||"";return t}var o={};t[n]=o;i._$forEach(a,function(e){s._$dom2object(e,o)});return t};s._$xml2object=function(e){try{return s._$dom2object(s._$xml2dom(e))}catch(t){return null}};s._$text2type=function(){var e={xml:function(e){return s._$xml2dom(e)},json:function(e){try{return JSON.parse(e)}catch(t){return null}},dft:function(e){return e}};return function(t,i){i=(i||"").toLowerCase();return(e[i]||e.dft)(t||"")}}();s._$style=d._$style=function(e,t){e=s._$get(e);if(e)i._$loop(t,function(t,i){s._$setStyle(e,i,t)})};s._$setStyle=d._$setStyle=function(e,t,i){e=s._$get(e);if(e)o.__setStyleValue(e,t,o.__processCSSText(i))};s._$getStyle=d._$getStyle=function(e,t){e=s._$get(e);return!e?"":o.__getStyleValue(e,t)};s._$addScript=function(e){try{e=e.trim();if(e)return new Function(e)()}catch(t){console.error(t.message);console.error(t.stack)}};s._$addStyle=function(){var e=/[\s\r\n]+/gi;return function(t){t=(t||"").replace(e," ").trim();var i=null;if(t){i=s._$create("style");document.head.appendChild(i);o.__injectCSSText(i,o.__processCSSText(t))}return i}}();s._$pushCSSText=function(){var e=/#<(.*?)>/g,t=+new Date;return function(t,n){if(!l)l=[];var a="auto-"+i._$uniqueID(),o=i._$merge({uispace:a},n);l.push(t.replace(e,function(e,t){return o[t]||e}));return a}}();s._$dumpCSSText=function(){if(l){s._$addStyle(l.join(" "));l=null}};s._$appendCSSText=d._$appendCSSText=function(e,t){e=s._$get(e);return!e?null:o.__appendCSSText(e,o.__processCSSText(t))};s._$addClassName=d._$addClassName=function(e,t){if(t){e=s._$get(e);if(e)o.__processClassName(e,"add",t)}};s._$delClassName=d._$delClassName=function(e,t){e=s._$get(e);if(e)o.__processClassName(e,"remove",t)};s._$replaceClassName=d._$replaceClassName=function(e,t,i){e=s._$get(e);if(e)o.__processClassName(e,"replace",t,i)};s._$hasClassName=d._$hasClassName=function(e,t){e=s._$get(e);if(e)return o.__hasClassName(e,t);else return!1};s._$matrix=function(e){e=(e||"").trim();return o.__getCSSMatrix(e)};s._$css3d=d._$css3d=function(e,t,i){e=s._$get(e);if(e){var n=o.__processTransformValue(t,i);if(n)s._$setStyle(e,"transform",n)}};a._$merge(d);if(!0)e.copy(e.P("nej.e"),s);return s},"cb16f42daf02e8bc03f90d7a179f5573","390efe7fffa9e37ec235fc1a8b9dd5b7","780a96dd705b8404d9982fdccc656c08","4cd67180df9ce322f7a6a6207080bbc9","b01c677ecd401a2fc164bad715b15e74","20e1e81b2a0ca3891d751049f66126d8");I$("07172be52c74947b69fdfb294c55da06",function(e,t,i,n,a,o){i.__checkEvent=function(){var e={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},i=t._$KERNEL.prefix,n={transitionend:"TransitionEnd",animationend:"AnimationEnd",animationstart:"AnimationStart",animationiteration:"AnimationIteration",visibilitychange:"visibilitychange",fullscreenchange:"fullscreenchange"};var a={enter:function(e,t,i){var n={type:"keypress"};if(i)n.handler=function(t){if(13===t.keyCode)i.call(e,t)};return n}};var o=function(e){return(i.evt||i.pro)+e};return function(t,i,s){var _={type:i,handler:s};if(!("on"+i in t)){var r=e[i];if(r){_.type=r;return _}var r=n[i];if(r){_.type=o(r);return _}var c=a[i];if(c)return c.apply(null,arguments)}return _}}();i.__addEvent=function(){var e=arguments;if(!1)if(!("on"+e[1]in e[0]))console.log("not support event["+e[1]+"] for "+e[0]);e[0].addEventListener(e[1],e[2],e[3])};i.__delEvent=function(){var e=arguments;e[0].removeEventListener(e[1],e[2],e[3])};i.__dispatchEvent=function(t,i,n){var a=document.createEvent("Event");a.initEvent(i,!0,!0);e._$merge(a,n);t.dispatchEvent(a)};return i},"780a96dd705b8404d9982fdccc656c08","dcfbb39e75d6de6b8114c072c5b070e0");I$("d8323bd795cd5fc1183f279b2b31cbf2",function(e,t,i,n,a,o,s){if("trident"===e._$KERNEL.engine&&e._$KERNEL.release>="6.0")I$("3a1e1bf946d044c94605b834edd2ccd1",function(){t.__checkEvent=function(){var e={touchcancel:"MSPointerCancel",touchstart:"MSPointerDown",touchmove:"MSPointerMove",touchend:"MSPointerUp",fullscreenchange:"MSFullscreenChange"};return t.__checkEvent._$aop(function(t){var i=t.args;var n=e[i[1]];if(n){t.stopped=!0;t.value={type:n,handler:i[2]}}})}()});if("trident"===e._$KERNEL.engine&&"5.0"==e._$KERNEL.release)I$("2c7fbc612ed8e7af33998d1bb2690007",function(){t.__checkEvent=function(){var e={};
var i={input:function(t,i,n){if(!n)return{type:i};else return{type:i,handler:function(i){var a=t.id;e[a]=t.value;n.call(t,i)},link:[[document,"selectionchange",function(i){var a=t.id;if(t==document.activeElement){if(e[a]!==t.value){e[a]=t.value;n.call(t,i)}}else delete e[a]}]]}}};return t.__checkEvent._$aop(function(e){var t=e.args;var n=i[t[1]];if(n){e.stopped=!0;e.value=n.apply(null,t)}})}()});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release>="5.0")I$("b34eb1555da99bbba674d3b181a4f2d1",function(){var e={propertychange:1};t.__addEvent=t.__addEvent._$aop(function(t){var i=t.args;if(null!=e[i[1]]&&i[0].attachEvent){t.stopped=!0;i[0].attachEvent("on"+i[1],i[2])}});t.__delEvent=t.__delEvent._$aop(function(t){var i=t.args,n=e[i[1]];if(null!=e[i[1]]&&i[0].detachEvent){t.stopped=!0;i[0].detachEvent("on"+i[1],i[2])}})});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="4.0")I$("a61dd7dd2be59ec372a1506ee03abc55",function(){t.__checkEvent=function(){var e={};var i={input:function(t,i,n){var a={type:"propertychange"};if(n){var o=t.id;var s=function(i){if(t.value&&!e["x-"+o]){e["x-"+o]=!0;n.call(t,i)}};a.handler=function(i){if("value"in t&&"value"==i.propertyName){if(e[o])return;e[o]=!0;n.call(t,i);delete e[o]}};a.link=[[t,"keyup",s],[t,"mouseup",s],[t,"mousemove",s]];a.destroy=function(){delete e[o];delete e["x-"+o]}}return a},load:function(e,t,i){var n={type:"readystatechange"};if(i)n.handler=function(t){if("loaded"==e.readyState||"complete"==e.readyState)i.call(e,t)};return n}};return t.__checkEvent._$aop(function(e){var t=e.args;var n=i[t[1]];if(n){e.stopped=!0;e.value=n.apply(null,t)}if(t[2])t[2]=t[2]._$bind(t[0])})}();t.__addEvent=function(){var e=arguments;if(!1)if(!("on"+e[1]in e[0]))console.log("not support event["+e[1]+"] for "+e[0]);e[0].attachEvent("on"+e[1],e[2])};t.__delEvent=function(){var e=arguments;e[0].detachEvent("on"+e[1],e[2])};t.__dispatchEvent=function(){var e={propertychange:{propertyName:"value"}};return function(t,n,a){var o=document.createEventObject();try{i._$merge(o,e[n],a);t.fireEvent("on"+n,o)}catch(s){console.error(s.message);console.error(s.stack)}}}()});if("gecko"===e._$KERNEL.engine)I$("bc1231bc9031a622bef2986c6874b3eb",function(){t.__checkEvent=function(){var e=/^(?:transitionend|animationend|animationstart|animationiteration)$/i;var i={mousewheel:function(e,t,i){var n={type:"MozMousePixelScroll"};if(i)n.handler=function(t){var n=t.detail;t.wheelDelta=-n;t.wheelDeltaY=-n;t.wheelDeltaX=0;i.call(e,t)};return n}};return t.__checkEvent._$aop(function(t){var n=t.args;if(e.test(n[1])){t.stopped=!0;t.value={type:n[1],handler:n[2]}}var a=i[n[1]];if(a){t.stopped=!0;t.value=a.apply(null,n)}})}()});return t},"dcfbb39e75d6de6b8114c072c5b070e0","07172be52c74947b69fdfb294c55da06","780a96dd705b8404d9982fdccc656c08");I$("4cd67180df9ce322f7a6a6207080bbc9",function(e,t,i,n,a,o,s,_,r){var c={},d={};var l=function(){var e=/[\s,;]+/;return function(t){var t=(t||"").trim().toLowerCase();return!t?null:t.split(e)}}();var f=function(e,i,n){var a="page"+i;return null!=e[a]?e[a]:e["client"+i]+t._$getPageBox()["scroll"+n]};var u=function(e,t,i){var n="scroll"+i;_node=o._$getElement(e),_xret=f(e,t,i);for(;_node&&_node!=document.body&&_node!=document.documentElement;){_xret+=_node[n]||0;_node=_node.parentNode}return _xret};var h=function(e,n,a,o){var s={};e=t._$get(e);if(!e)return null;t._$id(e);s.element=e;if(!i._$isFunction(a))return null;s.handler=a;var n=l(n);if(!n)return null;s.type=n;s.capture=!!o;return s};o._$addEvent=d._$addEvent=function(){var e=function(e,i,n){var a=t._$id(i.element),o=c[a]||{},s=o[e]||[];s.push({type:n.type||e,func:n.handler||i.handler,sfun:i.handler,capt:i.capture,link:n.link,destroy:n.destroy});o[e]=s;c[a]=o};return function(){var n=h.apply(null,arguments);if(n)i._$forEach(n.type,function(o){var s=a.__checkEvent(n.element,o,n.handler);a.__addEvent(n.element,s.type,s.handler,n.capture);i._$forIn(s.link,function(e){e[3]=!!e[3];a.__addEvent.apply(a,e);e[0]=t._$id(e[0])});e(o,n,s)})}}();o._$delEvent=d._$delEvent=function(){var e=function(e,n){var a=t._$id(n.element),o=c[a]||s,_=o[e],r=i._$indexOf(_,function(e){return e.sfun===n.handler&&e.capt===n.capture});var d=null;if(r>=0){var l=_.splice(r,1)[0];d=[[n.element,l.type,l.func,n.capture]];if(l.link){i._$forEach(l.link,function(e){e[0]=t._$get(e[0])});d.push.apply(d,l.link)}if(l.destroy)l.destroy();if(!_.length)delete o[e];if(!i._$hasProperty(o))delete c[a]}return d};return function(){var t=h.apply(null,arguments);if(t)i._$forEach(t.type,function(n){i._$forEach(e(n,t),function(e){a.__delEvent.apply(a,e)})})}}();o._$clearEvent=d._$clearEvent=function(){var e=function(e,t,n){i._$reverseEach(n,function(i){o._$delEvent(e,t,i.sfun,i.capt)})};return function(n,a){var s=t._$id(n);if(s){var _=c[s];if(_){a=l(a);if(a)i._$forEach(a,function(t){e(s,t,_[t])});else i._$loop(_,function(e,t){o._$clearEvent(n,t)})}}}}();o._$dispatchEvent=d._$dispatchEvent=function(e,n,o){var e=t._$get(e);if(e)i._$forEach(l(n),function(t){var i=a.__checkEvent(e,t);a.__dispatchEvent(e,i.type,o)})};o._$getElement=function(){var e;var n=function(i,n){var a=i.split(":");if(a.length>1){if(!e)e={a:t._$attr,d:t._$dataset,c:t._$hasClassName,t:function(e,t){return(e.tagName||"").toLowerCase()===t}};var o=e[a[0]];if(o)return!!o(n,a[1]);i=a[1]}return!!t._$attr(n,i)||!!t._$dataset(n,i)||t._$hasClassName(n,i)};return function(e){if(!e)return null;var t=e.target||e.srcElement,a=arguments[1];if(!a)return t;if(i._$isString(a))a=n._$bind(null,a);if(i._$isFunction(a)){for(;t;){if(a(t))return t;t=t.parentNode}return null}return t}}();o._$stop=function(e){o._$stopBubble(e);o._$stopDefault(e)};o._$stopBubble=function(e){if(e)e.stopPropagation?e.stopPropagation():e.cancelBubble=!0};o._$stopDefault=function(e){if(e)e.preventDefault?e.preventDefault():e.returnValue=!1};o._$page=function(e){return{x:o._$pageX(e),y:o._$pageY(e)}};o._$pageX=function(e){return u(e,"X","Left")};o._$pageY=function(e){return u(e,"Y","Top")};o._$clientX=function(e){return f(e,"X","Left")};o._$clientY=function(e){return f(e,"Y","Top")};n._$merge(d);if(!0)e.copy(e.P("nej.v"),o);return o},"cb16f42daf02e8bc03f90d7a179f5573","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","b01c677ecd401a2fc164bad715b15e74","d8323bd795cd5fc1183f279b2b31cbf2");!function(){if("undefined"==typeof TrimPath){TrimPath={};if("undefined"!=typeof exports)TrimPath=exports}var e={},t=[],i=/\s+/g,n=+new Date,a,o,s;var _=function(){var e=/^\s*[\[\{'"].*?[\]\}'"]\s*$/,t=/[\&\|\<\>\+\-\*\/\%\,\(\)\[\]\?\:\!\=\;]/,i=/^(?:defined|null|undefined|true|false|instanceof|new|this|typeof|\$v|[\d]+)$/i,n=/^new\s+/,a=/['"]/;var o=function(t){if(!e.test(t)){t=t.split(".")[0].trim();if(t&&!a.test(t)){t=t.replace(n,"");try{if(i.test(t))return;s[t]=1}catch(o){}}}};return function(i){i=i||"";if(i&&!e.test(i)){var n=i.split(t);for(var a=0,s=n.length;a<s;a++)o(n[a])}}}();var r=function(e){if("in"!=e[2])throw"bad for loop statement: "+e.join(" ");t.push(e[1]);_(e[3]);return"var __HASH__"+e[1]+" = "+e[3]+","+e[1]+","+e[1]+"_count=0;if (!!__HASH__"+e[1]+")for(var "+e[1]+"_key in __HASH__"+e[1]+"){"+e[1]+" = __HASH__"+e[1]+"["+e[1]+"_key];if (typeof("+e[1]+')=="function") continue;'+e[1]+"_count++;"};var c=function(){var e=t[t.length-1];return"}; if(!__HASH__"+e+"||!"+e+"_count){"};var d=function(){t.pop();return"};"};var l=function(e){if("as"!=e[2])throw"bad for list loop statement: "+e.join(" ");var t=e[1].split("..");if(t.length>1){_(t[0]);_(t[1]);return"for(var "+e[3]+","+e[3]+"_index=0,"+e[3]+"_beg="+t[0]+","+e[3]+"_end="+t[1]+","+e[3]+"_length=parseInt("+e[3]+"_end-"+e[3]+"_beg+1);"+e[3]+"_index<"+e[3]+"_length;"+e[3]+"_index++){"+e[3]+" = "+e[3]+"_beg+"+e[3]+"_index;"}else{_(e[1]);return"for(var __LIST__"+e[3]+" = "+e[1]+","+e[3]+","+e[3]+"_index=0,"+e[3]+"_length=__LIST__"+e[3]+".length;"+e[3]+"_index<"+e[3]+"_length;"+e[3]+"_index++){"+e[3]+" = __LIST__"+e[3]+"["+e[3]+"_index];"}};var f=function(e){if(e&&e.length){e.shift();var t=e[0].split("(")[0];return"var "+t+" = function"+e.join("").replace(t,"")+"{var __OUT=[];"}};var u=function(e){if(!e[1])throw"bad include statement: "+e.join(" ");return'if (typeof inline == "function"){__OUT.push(inline('};var h=function(e,t){_(t.slice(1).join(" "));return e};var m=function(e){return h("if(",e)};var p=function(e){return h("}else if(",e)};var g=function(e){return h("var ",e)};o={blk:/^\{(cdata|minify|eval)/i,tag:"forelse|for|list|if|elseif|else|var|macro|break|notrim|trim|include",def:{"if":{pfix:m,sfix:"){",pmin:1},"else":{pfix:"}else{"},elseif:{pfix:p,sfix:"){",pdft:"true"},"/if":{pfix:"}"},"for":{pfix:r,pmin:3},forelse:{pfix:c},"/for":{pfix:d},list:{pfix:l,pmin:3},"/list":{pfix:"};"},"break":{pfix:"break;"},"var":{pfix:g,sfix:";"},macro:{pfix:f},"/macro":{pfix:'return __OUT.join("");};'},trim:{pfix:function(){a=!0}},"/trim":{pfix:function(){a=null}},inline:{pfix:u,pmin:1,sfix:"));}"}},ext:{seed:function(e){return(e||"")+""+n},"default":function(e,t){return e||t}}};var b=function(){var e=/\\([\{\}])/g;return function(t,n){t=t.replace(e,"$1");var a=t.slice(1,-1).split(i),s=o.def[a[0]];if(s){if(s.pmin&&s.pmin>=a.length)throw"Statement needs more parameters:"+t;n.push(s.pfix&&"string"!=typeof s.pfix?s.pfix(a):s.pfix||"");if(s.sfix){if(a.length<=1){if(s.pdft)n.push(s.pdft)}else for(var _=1,r=a.length;_<r;_++){if(_>1)n.push(" ");n.push(a[_])}n.push(s.sfix)}}else v(t,n)}}();var $=function(e,t){if(e&&e.length)if(1!=e.length){var i=e.pop().split(":");t.push("__MDF['"+i.shift()+"'](");$(e,t);if(i.length>0){var n=i.join(":");_(n);t.push(","+n)}t.push(")")}else{var a=e.pop();_(a);t.push(""==a?'""':a)}};var v=function(e,t){if(e){var i=e.split("\n");if(i&&i.length)for(var n=0,o=i.length,s;n<o;n++){s=i[n];if(a){s=s.trim();if(!s)continue}y(s,t);if(a&&n<o-1)t.push("__OUT.push('\\n');")}}};var y=function(){var e=/\|\|/g,t=/#@@#/g;return function(i,n){var a="}",o=-1,s=i.length,_,r,c,d,l;for(;o+a.length<s;){_="${";r="}";c=i.indexOf(_,o+a.length);if(c<0)break;if("%"==i.charAt(c+2)){_="${%";r="%}"}d=i.indexOf(r,c+_.length);
if(d<0)break;C(i.substring(o+a.length,c),n);l=i.substring(c+_.length,d).replace(e,"#@@#").split("|");for(var f=0,u=l.length;f<u;l[f]=l[f].replace(t,"||"),f++);n.push("__OUT.push(");$(l,n);n.push(");");a=r;o=d}C(i.substring(o+a.length),n)}}();var C=function(){var e={r:/\n|\\|\'/g,"\n":"\\n","\\":"\\\\","'":"\\'"};var t=function(t){return(t||"").replace(e.r,function(t){return e[t]||t})};return function(e,i){if(e)i.push("__OUT.push('"+t(e)+"');")}}();var x=function(){var e=/\t/g,t=/\n/g,n=/\r\n?/g;var a=function(e,t){var i=e.indexOf("}",t+1);for(;"\\"==e.charAt(i-1);)i=e.indexOf("}",i+1);return i};var _=function(){var e=[],t=arguments[0];for(var i in t){i=(i||"").trim();if(i)e.push(i+"=$v('"+i+"')");else;}return e.length>0?"var "+e.join(",")+";":""};return function(r){s={};r=r.replace(n,"\n").replace(e,"    ");var c=["if(!__CTX) return '';",""];c.push("function $v(__NAME){var v = __CTX[__NAME];return v==null?window[__NAME]:v;};");c.push("var defined=function(__NAME){return __CTX[__NAME]!=null;},");c.push("__OUT=[];");var d=-1,l=r.length;var f,u,h,m,p,g,$,y;for(;d+1<l;){f=d;f=r.indexOf("{",f+1);for(;f>=0;){u=a(r,f);h=r.substring(f,u);m=h.match(o.blk);if(m){p=m[1].length+1;g=r.indexOf("}",f+p);if(g>=0){$=g-f-p<=0?"{/"+m[1]+"}":h.substr(p+1);p=r.indexOf($,g+1);if(p>=0){v(r.substring(d+1,f),c);y=r.substring(g+1,p);switch(m[1]){case"cdata":C(y,c);break;case"minify":C(y.replace(t," ").replace(i," "),c);break;case"eval":if(y)c.push("__OUT.push((function(){"+y+"})());")}f=d=p+$.length-1}}}else if("$"!=r.charAt(f-1)&&"\\"!=r.charAt(f-1)&&0==h.substr("/"==h.charAt(1)?2:1).search(o.tag))break;f=r.indexOf("{",f+1)}if(f<0)break;u=a(r,f);if(u<0)break;v(r.substring(d+1,f),c);b(r.substring(f,u+1),c);d=u}v(r.substring(d+1),c);c.push(';return __OUT.join("");');c[1]=_(s);s=null;return new Function("__CTX","__MDF",c.join(""))}}();TrimPath.seed=function(){return n};TrimPath.merge=function(){var t={};TrimPath.dump=function(){return{func:t,text:e}};return function(i,n,a){try{n=n||{};if(!t[i]&&!e[i])return"";if(!t[i]){t[i]=x(e[i]);delete e[i]}if(a)for(var s in o.ext)if(!a[s])a[s]=o.ext[s];return t[i](n,a||o.ext)}catch(_){return _.message||""}}}();TrimPath.parse=function(){var t=+new Date;return function(i,n){if(!i)return"";n=n||"ck-"+t++;if(null!=e[n]){console.warn("jst template overwrited with key "+n);console.debug("old template content: "+e[n].replace(/\n/g," "));console.debug("new template content: "+i.replace(/\n/g," "))}e[n]=i;return n}}()}();I$("4b460e06b9deefa9efed504ac2d1a610",function(e,t,i,n,a,o,s,_,r){var c={};o._$seed=TrimPath.seed;o._$get=function(){var e=function(e){return!o._$getTextTemplate?"":o._$getTextTemplate(e)};return function(i,n,a){n=n||{};n.inline=e;a=t._$merge({},c,a);a.rand=t._$uniqueID;a.format=t._$format;a.escape=t._$escape;a.inline=e;return TrimPath.merge(i,n,a)}}();o._$add=function(e,t){if(!e)return"";var n,a=i._$get(e);if(a){n=a.id;e=a.value||a.innerText;if(!t)i._$remove(a)}return TrimPath.parse(e,n)};o._$addTemplate=function(e,t){return TrimPath.parse(e,t)};o._$render=function(e,t,n,a){e=i._$get(e);if(e)e.innerHTML=o._$get(t,n,a)};o._$extend=function(e){t._$merge(c,e)};n._$merge({_$render:o._$render});if(!0){var d=e.P("nej.e");d._$addHtmlTemplate=o._$add;d._$getHtmlTemplate=o._$get;d._$getHtmlTemplateSeed=o._$seed;d._$renderHtmlTemplate=o._$render;d._$registJSTExt=o._$extend}return o},"cb16f42daf02e8bc03f90d7a179f5573","780a96dd705b8404d9982fdccc656c08","455067b9dcb8d33b1e1808745dbbb96a","b01c677ecd401a2fc164bad715b15e74","a3013a4daa8d75265c6916c93f515243");I$("e84bded65b98b38941ed4f3e7b9e6d19",function(e,t,i,n,a,o){i._$klass=function(){var e=function(){return"[object Function]"!==n.toString.call(arguments[0])};var i=function(e,i){for(;i;){var n=i.prototype,a=t.__forIn(n,function(t){return e===t});if(null!=a)return{name:a,klass:i};i=i._$super}};return function(){var n=function(){return this.__init.apply(this,arguments)};n.prototype.__init=a;n._$extend=function(n,a){if(!e(n)){var o=this;if(a!==!1)t.__forIn(n,function(t,i){if(!e(t))o[i]=t});this._$super=n;var s=function(){};s.prototype=n.prototype;this.prototype=new s;this.prototype.constructor=this;var _=[],r={};var c=function(e,t){var n=i(e,t);if(n){if(_[_.length-1]!=n.name)_.push(n.name);r[n.name]=n.klass._$super;return n.name}};this.prototype.__super=function(){var e=_[_.length-1],t=arguments.callee.caller;if(!e)e=c(t,this.constructor);else{var i=r[e].prototype;if(!i.hasOwnProperty(t)||t!=i[e])e=c(t,this.constructor);else r[e]=r[e]._$super}var n=r[e].prototype[e].apply(this,arguments);if(e==_[_.length-1]){_.pop();delete r[e]}return n};if(!0){var d=this.prototype;d.__supInit=d.__super;d.__supReset=d.__super;d.__supDestroy=d.__super;d.__supInitNode=d.__super;d.__supDoBuild=d.__super;d.__supOnShow=d.__super;d.__supOnHide=d.__super;d.__supOnRefresh=d.__super;this._$supro=n.prototype}return this.prototype}};return n}}();if(!0){e.C=i._$klass;e.copy(this.NEJ,e)}return i},"cb16f42daf02e8bc03f90d7a179f5573","48a93251984a4481fcb16767240a7f74");I$("1bb4e44caf394e00cfac15a4e96405c3",function(e,t,i,n,a,o,s,_){var r;a._$$EventTarget=t._$klass();r=a._$$EventTarget.prototype;a._$$EventTarget._$allocate=function(e){e=e||{};var t=!!this.__pool&&this.__pool.shift();if(!t){t=new this(e);this.__inst__=(this.__inst__||0)+1}t.__reset(e);return t};a._$$EventTarget._$recycle=function(){var e=function(e,t,i){e._$recycle();i.splice(t,1)};return function(t){if(!t)return null;if(!n._$isArray(t)){if(!(t instanceof this)){var i=t.constructor;if(i._$recycle)i._$recycle(t);return null}if(t==this.__instance)delete this.__instance;if(t==this.__inctanse)delete this.__inctanse;t.__destroy();if(!this.__pool)this.__pool=[];if(n._$indexOf(this.__pool,t)<0)this.__pool.push(t);return null}n._$reverseEach(t,e,this)}}();a._$$EventTarget._$getInstance=function(e){if(!this.__instance)this.__instance=this._$allocate(e);return this.__instance};a._$$EventTarget._$getInstanceWithReset=function(e,t){if(t&&this.__inctanse){this.__inctanse._$recycle();delete this.__inctanse}if(!this.__inctanse)this.__inctanse=this._$allocate(e);else this.__inctanse.__reset(e);return this.__inctanse};r.__init=function(){this.__events={};this.__events_dom={};this.id=n._$uniqueID()};r.__reset=function(e){this._$batEvent(e)};r.__destroy=function(){this._$clearEvent();this.__doClearDomEvent()};r.__doInitDomEvent=function(){var e=function(e){if(e&&!(e.length<3)){this.__events_dom["de-"+n._$uniqueID()]=e;i._$addEvent.apply(i,e)}};return function(t){n._$forEach(t,e,this)}}();r.__doClearDomEvent=function(){var e=function(e,t,n){delete n[t];i._$delEvent.apply(i,e)};return function(){n._$loop(this.__events_dom,e)}}();r.__doClearComponent=function(e){e=e||s;n._$loop(this,function(t,i,n){if(t&&t._$recycle&&!e(t)){delete n[i];t._$recycle()}})};r._$recycle=function(){this.constructor._$recycle(this)};r._$hasEvent=function(e){var e=(e||"").toLowerCase(),t=this.__events[e];return!!t&&t!==s};r._$delEvent=function(e,t){var e=(e||"").toLowerCase(),i=this.__events[e];if(n._$isArray(i)){n._$reverseEach(i,function(e,i,n){if(e==t)n.splice(i,1)});if(!i.length)delete this.__events[e]}else if(i==t)delete this.__events[e]};r._$setEvent=function(e,t){if(e&&n._$isFunction(t))this.__events[e.toLowerCase()]=t};r._$batEvent=function(){var e=function(e,t){this._$setEvent(t,e)};return function(t){n._$loop(t,e,this)}}();r._$clearEvent=function(){var e=function(e,t){this._$clearEvent(t)};return function(t){var t=(t||"").toLowerCase();if(t)delete this.__events[t];else n._$loop(this.__events,e,this)}}();r._$addEvent=function(e,t){if(e&&n._$isFunction(t)){e=e.toLowerCase();var i=this.__events[e];if(i){if(!n._$isArray(i))this.__events[e]=[i];this.__events[e].push(t)}else this.__events[e]=t}};r._$dispatchEvent=function(e){var e=(e||"").toLowerCase(),t=this.__events[e];if(t){var i=_.slice.call(arguments,1);if(n._$isArray(t))n._$forEach(t,function(e){if(!1)e.apply(this,i);else try{e.apply(this,i)}catch(t){console.error(t.message);console.error(t.stack)}},this);else t.apply(this,i)}};if(!0){a._$$Event=a._$$EventTarget;e.copy(e.P("nej.ut"),a)}return a},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08");I$("342a59fa556a9b26a8bb883d96638ac9",function(e,t,i,n,a,o,s,_,r,c){var d;s._$$CustomEvent=t._$klass();d=s._$$CustomEvent._$extend(o._$$EventTarget);d.__init=function(){this.__cache={};this.__super()};d.__reset=function(e){this.__super(e);this.__element=i._$get(e.element)||window;this.__doEventInit(e.event);this.__doEventAPIEnhance();this._$dispatchEvent("oninit")};d.__destroy=function(){var e=function(e,t,i){if(!a._$isArray(e))a._$safeDelete(this.__element,t);delete i[t]};return function(){this.__super();a._$loop(this.__cache,e,this);delete this.__element}}();d.__isDelegate=function(e,t){e=i._$get(e);return!(e!==this.__element||t&&!this.__cache["on"+t])};d.__doEventInit=function(e){if(!a._$isString(e)){if(a._$isArray(e))a._$forEach(e,this.__doEventInit,this)}else{var t="on"+e;if(!this.__cache[t])this.__cache[t]=this.__doEventDispatch._$bind(this,e);this.__doEventBind(e)}};d.__doEventBind=function(e){var t="on"+e,i=this.__element[t],n=this.__cache[t];if(i!=n){this.__doEventDelete(e);if(i&&i!=r)this.__doEventAdd(e,i);this.__element[t]=n}};d.__doEventAdd=function(e,t,i){var n=this.__cache[e];if(!n){n=[];this.__cache[e]=n}if(a._$isFunction(t))!i?n.push(t):n.unshift(t)};d.__doEventDelete=function(e,t){var i=this.__cache[e];if(i&&i.length)if(t)a._$reverseEach(i,function(e,i,n){if(t===e){n.splice(i,1);return!0}});else delete this.__cache[e]};d.__doEventDispatch=function(e,t){t=t||{noargs:!0};if(t==_)t={};t.type=e;this._$dispatchEvent("ondispatch",t);if(!t.stopped)a._$forEach(this.__cache[e],function(e){if(!1)e(t);else try{e(t)}catch(i){console.error(i.message);console.error(i.stack)}})};d.__doEventAPIEnhance=function(){var t=function(e){var t=e.args,i=t[1].toLowerCase();if(this.__isDelegate(t[0],i)){e.stopped=!0;this.__doEventBind(i);this.__doEventAdd(i,t[2],t[3]);this._$dispatchEvent("oneventadd",{
type:i,listener:t[2]})}};var i=function(e){var t=e.args,i=t[1].toLowerCase();if(this.__isDelegate(t[0],i)){e.stopped=!0;this.__doEventDelete(i,t[2])}};var o=function(e){var t=e.args,i=(t[1]||"").toLowerCase();if(this.__isDelegate(t[0])){if(i){this.__doEventDelete(i);return}a._$loop(this.__cache,function(e,t){if(a._$isArray(e))this.__doEventDelete(t)},this)}};var s=function(e){var t=e.args,i=t[1].toLowerCase();if(this.__isDelegate(t[0],i)){e.stopped=!0;t[0]["on"+i].apply(t[0],t.slice(2))}};return function(){if(!this.__enhanced){this.__enhanced=!0;n._$addEvent=n._$addEvent._$aop(t._$bind(this));n._$delEvent=n._$delEvent._$aop(i._$bind(this));n._$clearEvent=n._$clearEvent._$aop(o._$bind(this));n._$dispatchEvent=n._$dispatchEvent._$aop(s._$bind(this));if(!0)e.copy(e.P("nej.v"),n)}}}();if(!0)e.copy(e.P("nej.ut"),s);return s},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08","1bb4e44caf394e00cfac15a4e96405c3");I$("a2398cd86051d25a9055a16c8def93ce",function(e,t,i,n,a,o,s,_,r,c){var d,l=6e4;s._$$LoaderAbstract=t._$klass();d=s._$$LoaderAbstract._$extend(o._$$EventTarget);d.__init=function(){this.__super();this.__qopt={onerror:this.__onQueueError._$bind(this),onload:this.__onQueueLoaded._$bind(this)};if(!this.constructor.__cache)this.constructor.__cache={loaded:{}}};d.__reset=function(e){this.__super(e);this.__version=e.version;this.__timeout=e.timeout;this.__qopt.version=this.__version;this.__qopt.timeout=this.__timeout};d.__delLoadData=function(e){delete this.constructor.__cache[e]};d.__getLoadData=function(e){return this.constructor.__cache[e]};d.__setLoadData=function(e,t){this.constructor.__cache[e]=t};d.__getRequest=r;d.__doClearRequest=function(e){n._$clearEvent(e)};d.__doRequest=function(e){e.src=this.__url;document.head.appendChild(e)};d.__doClear=function(){var e=this.__getLoadData(this.__url);if(e){window.clearTimeout(e.timer);this.__doClearRequest(e.request);delete e.bind;delete e.timer;delete e.request;this.__delLoadData(this.__url);this.__getLoadData("loaded")[this.__url]=!0}};d.__doCallback=function(e){var t=this.__getLoadData(this.__url);if(t){var i=t.bind;this.__doClear();if(i&&i.length>0){var n;for(;i.length;){n=i.shift();try{n._$dispatchEvent(e,arguments[1])}catch(a){if(!1)throw a;console.error(a.message);console.error(a.stack)}n._$recycle()}}}};d.__onError=function(e){this.__doCallback("onerror",e)};d.__onLoaded=function(){this.__doCallback("onload")};d.__doLoadQueue=function(e){this.constructor._$allocate(this.__qopt)._$load(e)};d.__onQueueCheck=function(e){var t=this.__getLoadData(this.__key);if(t){if(e)t.error++;t.loaded++;if(!(t.loaded<t.total)){this.__delLoadData(this.__key);this._$dispatchEvent(t.error>0?"onerror":"onload")}}};d.__onQueueError=function(e){this.__onQueueCheck(!0)};d.__onQueueLoaded=function(){this.__onQueueCheck()};d._$load=function(e){e=a._$absolute(e);if(e){this.__url=e;if(this.__version)this.__url+=(this.__url.indexOf("?")<0?"?":"&")+this.__version;if(!this.__getLoadData("loaded")[this.__url]){var t=this.__getLoadData(this.__url),o;if(t){t.bind.unshift(this);t.timer=window.clearTimeout(t.timer)}else{o=this.__getRequest();t={request:o,bind:[this]};this.__setLoadData(this.__url,t);n._$addEvent(o,"load",this.__onLoaded._$bind(this));n._$addEvent(o,"error",this.__onError._$bind(this,{code:i._$CODE_ERRSERV,message:"无法加载指定资源文件["+this.__url+"]！"}))}if(0!=this.__timeout)t.timer=window.setTimeout(this.__onError._$bind(this,{code:i._$CODE_TIMEOUT,message:"指定资源文件["+this.__url+"]载入超时！"}),this.__timeout||l);if(o)this.__doRequest(o);this._$dispatchEvent("onloading")}else{try{this._$dispatchEvent("onload")}catch(s){if(!1)throw s;console.error(s.message);console.error(s.stack)}this._$recycle()}}else this._$dispatchEvent("onerror",{code:i._$CODE_NOTASGN,message:"请指定要载入的资源地址！"})};d._$queue=function(e){if(e&&e.length){this.__key=a._$uniqueID();var t={error:0,loaded:0,total:e.length};this.__setLoadData(this.__key,t);a._$forEach(e,function(e,i){if(e)this.__doLoadQueue(e);else t.total--},this);this._$dispatchEvent("onloading")}else this._$dispatchEvent("onerror",{code:i._$CODE_NOTASGN,message:"请指定要载入的资源队列！"})};return s},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","390efe7fffa9e37ec235fc1a8b9dd5b7","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08","1bb4e44caf394e00cfac15a4e96405c3");I$("806a8a7cfd11b6141fd1e6b03e9baf59",function(e,t,i,n,a,o){i._$cookie=function(){var e=new Date,i=+e,a=864e5;var o=function(e){var t=document.cookie,i="\\b"+e+"=",n=t.search(i);if(n<0)return"";n+=i.length-2;var a=t.indexOf(";",n);if(a<0)a=t.length;return t.substring(n,a)||""};return function(s,_){if(void 0===_)return o(s);if(t._$isString(_)){if(_){document.cookie=s+"="+_+";";return _}_={expires:-100}}_=_||n;var r=s+"="+(_.value||"")+";";delete _.value;if(void 0!==_.expires){e.setTime(i+_.expires*a);_.expires=e.toGMTString()}r+=t._$object2string(_,";");document.cookie=r}}();if(!0)e.copy(e.P("nej.j"),i);return i},"cb16f42daf02e8bc03f90d7a179f5573","780a96dd705b8404d9982fdccc656c08");!function(){var e=!0,t=null;!function(i){function n(i){if("bug-string-char-index"==i)return"a"!="a"[0];var n,o="json"==i;if(o||"json-stringify"==i||"json-parse"==i){if("json-stringify"==i||o){var s=c.stringify,r="function"==typeof s&&d;if(r){(n=function(){return 1}).toJSON=n;try{r="0"===s(0)&&"0"===s(new Number)&&'""'==s(new String)&&s(a)===_&&s(_)===_&&s()===_&&"1"===s(n)&&"[1]"==s([n])&&"[null]"==s([_])&&"null"==s(t)&&"[null,null,null]"==s([_,a,t])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==s({a:[n,e,!1,t,"\0\b\n\f\r\t"]})&&"1"===s(t,n)&&"[\n 1,\n 2\n]"==s([1,2],t,1)&&'"-271821-04-20T00:00:00.000Z"'==s(new Date((-864e13)))&&'"+275760-09-13T00:00:00.000Z"'==s(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==s(new Date((-621987552e5)))&&'"1969-12-31T23:59:59.999Z"'==s(new Date((-1)))}catch(l){r=!1}}if(!o)return r}if("json-parse"==i||o){i=c.parse;if("function"==typeof i)try{if(0===i("0")&&!i(!1)){n=i('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var f=5==n.a.length&&1===n.a[0];if(f){try{f=!i('"\t"')}catch(u){}if(f)try{f=1!==i("01")}catch(h){}}}}catch(m){f=!1}if(!o)return f}return r&&f}}var a={}.toString,o,s,_,r="function"==typeof define&&define.amd,c="object"==typeof exports&&exports;c||r?"object"==typeof JSON&&JSON?c?(c.stringify=JSON.stringify,c.parse=JSON.parse):c=JSON:r&&(c=i.JSON={}):c=i.JSON||(i.JSON={});var d=new Date((-0xc782b5b800cec));try{d=-109252==d.getUTCFullYear()&&0===d.getUTCMonth()&&1===d.getUTCDate()&&10==d.getUTCHours()&&37==d.getUTCMinutes()&&6==d.getUTCSeconds()&&708==d.getUTCMilliseconds()}catch(l){}if(!n("json")){var f=n("bug-string-char-index");if(!d)var u=Math.floor,h=[0,31,59,90,120,151,181,212,243,273,304,334],m=function(e,t){return h[t]+365*(e-1970)+u((e-1969+(t=+(t>1)))/4)-u((e-1901+t)/100)+u((e-1601+t)/400)};if(!(o={}.hasOwnProperty))o=function(e){var i={},n;if((i.__proto__=t,i.__proto__={toString:1},i).toString!=a)o=function(e){var i=this.__proto__,e=e in(this.__proto__=t,this);this.__proto__=i;return e};else{n=i.constructor;o=function(e){var t=(this.constructor||n).prototype;return e in this&&!(e in t&&this[e]===t[e])}}i=t;return o.call(this,e)};var p={"boolean":1,number:1,string:1,undefined:1};s=function(e,i){var n=0,s,_,r;(s=function(){this.valueOf=0}).prototype.valueOf=0;_=new s;for(r in _)o.call(_,r)&&n++;s=_=t;if(n)n=2==n?function(e,t){var i={},n="[object Function]"==a.call(e),s;for(s in e)!(n&&"prototype"==s)&&!o.call(i,s)&&(i[s]=1)&&o.call(e,s)&&t(s)}:function(e,t){var i="[object Function]"==a.call(e),n,s;for(n in e)!(i&&"prototype"==n)&&o.call(e,n)&&!(s="constructor"===n)&&t(n);(s||o.call(e,n="constructor"))&&t(n)};else{_=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];n=function(e,t){var i="[object Function]"==a.call(e),n,s;if(s=!i)if(s="function"!=typeof e.constructor){s=typeof e.hasOwnProperty;s="object"==s?!!e.hasOwnProperty:!p[s]}s=s?e.hasOwnProperty:o;for(n in e)!(i&&"prototype"==n)&&s.call(e,n)&&t(n);for(i=_.length;n=_[--i];s.call(e,n)&&t(n));}}n(e,i)};if(!n("json-stringify")){var g={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},b=function(e,t){return("000000"+(t||0)).slice(-e)},$=function(e){var t='"',i=0,n=e.length,a=n>10&&f,o;for(a&&(o=e.split(""));i<n;i++){var s=e.charCodeAt(i);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=g[s];break;default:if(s<32){t+="\\u00"+b(2,s.toString(16));break}t+=a?o[i]:f?e.charAt(i):e[i]}}return t+'"'},v=function(i,n,r,c,d,l,f){var h=n[i],p,g,y,C,x,S,I,w,E;try{h=n[i]}catch(j){}if("object"==typeof h&&h){p=a.call(h);if("[object Date]"==p&&!o.call(h,"toJSON"))if(h>-1/0&&h<1/0){if(m){y=u(h/864e5);for(p=u(y/365.2425)+1970-1;m(p+1,0)<=y;p++);for(g=u((y-m(p,0))/30.42);m(p,g+1)<=y;g++);y=1+y-m(p,g);C=(h%864e5+864e5)%864e5;x=u(C/36e5)%24;S=u(C/6e4)%60;I=u(C/1e3)%60;C%=1e3}else{p=h.getUTCFullYear();g=h.getUTCMonth();y=h.getUTCDate();x=h.getUTCHours();S=h.getUTCMinutes();I=h.getUTCSeconds();C=h.getUTCMilliseconds()}h=(p<=0||p>=1e4?(p<0?"-":"+")+b(6,p<0?-p:p):b(4,p))+"-"+b(2,g+1)+"-"+b(2,y)+"T"+b(2,x)+":"+b(2,S)+":"+b(2,I)+"."+b(3,C)+"Z"}else h=t;else if("function"==typeof h.toJSON&&("[object Number]"!=p&&"[object String]"!=p&&"[object Array]"!=p||o.call(h,"toJSON")))h=h.toJSON(i)}r&&(h=r.call(n,i,h));if(h===t)return"null";p=a.call(h);if("[object Boolean]"==p)return""+h;if("[object Number]"==p)return h>-1/0&&h<1/0?""+h:"null";if("[object String]"==p)return $(""+h);if("object"==typeof h){for(i=f.length;i--;)if(f[i]===h)throw TypeError();f.push(h);w=[];n=l;l+=d;if("[object Array]"==p){g=0;for(i=h.length;g<i;E||(E=e),g++){p=v(g,h,r,c,d,l,f);w.push(p===_?"null":p)}i=E?d?"[\n"+l+w.join(",\n"+l)+"\n"+n+"]":"["+w.join(",")+"]":"[]"}else{s(c||h,function(t){var i=v(t,h,r,c,d,l,f);i!==_&&w.push($(t)+":"+(d?" ":"")+i);E||(E=e)});i=E?d?"{\n"+l+w.join(",\n"+l)+"\n"+n+"}":"{"+w.join(",")+"}":"{}"}f.pop();
return i}};c.stringify=function(e,t,i){var n,o,s;if("function"==typeof t||"object"==typeof t&&t)if("[object Function]"==a.call(t))o=t;else if("[object Array]"==a.call(t)){s={};for(var _=0,r=t.length,c;_<r;c=t[_++],("[object String]"==a.call(c)||"[object Number]"==a.call(c))&&(s[c]=1));}if(i)if("[object Number]"==a.call(i)){if((i-=i%1)>0){n="";for(i>10&&(i=10);n.length<i;n+=" ");}}else"[object String]"==a.call(i)&&(n=i.length<=10?i:i.slice(0,10));return v("",(c={},c[""]=e,c),o,s,n,"",[])}}if(!n("json-parse")){var y=String.fromCharCode,C={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},x,S,I=function(){x=S=t;throw SyntaxError()},w=function(){for(var i=S,n=i.length,a,o,s,_,r;x<n;){r=i.charCodeAt(x);switch(r){case 9:case 10:case 13:case 32:x++;break;case 123:case 125:case 91:case 93:case 58:case 44:a=f?i.charAt(x):i[x];x++;return a;case 34:a="@";for(x++;x<n;){r=i.charCodeAt(x);if(r<32)I();else if(92==r){r=i.charCodeAt(++x);switch(r){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=C[r];x++;break;case 117:o=++x;for(s=x+4;x<s;x++){r=i.charCodeAt(x);r>=48&&r<=57||r>=97&&r<=102||r>=65&&r<=70||I()}a+=y("0x"+i.slice(o,x));break;default:I()}}else{if(34==r)break;r=i.charCodeAt(x);for(o=x;r>=32&&92!=r&&34!=r;)r=i.charCodeAt(++x);a+=i.slice(o,x)}}if(34==i.charCodeAt(x)){x++;return a}I();default:o=x;if(45==r){_=e;r=i.charCodeAt(++x)}if(r>=48&&r<=57){for(48==r&&(r=i.charCodeAt(x+1),r>=48&&r<=57)&&I();x<n&&(r=i.charCodeAt(x),r>=48&&r<=57);x++);if(46==i.charCodeAt(x)){for(s=++x;s<n&&(r=i.charCodeAt(s),r>=48&&r<=57);s++);s==x&&I();x=s}r=i.charCodeAt(x);if(101==r||69==r){r=i.charCodeAt(++x);(43==r||45==r)&&x++;for(s=x;s<n&&(r=i.charCodeAt(s),r>=48&&r<=57);s++);s==x&&I();x=s}return+i.slice(o,x)}_&&I();if("true"==i.slice(x,x+4)){x+=4;return e}if("false"==i.slice(x,x+5)){x+=5;return!1}if("null"==i.slice(x,x+4)){x+=4;return t}I()}}return"$"},E=function(t){var i,n;"$"==t&&I();if("string"==typeof t){if("@"==(f?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(i=[];;n||(n=e)){t=w();if("]"==t)break;if(n)if(","==t){t=w();"]"==t&&I()}else I();","==t&&I();i.push(E(t))}return i}if("{"==t){for(i={};;n||(n=e)){t=w();if("}"==t)break;if(n)if(","==t){t=w();"}"==t&&I()}else I();(","==t||"string"!=typeof t||"@"!=(f?t.charAt(0):t[0])||":"!=w())&&I();i[t.slice(1)]=E(w())}return i}I()}return t},j=function(e,t,i){i=k(e,t,i);i===_?delete e[t]:e[t]=i},k=function(e,t,i){var n=e[t],o;if("object"==typeof n&&n)if("[object Array]"==a.call(n))for(o=n.length;o--;)j(n,o,i);else s(n,function(e){j(n,e,i)});return i.call(e,t,n)};c.parse=function(e,i){var n,o;x=0;S=""+e;n=E(w());"$"!=w()&&I();x=S=t;return i&&"[object Function]"==a.call(i)?k((o={},o[""]=n,o),"",i):n}}}r&&define(function(){return c})}(this);return JSON}();I$("43f0ee547a8b22ea1fa701e8675c3f99",function(_m,_p,_o,_f,_r){if("trident"===_m._$KERNEL.engine&&"2.0"==_m._$KERNEL.release)I$("bbd9c9e762ae970611eddb9c589ba11c",function(){JSON.parse=function(){var _isSafeJSON=function(e){return!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(e.replace(/"(\\.|[^"\\])*"/g,""))};return JSON.parse._$aop(function(_event){var _str=_event.args[0]||"";if(_str.length>=5e5){_event.stopped=!0;_event.value=eval("("+_str+")")}})}()});return JSON},"dcfbb39e75d6de6b8114c072c5b070e0");I$("bcb6a16a4419b7316d40b22a20044a08",function(){return JSON},"43f0ee547a8b22ea1fa701e8675c3f99");I$("f8199fff8729fb16b7bfd1ea3b7846da",function(e,t,i,n,a,o,s,_,r,c,d,l){var f;r._$$ProxyAbstract=e._$klass();f=r._$$ProxyAbstract._$extend(o._$$EventTarget);f.__reset=function(e){this.__super(e);this.__request=t._$fetch({url:"",sync:!1,cookie:!1,type:"text",method:"GET",timeout:6e4},e);var i=n._$get("csrf");if(i.cookie&&i.param){var o=encodeURIComponent(i.param)+"="+encodeURIComponent(s._$cookie(i.cookie)||""),_=this.__request.url.indexOf("?")<0?"?":"&";this.__request.url+=_+o}this.__headers=e.headers||{};var r=this.__headers[a._$HEAD_CT];if(null==r)this.__headers[a._$HEAD_CT]=a._$HEAD_CT_FORM};f.__destroy=function(){this.__super();delete this.__rkey;delete this.__request;delete this.__headers};f.__onLoadRequest=function(e){var t=e.status;if(t!=-1)if(0==(""+t).indexOf("2"))this._$dispatchEvent("onload",i._$text2type(e.result,this.__request.type));else this._$dispatchEvent("onerror",{data:t,result:e.result,code:a._$CODE_ERRSERV,message:"服务器返回异常状态["+t+"]!"});else this._$dispatchEvent("onerror",{code:a._$CODE_TIMEOUT,message:"请求["+this.__request.url+"]超时！"})};f.__doSendRequest=d;f.__getResponseHeader=d;f._$send=function(e){var t=this.__request.url;if(t)try{this.__request.data=null==e?null:e;var i={request:this.__request,headers:this.__headers};try{this._$dispatchEvent("onbeforerequest",i)}catch(n){console.error(n.message);console.error(n.stack)}this.__doSendRequest(i)}catch(o){this._$dispatchEvent("onerror",{code:a._$CODE_ERRSERV,message:"请求["+t+"]失败:"+o.message+"！"})}else this._$dispatchEvent("onerror",{code:a._$CODE_NOTASGN,message:"没有输入请求地址！"})};f._$abort=d;f._$header=function(e){if(!t._$isArray(e))return this.__getResponseHeader(e)||"";var i={};t._$forEach(e,function(e){i[e]=this._$header(e)},this);return i};return r},"e84bded65b98b38941ed4f3e7b9e6d19","780a96dd705b8404d9982fdccc656c08","455067b9dcb8d33b1e1808745dbbb96a","04cd16543048e84cdc028e9a9d6bdb9e","390efe7fffa9e37ec235fc1a8b9dd5b7","1bb4e44caf394e00cfac15a4e96405c3","806a8a7cfd11b6141fd1e6b03e9baf59","bcb6a16a4419b7316d40b22a20044a08");I$("12fc61e3951139d9afd07b4a2c0b5d84",function(e,t,i,n){e.__getXMLHttpRequest=function(){return new XMLHttpRequest};return e});I$("89cf8295e96fc4486826ac075e34d559",function(e,t,i,n,a,o,s){if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="2.0")I$("f721bf5166849f55e93c8ae59af77737",function(){t.__getXMLHttpRequest=function(){var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP.4.0","Msxml2.XMLHTTP.5.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];return function(){var t=null;i._$forIn(e,function(e){try{t=new ActiveXObject(e);return!0}catch(i){}});return t}}()});return t},"dcfbb39e75d6de6b8114c072c5b070e0","12fc61e3951139d9afd07b4a2c0b5d84","780a96dd705b8404d9982fdccc656c08");I$("95de3b4bf8d92c0c62980cc755a0f49a",function(e,t,i,n,a,o,s,_,r){var c;o._$$ProxyXHR=i._$klass();c=o._$$ProxyXHR._$extend(e._$$ProxyAbstract);c.__destroy=function(){this.__super();window.clearTimeout(this.__timer);delete this.__timer;try{this.__xhr.onreadystatechange=_;this.__xhr.abort()}catch(e){}delete this.__xhr};c.__doSendRequest=function(){var e=function(e,t){this.__xhr.setRequestHeader(t,e)};var i=function(e){var i=[];t._$reverseEach(e.getElementsByTagName("input"),function(e){if("file"==e.type)if(e.name){if(e.files.length>1){t._$forEach(e.files,function(t){i.push({name:e.name,file:t})});e.parentNode.removeChild(e)}}else e.parentNode.removeChild(e)});return i.length>0?i:null};return function(o){var s=o.request,_=o.headers;this.__xhr=a.__getXMLHttpRequest();if(_[n._$HEAD_CT]===n._$HEAD_CT_FILE){delete _[n._$HEAD_CT];this.__xhr.upload.onprogress=this.__onStateChange._$bind(this,1);if("FORM"===s.data.tagName){var r=i(s.data);s.data=new FormData(s.data);t._$forEach(r,function(e){var i=e.file;s.data.append(e.name||i.name||"file-"+t._$uniqueID(),i)})}}this.__xhr.onreadystatechange=this.__onStateChange._$bind(this,2);if(0!==s.timeout)this.__timer=window.setTimeout(this.__onStateChange._$bind(this,3),s.timeout);this.__xhr.open(s.method,s.url,!s.sync);t._$loop(_,e,this);if(this.__request.cookie&&"withCredentials"in this.__xhr)this.__xhr.withCredentials=!0;if(!(_[n._$HEAD_CT]!==n._$HEAD_CT_FORM||window.FormData&&s.data instanceof window.FormData))s.data=t._$object2string(s.data,"&");this.__xhr.send(s.data)}}();c.__onStateChange=function(e){switch(e){case 1:this._$dispatchEvent("onuploading",arguments[1]);break;case 2:if(4==this.__xhr.readyState)this.__onLoadRequest({status:this.__xhr.status,result:this.__xhr.responseText||""});break;case 3:this.__onLoadRequest({status:-1})}};c.__getResponseHeader=function(e){return!this.__xhr?"":this.__xhr.getResponseHeader(e)};c._$abort=function(){this.__onLoadRequest({status:0})};return o},"f8199fff8729fb16b7bfd1ea3b7846da","780a96dd705b8404d9982fdccc656c08","e84bded65b98b38941ed4f3e7b9e6d19","390efe7fffa9e37ec235fc1a8b9dd5b7","89cf8295e96fc4486826ac075e34d559");I$("004c00cc4518a1c693d6b89d048036e6",function(e,t,i,n,a){var o=this,s=e._$KERNEL.prefix.pro,_=e._$is("desktop")?80:e._$is("ios")?50:30;t.__requestAnimationFrame=function(){var t=e._$is("android")?null:o.requestAnimationFrame||o[s+"RequestAnimationFrame"];return function(){if(!t)t=function(e){return window.setTimeout(function(){try{e(+new Date)}catch(t){}},1e3/_)};return t.apply(this,arguments)}}();t.__cancelAnimationFrame=function(){var t=e._$is("android")?null:o.cancelAnimationFrame||o[s+"CancelAnimationFrame"];return function(){if(!t)t=function(e){window.clearTimeout(e)};return t.apply(this,arguments)}}();return t},"dcfbb39e75d6de6b8114c072c5b070e0");I$("a2ff095c4d650783037fb2b14e5a1f26",function(e,t){return e},"004c00cc4518a1c693d6b89d048036e6","dcfbb39e75d6de6b8114c072c5b070e0");I$("869beca8ceab3a775b034fbbbb8c912c",function(e,t,i,n,a,o){i.requestAnimationFrame=function(){t.__requestAnimationFrame.apply(null,arguments)};i.cancelAnimationFrame=function(){t.__cancelAnimationFrame.apply(null,arguments)};if(!0){if(!this.requestAnimationFrame)this.requestAnimationFrame=i.requestAnimationFrame;if(!this.cancelAnimationFrame)this.cancelAnimationFrame=i.cancelAnimationFrame}return i},"dcfbb39e75d6de6b8114c072c5b070e0","a2ff095c4d650783037fb2b14e5a1f26");I$("d266b366386831ff0e4fb7c396061b9c",function(e,t,i,n,a){t.__canFlashEventBubble=function(e){return"transparent"!=(e||"").toLowerCase()};return t},"dcfbb39e75d6de6b8114c072c5b070e0");I$("8e9e945efc3b482260693cc6df70f69f",function(e,t,i,n,a,o){if("trident"===t._$KERNEL.engine)I$("879cf23c7b73ef6283ff79f7029b2b90",function(){e.__canFlashEventBubble=function(e){return!0}});if("webkit"===t._$KERNEL.engine)I$("811548e5f4701df27d4dc3c2db8f2f35",function(){e.__canFlashEventBubble=function(e){return!0}});return e},"d266b366386831ff0e4fb7c396061b9c","dcfbb39e75d6de6b8114c072c5b070e0");
I$("0ecc30a03f4c3b7ca03145401bac5e11",'{var hide  = defined("hidden")&&!!hidden}\n{var param = defined("params")&&params||NEJ.O}\n{var width = !hide?width:"1px",height = !hide?height:"1px"}\n{if hide}<div style="position:absolute;top:0;left:0;width:1px;height:1px;z-index:10000;overflow:hidden;">{/if}\n<object classid = "clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"\n        codebase = "http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"\n        width = "${width|default:"100px"}"\n        height = "${height|default:"100px"}" id="${id}">\n    <param value="${src}" name="movie">\n    {for x in param}\n    <param value="${x}" name="${x_key}"/>\n    {/for}\n    <embed src="${src}" name="${id}"\n           width="${width|default:"100px"}"\n           height="${height|default:"100px"}"\n           pluginspage="http://www.adobe.com/go/getflashplayer"\n           type="application/x-shockwave-flash"\n           {for x in param}${x_key}="${x}" {/for}></embed>\n</object>\n{if hide}</div>{/if}');I$("42346f5a862580df7dc6152a734f7525",function(e,t,i,n,a,o,s,_,r,c,d,l){var f=a._$add(_);r._$flash=function(){var _={},r,c=/^(?:mouse.*|(?:dbl)?click)$/i;window.onflashevent=function(e){var t=decodeURIComponent(e.target),i=e.type.toLowerCase();var n=_[t+"-tgt"];if(n&&c.test(i))l(n,e);var a=_[t+"-on"+i];if(a){var o="";try{o=a(e)}catch(s){}return o}};var d=function(e){r=document.title;var i=t._$get(e.parent)||document.body,n=a._$get(f,e);i.insertAdjacentHTML(!e.hidden?"beforeEnd":"afterBegin",n)};var l=function(e,t){var n=t.type.toLowerCase();o.requestAnimationFrame(function(){i._$dispatchEvent(e,n)})};var u=function(e){return!!e&&!!e.inited&&!!e.inited()};var h=function(e){var i=[document.embeds[e],t._$get(e),document[e],window[e]],a=n._$forIn(i,u),o=i[a],s=e+"-count";_[s]++;if(!(o||_[s]>100))window.setTimeout(h._$bind(null,e),300);else{if(r){document.title=r;r=null}_[e](o);delete _[e];delete _[s]}};var m=function(e){var i=e.id,a=e.params;if(!a){a={};e.params=a}var o=a.flashvars||"";o+=(!o?"":"&")+("id="+i);if(!e.hidden&&(e.target||s.__canFlashEventBubble(a.wmode))){var r=t._$id(e.target)||t._$id(e.parent);_[i+"-tgt"]=r}a.flashvars=o;n._$loop(e,function(e,t){if(n._$isFunction(e)&&"onready"!=t)_[i+"-"+t]=e})};return function(t){t=e.X({},t);if(t.src){var i="_"+n._$uniqueID();t.id=i;m(t);d(t);if(t.onready){_[i]=t.onready;_[i+"-count"]=0;h(i)}}}}();if(!0)e.copy(e.P("nej.e"),r);return r},"cb16f42daf02e8bc03f90d7a179f5573","455067b9dcb8d33b1e1808745dbbb96a","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08","4b460e06b9deefa9efed504ac2d1a610","869beca8ceab3a775b034fbbbb8c912c","8e9e945efc3b482260693cc6df70f69f","0ecc30a03f4c3b7ca03145401bac5e11");I$("e5c7fe10ae74abc252c0cad725862f47",function(e,t,i,n,a,o,s,_,r){var c,d={},l=n._$uniqueID();this["ld"+l]=function(e,t){var i=d[e];if(i){delete d[e];i.__onLoadRequest({status:200,result:t})}};this["er"+l]=function(e,t){var i=d[e];if(i){delete d[e];i.__onLoadRequest({status:t||0})}};o._$$ProxyFlash=t._$klass();c=o._$$ProxyFlash._$extend(e._$$ProxyAbstract);c.__doSendRequest=function(e){var t=d.flash;if(!n._$isArray(t))if(t){this.__rkey=n._$uniqueID();d[this.__rkey]=this;var o=n._$fetch({url:"",data:null,method:"GET"},e.request);o.key=this.__rkey;o.headers=e.headers;o.onerror="cb.er"+l;o.onloaded="cb.ld"+l;var s=i._$getFlashProxy(o.url);if(s)o.policyURL=s;t.request(o)}else{d.flash=[this.__doSendRequest._$bind(this,e)];a._$flash({hidden:!0,src:i._$get("ajax.swf"),onready:function(e){if(e){var t=d.flash;d.flash=e;n._$reverseEach(t,function(e,t,i){try{e()}catch(n){}})}}})}else t.push(this.__doSendRequest._$bind(this,e))};c._$abort=function(){delete d[this.__rkey];this.__onLoadRequest({status:0})};return o},"f8199fff8729fb16b7bfd1ea3b7846da","e84bded65b98b38941ed4f3e7b9e6d19","04cd16543048e84cdc028e9a9d6bdb9e","780a96dd705b8404d9982fdccc656c08","42346f5a862580df7dc6152a734f7525");I$("8015b35db5767434b7a281e208f925b1",function(e,t,i,n){e.__formatOrigin=function(){var e=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(t){t=t||"";if(e.test(t))return RegExp.$1;else return"*"}}();e.__formatPassData=function(e){return e};e.__postMessage=function(i,n){if(i.postMessage){n=n||t;i.postMessage(e.__formatPassData(n.data),e.__formatOrigin(n.origin))}};return e});I$("bda30959ff06a1b9fd32c1ed842fdc53",function(e,t,i,n,a,o,s,_){if("trident"===e._$KERNEL.engine&&e._$KERNEL.release>="4.0"&&e._$KERNEL.release<="5.0")I$("3588138df432edbecbfa57d220281306",function(){t.__formatPassData=function(e){return JSON.stringify(e)}});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="3.0")I$("059c48033e8a5eb08a0b5671d078c921",function(e){var a="MSG|",s=[];var _=function(){var e=unescape(window.name||"").trim();if(e&&0==e.indexOf(a)){window.name="";var o=i._$string2object(e.replace(a,""),"|"),s=(o.origin||"").toLowerCase();if(!s||"*"==s||0==location.href.toLowerCase().indexOf(s))n._$dispatchEvent(window,"message",{data:JSON.parse(o.data||"null"),source:window.frames[o.self]||o.self,origin:t.__formatOrigin(o.ref||document.referrer)})}};var r=function(){var e;var t=function(t,n,a){if(i._$indexOf(e,t.w)<0){e.push(t.w);a.splice(n,1);t.w.name=t.d}};return function(){e=[];i._$reverseEach(s,t);e=null}}();t.__postMessage=function(){var e=function(e){var t={};e=e||o;t.origin=e.origin||"";t.ref=location.href;t.self=e.source;t.data=JSON.stringify(e.data);return a+i._$object2string(t,"|",!0)};return function(t,i){s.unshift({w:t,d:escape(e(i))})}}();e._$$CustomEvent._$allocate({element:window,event:"message"});setInterval(r,100);setInterval(_,20)},"342a59fa556a9b26a8bb883d96638ac9","bcb6a16a4419b7316d40b22a20044a08");return t},"dcfbb39e75d6de6b8114c072c5b070e0","8015b35db5767434b7a281e208f925b1","780a96dd705b8404d9982fdccc656c08","4cd67180df9ce322f7a6a6207080bbc9");I$("ee14b8d9c6050a325680181233722c8f",function(e,t,i,n,a,o,s,_){a._$postMessage=function(){var e=window.name||"_parent",a={_top:window.top,_self:window,_parent:window.parent};return function(s,_){if(t._$isString(s)){s=a[s]||window.frames[s]||(i._$get(s)||o).contentWindow;if(!s)return}var r=t._$fetch({data:null,origin:"*",source:e},_);n.__postMessage(s,r)}}();if(!0)e.copy(e.P("nej.j"),a);return a},"cb16f42daf02e8bc03f90d7a179f5573","780a96dd705b8404d9982fdccc656c08","455067b9dcb8d33b1e1808745dbbb96a","bda30959ff06a1b9fd32c1ed842fdc53");I$("a95db2a796f7f12298830d13e31f533d",function(e,t,i,n,a,o,s,_,r,c,d){var l,f={};_._$$ProxyFrame=i._$klass();l=_._$$ProxyFrame._$extend(e._$$ProxyAbstract);l.__init=function(){var e="NEJ-AJAX-DATA:",t=!1;var i=function(t){var i=t.data;if(0==i.indexOf(e)){i=JSON.parse(i.replace(e,""));var n=f[i.key];if(n){delete f[i.key];i.result=decodeURIComponent(i.result||"");n.__onLoadRequest(i)}}};var a=function(){if(!t){t=!0;n._$addEvent(window,"message",i)}};return function(){this.__super();a()}}();l.__doSendRequest=function(e){var i=e.request,_=a._$getFrameProxy(i.url),r=f[_];if(!t._$isArray(r))if(r){this.__rkey=t._$uniqueID();f[this.__rkey]=this;var c=t._$fetch({url:"",data:null,timeout:0,method:"GET"},i);c.key=this.__rkey;c.headers=e.headers;s._$postMessage(f[_],{data:c})}else{f[_]=[this.__doSendRequest._$bind(this,e)];o._$createXFrame({src:_,visible:!1,onload:function(e){var i=f[_];f[_]=n._$getElement(e).contentWindow;t._$reverseEach(i,function(e){try{e()}catch(t){}})}})}else r.push(this.__doSendRequest._$bind(this,e))};l._$abort=function(){delete f[this.__rkey];this.__onLoadRequest({status:0})};return _},"f8199fff8729fb16b7bfd1ea3b7846da","780a96dd705b8404d9982fdccc656c08","e84bded65b98b38941ed4f3e7b9e6d19","4cd67180df9ce322f7a6a6207080bbc9","04cd16543048e84cdc028e9a9d6bdb9e","455067b9dcb8d33b1e1808745dbbb96a","ee14b8d9c6050a325680181233722c8f");I$("dd2b0ea96005eebfea7785f8a51883c2",function(e,t,i,n,a,o,s,_,r,c,d,l){var f,u={},h="NEJ-UPLOAD-RESULT:";r._$$ProxyUpload=t._$klass();f=r._$$ProxyUpload._$extend(e._$$ProxyAbstract);f.__init=function(){var e=!1;var t=function(e){var t=e.data;if(0==t.indexOf(h)){t=JSON.parse(t.replace(h,""));var i=u[t.key];if(i){delete u[t.key];i.__onLoadRequest(decodeURIComponent(t.result))}}};var i=function(){if(!e){e=!0;n._$addEvent(window,"message",t)}};return function(){this.__super();i()}}();f.__destroy=function(){this.__super();a._$remove(this.__frame);delete this.__frame;window.clearTimeout(this.__timer);delete this.__timer};f.__onLoadRequest=function(e){try{var t=a._$text2type(e,this.__request.type);this._$dispatchEvent("onload",t)}catch(i){this._$dispatchEvent("onerror",{code:o._$CODE_ERREVAL,message:e})}};f.__doSendRequest=function(){var e=function(){var e,t;try{var e=this.__frame.contentWindow.document.body,t=(e.innerText||e.textContent||"").trim();if(t.indexOf(h)>=0||e.innerHTML.indexOf(h)>=0)return}catch(i){return}this.__onLoadRequest(t)};var t=function(e,i,n){s._$request(e,{type:"json",method:"POST",cookie:n,mode:parseInt(i)||0,onload:function(a){if(this.__timer){this._$dispatchEvent("onuploading",a);this.__timer=window.setTimeout(t._$bind(this,e,i,n),1e3)}}._$bind(this),onerror:function(a){if(this.__timer)this.__timer=window.setTimeout(t._$bind(this,e,i,n),1e3)}._$bind(this)})};return function(s){var _=s.request,r=s.headers,d=_.data,l=i._$uniqueID();u[l]=this;d.target=l;d.method="POST";d.enctype=o._$HEAD_CT_FILE;d.encoding=o._$HEAD_CT_FILE;var f=d.action||"",h=f.indexOf("?")<=0?"?":"&";d.action=f+h+"_proxy_=form";this.__frame=a._$createXFrame({name:l,onload:function(i){var a=n._$getElement(i);n._$addEvent(a,"load",e._$bind(this));d.submit();var o=(d.nej_query||c).value;if(o){var s=(d.nej_mode||c).value,_="true"===(d.nej_cookie||c).value;this.__timer=window.setTimeout(t._$bind(this,o,s,_),100)}}._$bind(this)})}}();f._$abort=function(){this._$dispatchEvent("onerror",{code:o._$CODE_ERRABRT,message:"客户端终止文件上传"})};return r},"f8199fff8729fb16b7bfd1ea3b7846da","e84bded65b98b38941ed4f3e7b9e6d19","780a96dd705b8404d9982fdccc656c08","4cd67180df9ce322f7a6a6207080bbc9","455067b9dcb8d33b1e1808745dbbb96a","390efe7fffa9e37ec235fc1a8b9dd5b7","8583e3004310ef86c1cedbd4391e971c","ee14b8d9c6050a325680181233722c8f");
I$("b422446bf580eb6860a532f6f4d0b191",function(e,t,i,n,a,o,s,_){a.__getProxyByMode=function(a,o,s){var _=o?{2:n._$$ProxyUpload}:{2:i._$$ProxyFrame,3:t._$$ProxyFlash};return(_[a]||e._$$ProxyXHR)._$allocate(s)};return a},"95de3b4bf8d92c0c62980cc755a0f49a","e5c7fe10ae74abc252c0cad725862f47","a95db2a796f7f12298830d13e31f533d","dd2b0ea96005eebfea7785f8a51883c2");I$("d1d0e49e3bc918985ec860bfa715582d",function(e,t,i,n,a,o){if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="5.0")I$("bca3fe5f0b190c0215549be93c7f1997",function(){t.__getProxyByMode=function(){var e={0:2,1:3};return t.__getProxyByMode._$aop(function(t){var i=t.args,n=i[0]||0;i[0]=i[1]?2:e[n]||n})}()});return t},"dcfbb39e75d6de6b8114c072c5b070e0","b422446bf580eb6860a532f6f4d0b191");I$("8583e3004310ef86c1cedbd4391e971c",function(e,t,i,n,a,o,s,_,r,c){var d={},l=r;s._$abort=function(e){var t=d[e];if(t)t.req._$abort()};s._$filter=function(e){l=e||r};s._$request=function(){var e=(location.protocol+"//"+location.host).toLowerCase();var n=function(t){var n=i._$url2origin(t);return!!n&&n!=e};var s=function(e){return(e||_)[t._$HEAD_CT]==t._$HEAD_CT_FILE};var c=function(e){var t=s(e.headers);if(!n(e.url)&&!t)return a._$$ProxyXHR._$allocate(e);else return o.__getProxyByMode(e.mode,t,e)};var f=function(e,t){var i={data:t};var n=e.result.headers;if(n)i.headers=e.req._$header(n);return i};var u=function(e){var t=d[e];if(t){if(t.req)t.req._$recycle();delete d[e]}};var h=function(e,t){var i=d[e];if(i){var n=arguments[2];if("onload"==t&&i.result)n=f(i,n);u(e);var a={type:t,result:n};l(a);if(!a.stopped)(i[t]||r)(a.result)}};var m=function(e,t){h(e,"onload",t)};var p=function(e,t){h(e,"onerror",t)};var g=function(e,t){var n=e.indexOf("?")<0?"?":"&",t=t||"";if(i._$isObject(t))t=i._$object2query(t);if(t)e+=n+t;return e};return function(e,t){t=t||{};var n=i._$uniqueID(),a={result:t.result,onload:t.onload||r,onerror:t.onerror||r};d[n]=a;t.onload=m._$bind(null,n);t.onerror=p._$bind(null,n);if(t.query)e=g(e,t.query);var o=t.method||"";if((!o||/get/i.test(o))&&t.data){e=g(e,t.data);t.data=null}t.url=e;a.req=c(t);a.req._$send(t.data);return n}}();s._$upload=function(e,a){e=n._$get(e);if(!e)return"";var o=i._$fetch({mode:0,type:"json",query:null,cookie:!1,headers:{},onload:null,onerror:null,onuploading:null,onbeforerequest:null},a);o.data=e;o.method="POST";o.timeout=0;o.headers[t._$HEAD_CT]=t._$HEAD_CT_FILE;return s._$request(e.action,o)};if(!0)e.copy(e.P("nej.j"),s);return s},"cb16f42daf02e8bc03f90d7a179f5573","390efe7fffa9e37ec235fc1a8b9dd5b7","780a96dd705b8404d9982fdccc656c08","455067b9dcb8d33b1e1808745dbbb96a","95de3b4bf8d92c0c62980cc755a0f49a","d1d0e49e3bc918985ec860bfa715582d");I$("90be946f0604273dd17fee01de3d961d",function(e,t,i,n,a,o,s,_){var r;a._$$LoaderText=t._$klass();r=a._$$LoaderText._$extend(e._$$LoaderAbstract);r.__getRequest=function(){return null};r.__doRequest=function(){n._$request(this.__url,{method:"GET",type:"text",onload:this.__onLoaded._$bind(this),onerror:this.__onError._$bind(this)})};r.__onLoaded=function(e){this.__doCallback("onload",{url:this.__url,content:e})};return a},"a2398cd86051d25a9055a16c8def93ce","e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","8583e3004310ef86c1cedbd4391e971c");I$("b0e96b1fcd02d193ddfef739cb466238",function(e,t,i,n,a){t.__removeIFrameKeepHistory=function(t){e._$remove(t)};return t},"455067b9dcb8d33b1e1808745dbbb96a");I$("52486b8f4ff83e933ac9c1251c94e925",function(e,t,i,n,a,o,s){if("trident"===i._$KERNEL.engine&&i._$KERNEL.release<="2.0")I$("03d8d035a9a41af2fb53dc9c5d7286fe",function(){e.__removeIFrameKeepHistory=function(e){t._$setStyle(e,"display","none");try{e.contentWindow.document.body.innerHTML="&nbsp;"}catch(i){}}});return e},"b0e96b1fcd02d193ddfef739cb466238","455067b9dcb8d33b1e1808745dbbb96a","dcfbb39e75d6de6b8114c072c5b070e0");I$("015c731c22cc35b5cbeb244caa5fd3fb",function(e,t,i,n,a,o,s,_){var r;a._$$LoaderHtml=t._$klass();r=a._$$LoaderHtml._$extend(e._$$LoaderAbstract);r.__getRequest=function(){var e=i._$create("iframe");e.width=0;e.height=0;e.style.display="none";return e};r.__doRequest=function(e){try{document.body.appendChild(e);e.src=this.__url}catch(t){console.log(e);console.error(t)}};r.__onError=function(e){var t=(this.__getLoadData(this.__url)||o).request;this.__doCallback("onerror",e);n.__removeIFrameKeepHistory(t)};r.__onLoaded=function(){var e=null,t=(this.__getLoadData(this.__url)||o).request;try{if(t.src!=this.__url)return;e=t.contentWindow.document.body}catch(i){}this.__doCallback("onload",e);n.__removeIFrameKeepHistory(t)};return a},"a2398cd86051d25a9055a16c8def93ce","e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","52486b8f4ff83e933ac9c1251c94e925");I$("9111d86b60b850ccf32d4a1980adfeeb",function(e,t,i,n,a,o,s){var _;n._$$LoaderStyle=t._$klass();_=n._$$LoaderStyle._$extend(e._$$LoaderAbstract);_.__getRequest=function(){return i._$create("link")};_.__doRequest=function(e){e.href=this.__url;document.head.appendChild(e)};return n},"a2398cd86051d25a9055a16c8def93ce","e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a");I$("7b05fac337ba5c453f08c9f13de64bbf",function(e,t,i,n,a,o,s){var _;n._$$LoaderScript=t._$klass();_=n._$$LoaderScript._$extend(e._$$LoaderAbstract);_.__reset=function(e){this.__super(e);this.__async=e.async;this.__charset=e.charset;this.__qopt.async=!1;this.__qopt.charset=this.__charset};_.__getRequest=function(){var e=i._$create("script");if(null!=this.__async)e.async=!!this.__async;if(null!=this.__charset)e.charset=this.__charset;return e};_.__doClearRequest=function(e){i._$remove(e)};return n},"a2398cd86051d25a9055a16c8def93ce","e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a");I$("5833e6d86b32320cdb1e1204f9a934b4",function(e,t,i,n,a,o,s,_,r){o._$loadScript=function(e,t){a._$$LoaderScript._$allocate(t)._$load(e)};o._$queueScript=function(e,t){a._$$LoaderScript._$allocate(t)._$queue(e)};o._$loadStyle=function(e,t){n._$$LoaderStyle._$allocate(t)._$load(e)};o._$queueStyle=function(e,t){n._$$LoaderStyle._$allocate(t)._$queue(e)};o._$loadHtml=function(e,t){i._$$LoaderHtml._$allocate(t)._$load(e)};o._$loadText=function(e,i){t._$$LoaderText._$allocate(i)._$load(e)};if(!0)e.copy(e.P("nej.j"),o);return o},"cb16f42daf02e8bc03f90d7a179f5573","90be946f0604273dd17fee01de3d961d","015c731c22cc35b5cbeb244caa5fd3fb","9111d86b60b850ccf32d4a1980adfeeb","7b05fac337ba5c453f08c9f13de64bbf");I$("2318238864a492451a5aba5d50acbc2d",function(e,t,i,n,a,o,s,_,r,c,d,l,f,u){var h={},m="ntp-"+ +new Date+"-";d.tpl=function(){return h};d._$parseTemplate=function(){var e=0;var c=function(){if(!(e>0)){e=0;i._$dispatchEvent(document,"templateready");i._$clearEvent(document,"templateready")}};var f=function(e,i){var a=n._$dataset(e,"src");if(a){i=i||l;var o=i.root;if(!o)o=e.ownerDocument.location.href;else o=t._$absolute(o);a=a.split(",");t._$forEach(a,function(e,i,n){n[i]=t._$absolute(e,o)});return a}};var u=function(e){if(a._$is("mac")&&"safari"===a._$KERNEL.browser)return t._$unescape(e.innerHTML);else return e.value||e.innerText||""};var h=function(e,t){if(e){var i=f(e,t);if(i)_._$queueStyle(i,{version:n._$dataset(e,"version")});n._$addStyle(e.value)}};var m=function(t){e--;n._$addScript(t);c()};var p=function(t,i){if(t){var a=f(t,i),o=t.value;if(!a)n._$addScript(o);else{e++;var i={version:n._$dataset(t,"version"),onload:m._$bind(null,o)};window.setTimeout(_._$queueScript._$bind(_,a,i),0)}}};var g=function(t){e--;d._$parseTemplate(t);c()};var b=function(t,i){if(t){var a=f(t,i)[0];if(a){e++;var i={version:n._$dataset(t,"version"),onload:g};window.setTimeout(_._$loadHtml._$bind(_,a,i),0)}}};var $=function(t,i){e--;d._$addTextTemplate(t,i||"");c()};var v=function(t,i){if(t&&t.id){var a=t.id,o=f(t,i)[0];if(o){e++;var s=o+(o.indexOf("?")<0?"?":"&")+(n._$dataset(t,"version")||""),i={type:"text",method:"GET",onload:$._$bind(null,a)};window.setTimeout(r._$request._$bind(r,s,i),0)}}};var y=function(e,t){var i=e.name.toLowerCase();switch(i){case"jst":o._$addTemplate(u(e),e.id);return;case"txt":d._$addTextTemplate(e.id,u(e));return;case"ntp":d._$addNodeTemplate(u(e),e.id);return;case"js":p(e,t);return;case"css":h(e,t);return;case"html":b(e,t);return;case"res":v(e,t);return}};s._$$CustomEvent._$allocate({element:document,event:"templateready",oneventadd:c});return function(e,i){e=n._$get(e);if(e){var a="TEXTAREA"==e.tagName?[e]:t._$object2array(e.getElementsByTagName("textarea"));t._$forEach(a,function(e){y(e,i)});n._$remove(e,!0)}c()}}();d._$addTextTemplate=function(e,t){if(null!=h[e]&&typeof h[e]==typeof t){console.warn("text template overwrited with key "+e);console.debug("old template content: "+h[e].replace(/\n/g," "));console.debug("new template content: "+t.replace(/\n/g," "))}h[e]=t||""};d._$getTextTemplate=function(e){return h[e]||""};d._$addNodeTemplate=function(e,i){i=i||t._$uniqueID();e=n._$get(e)||e;d._$addTextTemplate(m+i,e);if(!t._$isString(e))n._$removeByEC(e);return i};d._$getNodeTemplate=function(e){if(!e)return null;e=m+e;var i=d._$getTextTemplate(e);if(!i)return null;var a;if(t._$isString(i)){i=n._$html2node(i);var o=i.getElementsByTagName("textarea");if(!("TEXTAREA"==i.tagName||o&&o.length))d._$addTextTemplate(e,i);else a=i}if(!a)a=i.cloneNode(!0);n._$removeByEC(a);return a};d._$getItemTemplate=function(){var e=function(e,t){return"offset"==t||"limit"==t};return function(i,n,a){var o=[];if(!i||!i.length||!n)return o;a=a||l;var s=i.length,_=parseInt(a.offset)||0,r=Math.min(s,_+(parseInt(a.limit)||s)),c={total:i.length,range:[_,r]};t._$merge(c,a,e);for(var d=_,f;d<r;d++){c.index=d;c.data=i[d];f=n._$allocate(c);var u=f._$getId();h[u]=f;f._$recycle=f._$recycle._$aop(function(e,t){delete h[e];delete t._$recycle}._$bind(null,u,f));o.push(f)}return o}}();d._$getItemById=function(e){return h[e]};d._$parseUITemplate=function(){var e=/#<(.+?)>/g;return function(i,a){a=a||{};i=(i||"").replace(e,function(e,i){var n=a[i];if(!n){n="tpl-"+t._$uniqueID();a[i]=n}return n});d._$parseTemplate(n._$html2node(i));return a}}();c._$merge({_$parseTemplate:d._$parseTemplate,
_$addNodeTemplate:d._$addNodeTemplate});if(!0)e.copy(e.P("nej.e"),d);return d},"cb16f42daf02e8bc03f90d7a179f5573","780a96dd705b8404d9982fdccc656c08","4cd67180df9ce322f7a6a6207080bbc9","455067b9dcb8d33b1e1808745dbbb96a","dcfbb39e75d6de6b8114c072c5b070e0","4b460e06b9deefa9efed504ac2d1a610","342a59fa556a9b26a8bb883d96638ac9","5833e6d86b32320cdb1e1204f9a934b4","8583e3004310ef86c1cedbd4391e971c","b01c677ecd401a2fc164bad715b15e74");I$("d4e947987e24f4ce2260131a04872457",function(e,t,i,n,a,o,s,_,r,c){var d;s._$$Abstract=t._$klass();d=s._$$Abstract._$extend(a._$$EventTarget);d.__init=function(){this.__super();i._$dumpCSSText();this.__initXGui();this.__initNode()};d.__reset=function(e){this.__super(e);this.__doInitClass(e.clazz);this.__doInitDataset(e.dataset);this._$appendTo(e.parent)};d.__destroy=function(){this.__super();this.__doDelParentClass();this.__doDelParentDataset();delete this.__parent;i._$removeByEC(this.__body);i._$delClassName(this.__body,this.__class);delete this.__class};d.__initXGui=r;d.__initNode=function(){if(!this.__seed_html)this.__initNodeTemplate();this.__body=o._$getNodeTemplate(this.__seed_html);if(!this.__body)this.__body=i._$create("div",this.__seed_css);i._$addClassName(this.__body,this.__seed_css)};d.__initNodeTemplate=r;d.__doInitClass=function(e){this.__class=e||"";i._$addClassName(this.__body,this.__class)};d.__doInitDataset=function(e){this.__datamap=n._$merge({},e);i._$dataset(this.__body,this.__datamap)};d.__doDelParentDataset=function(){n._$forIn(this.__datamap,function(e,t){i._$dataset(this.__body,t,"")},this)};d.__doAddParentClass=function(){if(this.__seed_css){var e=this.__seed_css.split(/\s+/);i._$addClassName(this.__parent,e.pop()+"-parent")}};d.__doDelParentClass=function(){if(this.__seed_css){var e=this.__seed_css.split(/\s+/);i._$delClassName(this.__parent,e.pop()+"-parent")}};d._$getBody=function(){return this.__body};d._$appendTo=function(e){if(this.__body){this.__doDelParentClass();if(n._$isFunction(e))this.__parent=e(this.__body);else{this.__parent=i._$get(e);if(this.__parent)this.__parent.appendChild(this.__body)}this.__doAddParentClass()}};d._$show=function(){if(this.__parent&&this.__body&&this.__body.parentNode!=this.__parent)this.__parent.appendChild(this.__body)};d._$hide=function(){i._$removeByEC(this.__body)};if(!0)e.copy(e.P("nej.ui"),s);return s},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","1bb4e44caf394e00cfac15a4e96405c3","2318238864a492451a5aba5d50acbc2d");I$("cba5024da86e48904d49a7221b622358",function(e,t,i,n,a,o,s){var _;n._$$Item=t._$klass();_=n._$$Item._$extend(i._$$Abstract);_.__init=function(){this.__id=this.__genId();this.__super()};_.__reset=function(e){this.__super(e);this.__index=e.index;this.__total=e.total;this.__range=e.range;this._$refresh(e.data)};_.__destroy=function(){this.__super();delete this.__data;delete this.__index;delete this.__total;delete this.__range};_.__doRefresh=o;_.__genId=function(){var e=+new Date;return function(){return"itm-"+ ++e}}();_._$getId=function(){return this.__id};_._$getData=function(){return this.__data};_._$refresh=function(e){this.__data=e||{};this.__doRefresh(this.__data)};if(!0)e.copy(e.P("nej.ui"),n);return n},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","d4e947987e24f4ce2260131a04872457");I$("50043314de3ac888066178568259baa6",function(e,t,i,n,a,o,s){var _;n._$$ListItem=t._$klass();_=n._$$ListItem._$extend(i._$$Item);_.__reset=function(e){this.__pkey=e.pkey||"id";this.__prefix=e.prefix||"";this.__super(e)};_.__onDelete=function(e){this._$dispatchEvent("ondelete",{ext:e,id:this._$getId(),data:this._$getData(),body:this._$getBody()})};_.__onUpdate=function(e){this._$dispatchEvent("onupdate",{ext:e,id:this._$getId(),data:this._$getData(),body:this._$getBody()})};_._$refresh=function(e){this.__super(e);var t=this.__data[this.__pkey];this.__id=this.__prefix+t||this.__genId()};if(!0)e.copy(e.P("nej.ui"),n);return n},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","cba5024da86e48904d49a7221b622358");I$("bbc2edc04131dd0476b787f4a30faf81",".#<uispace>{font-size:12px;line-height:160%;}\n.#<uispace> a{margin:0 2px;padding:2px 8px;color:#333;border:1px solid #aaa;text-decoration:none;}\n.#<uispace> .js-disabled{cursor:default;}\n.#<uispace> .js-selected{cursor:default;background-color:#bbb;}");I$("a0c342f7cbeec9608fe3cfb7d5b1fb76",function(e,t,i,n,a,o,s,_,r,c,d){var l;_._$$AbstractPager=t._$klass();l=_._$$AbstractPager._$extend(a._$$Abstract);l.__reset=function(e){this.__bopt=n._$merge({},e);this.__popt=n._$merge({},e);delete this.__bopt.onchange;this.__popt.onchange=this.__onChange._$bind(this);this.__super(e);this.__doResetNumber(e)};l.__destroy=function(){if(this.__page){this.__page._$recycle();delete this.__page}this.__super();delete this.__bopt;delete this.__popt;this._$unbind();this.__body.innerHTML="&nbsp;"};l.__initXGui=function(){var e=i._$pushCSSText(s);return function(){this.__seed_css=e}}();l.__doResetNumber=function(e){var t=e.label||r;if(!e.noprv){this.__popt.pbtn=i._$create("a","zbtn zprv",this.__body);this.__popt.pbtn.innerHTML=t.prev||"上一页"}var n=[];for(var a=1,o=e.number;a<=o;a++)n.push(i._$create("a","zpgi zpg"+a,this.__body));this.__popt.list=n;if(!e.nonxt){this.__popt.nbtn=i._$create("a","zbtn znxt",this.__body);this.__popt.nbtn.innerHTML=t.next||"下一页"}};l.__onChange=function(e){if(!this.__flag){var t=e.index,i=e.total;this.__flag=!0;this._$updatePage(t,i);n._$forEach(this.__binders,function(e){e._$updatePage(t,i)});this.__flag=!1;this._$dispatchEvent("onchange",e)}};l._$bind=function(e){e=i._$get(e);if(e){var t=n._$merge({},this.__bopt);t.parent=e;t.index=this._$getIndex();t.total=this._$getTotal();var a=this.constructor._$allocate(t);a._$setEvent("onchange",this.__popt.onchange);if(!this.__binders)this.__binders=[];this.__binders.push(a)}};l._$unbind=function(){var e=function(e,t,i){e._$recycle();i.splice(t,1)};return function(){n._$reverseEach(this.__binders,e)}}();l._$setIndex=function(e){if(this.__page)this.__page._$setIndex(e)};l._$getIndex=function(){if(!this.__page)return 1;else return this.__page._$getIndex()};l._$getTotal=function(){if(!this.__page)return 1;else return this.__page._$getTotal()};l._$updatePage=function(e,t){if(this.__page)this.__page._$updatePage(e,t)};l._$updateTotal=function(e){if(this.__page)this.__page._$updateTotal(e)};if(!0)e.copy(e.P("nej.ui"),_);return _},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","d4e947987e24f4ce2260131a04872457","4b460e06b9deefa9efed504ac2d1a610","bbc2edc04131dd0476b787f4a30faf81");I$("9ddbbef7ec9fe1a7a267c589977007ff",function(e,t,i,n,a,o,s,_,r,c){var d;s._$$PageAbstract=t._$klass();d=s._$$PageAbstract._$extend(o._$$EventTarget);d.__reset=function(e){this.__super(e);this.__pbtn=e.pbtn;this.__nbtn=e.nbtn;this.__sbtn=e.sbtn;this.__ebtn=e.ebtn;this.__name=e.event||"click";this.__parented=!!e.parented;this.__selected=e.selected||"js-selected";this.__disabled=e.disabled||"js-disabled";this.__doPageListCheck(e.list);this.__limit=e.limit||1/0;this._$updatePage(e.index||1,e.total||1)};d.__destroy=function(){this.__super();delete this.__list;delete this.__name;delete this.__pbtn;delete this.__nbtn;delete this.__sbtn;delete this.__ebtn;delete this.__last;delete this.__total;delete this.__index;delete this.__extdata;delete this.__selected;delete this.__disabled};d.__getSelectNode=function(e){return!this.__parented?e:e.parentNode};d.__doPageListCheck=function(){var e=function(e){this.__list.push(e);this.__doInitDomEvent([[e,this.__name,this.__onClick._$bind2(this,0)]])};return function(t){this.__list=[];this.__doInitDomEvent([[this.__pbtn,"click",this.__onClick._$bind2(this,-1)],[this.__nbtn,"click",this.__onClick._$bind2(this,1)],[this.__sbtn,"click",this.__onClick._$bind2(this,-2)],[this.__ebtn,"click",this.__onClick._$bind2(this,2)]]);i._$forEach(t,e,this)}}();d.__doSetNodeIndex=function(e,t){var i=this.__getSelectNode(e);if(null==t){e.innerText="";n._$setStyle(e,"display","none");n._$delClassName(i,this.__selected)}else{e.innerText=t;n._$setStyle(e,"display","");t==this.__index?n._$addClassName(i,this.__selected):n._$delClassName(i,this.__selected)}};d.__doSyncBtnState=function(){if(this.__index<=1){n._$addClassName(this.__pbtn,this.__disabled);n._$addClassName(this.__sbtn,this.__disabled)}else{n._$delClassName(this.__pbtn,this.__disabled);n._$delClassName(this.__sbtn,this.__disabled)}if(this.__index>=this.__total){n._$addClassName(this.__nbtn,this.__disabled);n._$addClassName(this.__ebtn,this.__disabled)}else{n._$delClassName(this.__nbtn,this.__disabled);n._$delClassName(this.__ebtn,this.__disabled)}};d.__doRefreshPage=r;d.__doChangeIndex=function(){this.__doRefreshPage();this.__doSyncBtnState();this._$dispatchEvent("onchange",{last:this.__last,total:this.__total,index:this.__index,ext:this.__extdata})};d.__doSaveIndex=function(e){e=parseInt(e);if(isNaN(e)||null==this.__total)return!1;e=Math.max(1,Math.min(e,this.__total));this.__last=this.__index;this.__index=e;return!0};d.__doSaveTotal=function(e){e=parseInt(e);if(isNaN(e)||e<1)return!1;this.__total=Math.min(e,this.__limit);return!0};d.__onClick=function(e,t){a._$stopDefault(e);var i=a._$getElement(e),o=n._$hasClassName(this.__getSelectNode(i),this.__selected),s=n._$hasClassName(i,this.__disabled);if(i&&!o&&!s){var _=i.innerText;switch(t){case 1:case-1:_=this.__index+t;break;case 2:_=this.__total;break;case-2:_=1}this._$setIndex(_)}};d._$getIndex=function(){return this.__index};d._$setIndex=function(e){var t=this.__index;this.__doSaveIndex(e);if(t!=this.__index)this.__doChangeIndex()};d._$getTotal=function(){return this.__total};d._$setTotal=function(e){if(this.__doSaveTotal(e)&&null!=this.__index){this.__index=1;this.__doChangeIndex()}};d._$updateTotal=function(e){if(this.__doSaveTotal(e)){this.__doRefreshPage();this.__doSyncBtnState()}};d._$updatePage=function(e,t){
if(this.__doSaveTotal(t)&&this.__doSaveIndex(e))this.__doChangeIndex()};if(!0)e.P("nej.ut")._$$AbstractPage=s._$$PageAbstract;return s},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","780a96dd705b8404d9982fdccc656c08","455067b9dcb8d33b1e1808745dbbb96a","4cd67180df9ce322f7a6a6207080bbc9","1bb4e44caf394e00cfac15a4e96405c3");I$("0822d86485c9e18298bf588f540fabc8",function(e,t,i,n,a,o,s,_,r){var c;o._$$PageFragment=t._$klass();c=o._$$PageFragment._$extend(a._$$PageAbstract);c.__init=function(){this.__ndot=[];this.__super()};c.__destroy=function(){this.__super();this.__doRecycleDotNode()};c.__doRecycleDotNode=function(){var e=function(e,t,n){i._$remove(e);n.splice(t,1)};return function(){n._$reverseEach(this.__ndot,e)}}();c.__doRefreshPage=function(){this.__extdata={last:!1,first:!1,list:this.__list};this.__doRecycleDotNode();this.__doSetNodeIndex(this.__list[0],1);var e=1,t=this.__list.length;if(!(this.__total<t)){if(this.__index>1){var n=Math.floor((t-2)/2),a=this.__total-t+2,o=Math.max(2,this.__index-n);if(this.__total>=t)o=Math.min(o,a);if(o>2){var s=i._$create("span","zdot");this.__ndot.push(s);s.innerText="...";this.__list[0].insertAdjacentElement("afterEnd",s);this.__extdata.first=!0}for(var _;;e++){_=o+e-1;if(_>this.__index)break;this.__doSetNodeIndex(this.__list[e],_)}}if(this.__index<this.__total){var _,o=this.__index+1;for(var r=0,c=t-2;;r++,e++){_=o+r;if(e>c||_>this.__total)break;this.__doSetNodeIndex(this.__list[e],_)}if(_<this.__total){var s=i._$create("span","zdot");this.__ndot.push(s);s.innerText="...";this.__list[e].insertAdjacentElement("beforeBegin",s);this.__extdata.last=!0}if(_<=this.__total)this.__doSetNodeIndex(this.__list[e++],this.__total)}for(;e<t;e++)this.__doSetNodeIndex(this.__list[e])}else for(var d;e<t;e++){d=e+1;this.__doSetNodeIndex(this.__list[e],d>this.__total?null:d)}};if(!0)e.P("nej.ut")._$$Page=o._$$PageFragment;return o},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","9ddbbef7ec9fe1a7a267c589977007ff");I$("351b76160a74729564be6e661a8d91d8",function(e,t,i,n,a,o,s,_,r){var c;o._$$Pager=t._$klass();c=o._$$Pager._$extend(n._$$AbstractPager);c.__reset=function(e){e.number=parseInt(e.number)||9;this.__super(e);this.__page=a._$$PageFragment._$allocate(this.__popt)};c.__onChange=function(e){if(this.__bopt.noend){var t=e.ext||s,n=t.list||r;if(t.last)i._$setStyle(n[n.length-1],"display","none")}this.__super(e)};if(!0)e.copy(e.P("nej.ui"),o);return o},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","a0c342f7cbeec9608fe3cfb7d5b1fb76","0822d86485c9e18298bf588f540fabc8");I$("29716e60f6c34b6546ab5bd48be5b28f",function(e,t,i,n){e.__getItemInStorage=function(e){return localStorage.getItem(e)};e.__setItemToStorage=function(e,t){localStorage.setItem(e,t)};e.__removeItemFromStorage=function(e){localStorage.removeItem(e)};e.__clearStorage=function(){localStorage.clear()};e.__initStorage=function(){(document.onstorageready||i)()};e.__isStorageReady=function(){return!0};return e});I$("507bde58c377f04509197dc05eba2167",function(e,t,i,n,a,o,s){if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="3.0")I$("61122e1d4d99c6fca635d9174f374954",function(e,n){var a;var o=function(){if(!a)n._$flash({hidden:!0,src:e._$get("storage.swf"),params:{AllowScriptAccess:"sameDomain"},onready:function(e){if(!e)console.log("flash for localStorage unavailable");else{a=e;a.initStorage("nej-storage")}t._$dispatchEvent(document,"storageready")}})};i.__getItemInStorage=function(e){if(a)return a.getItem(e)};i.__setItemToStorage=function(e,t){if(a)a.setItem(e,t)};i.__removeItemFromStorage=function(e){if(a)a.removeItem(e)};i.__clearStorage=function(){if(a)a.clear()};i.__initStorage=function(){o()};i.__isStorageReady=function(){return!!a}},"04cd16543048e84cdc028e9a9d6bdb9e","42346f5a862580df7dc6152a734f7525");return i},"dcfbb39e75d6de6b8114c072c5b070e0","4cd67180df9ce322f7a6a6207080bbc9","29716e60f6c34b6546ab5bd48be5b28f");I$("b399de376b2387d6502fedef7d97efa3",function(e,t,i,n,a,o,s,_,r){var c={};o._$setDataInStorage=function(e,t){var i=JSON.stringify(t);try{a.__setItemToStorage(e,i)}catch(n){console.error(n.message);console.error(n)}if(i!=a.__getItemInStorage(e))c[e]=t};o._$getDataInStorage=function(e){var t=JSON.parse(a.__getItemInStorage(e)||"null");return null==t?c[e]:t};o._$getDataInStorageWithDefault=function(e,t){var i=o._$getDataInStorage(e);if(null==i){i=t;o._$setDataInStorage(e,i)}return i};o._$delDataInStorage=function(e){delete c[e];a.__removeItemFromStorage(e)};o._$clearDataInStorage=function(){var e=function(e,t,i){delete i[t]};return function(){t._$loop(c,e);a.__clearStorage()}}();n._$$CustomEvent._$allocate({element:document,event:"storageready",oneventadd:function(){if(a.__isStorageReady())i._$dispatchEvent(document,"storageready")}});var d=function(){var e=function(e,t,i){a.__setItemToStorage(t,JSON.stringify(e));delete i[t]};return function(){t._$loop(c,e)}}();i._$addEvent(document,"storageready",d);a.__initStorage();if(!0)e.copy(e.P("nej.j"),o);return o},"cb16f42daf02e8bc03f90d7a179f5573","780a96dd705b8404d9982fdccc656c08","4cd67180df9ce322f7a6a6207080bbc9","342a59fa556a9b26a8bb883d96638ac9","507bde58c377f04509197dc05eba2167");I$("1ac5189378fe8b0e72e58c27245ecd7e",function(e,t,i,n,a,o,s,_,r){var c,d="dat-"+ +new Date;o._$$CacheAbstract=t._$klass();c=o._$$CacheAbstract._$extend(n._$$EventTarget);c.__init=function(){this.__super();this.__cache=this.constructor[d];if(!this.__cache){this.__cache={};this.__cache[d+"-l"]={};this.constructor[d]=this.__cache}};c.__getDataInCache=function(e){return this.__cache[e]};c.__setDataInCache=function(e,t){this.__cache[e]=t};c.__getDataInCacheWithDefault=function(e,t){var i=this.__getDataInCache(e);if(null==i){i=t;this.__setDataInCache(e,i)}return i};c.__delDataInCache=function(e){if(null==e)i._$loop(this.__cache,function(e,t){if(t!=d+"-l")this.__delDataInCache(t)},this);else delete this.__cache[e]};c.__delDataInStorage=function(e){return a._$delDataInStorage(e)};c.__getDataInStorage=function(e){return a._$getDataInStorage(e)};c.__setDataInStorage=function(e,t){a._$setDataInStorage(e,t)};c.__getDataLocalWithDefault=function(e,t){var i=this.__getDataLocal(e);if(null==i){i=t;this.__setDataLocal(e,i)}return i};c.__getDataLocal=function(e){var t=this.__getDataInCache(e);if(null!=t)return t;t=this.__getDataInStorage(e);if(null!=t)this.__setDataInCache(e,t);return t};c.__setDataLocal=function(e,t){this.__setDataInStorage(e,t);this.__setDataInCache(e,t)};c.__delDataLocal=function(e){if(null==e)i._$loop(this.__cache,function(e,t){if(t!=d+"-l")this.__delDataLocal(t)},this);else{delete this.__cache[e];a._$delDataInStorage(e)}};c._$clearDataLocal=function(){this.__delDataLocal()};c.__doCallbackRequest=function(e){var t=this.__cache[d+"-l"],n=r.slice.call(arguments,1);i._$forEach(t[e],function(e){try{e.apply(this,n)}catch(t){if(!1)throw t;console.error(t.message);console.error(t.stack)}});delete t[e]};c.__doQueueRequest=function(e,t){t=t||_;var i=this.__cache[d+"-l"][e];if(!i){i=[t];this.__cache[d+"-l"][e]=i;return!1}i.push(t);return!0};c.__doClearReqQueue=function(e){delete this.__cache[d+"-l"][e]};c.__hasFragment=function(e,t,i){if(!e)return!1;t=parseInt(t)||0;i=parseInt(i)||0;if(!i){if(!e.loaded)return!1;i=e.length}if(e.loaded)i=Math.min(i,e.length-t);for(var n=0;n<i;n++)if(!e[t+n])return!1;return!0};c._$isFragmentFilled=function(e,t,i){return this.__hasFragment(this._$getListInCache(e),t,i)};if(!0)e.P("nej.ut")._$$Cache=o._$$CacheAbstract;return o},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","780a96dd705b8404d9982fdccc656c08","1bb4e44caf394e00cfac15a4e96405c3","b399de376b2387d6502fedef7d97efa3");I$("f6bee5d24c4db95615edd22836cbf32e",function(e,t,i,n,a,o,s,_){var r;a._$$CacheList=t._$klass();r=a._$$CacheList._$extend(n._$$CacheAbstract);r.__reset=function(e){this.__super(e);this.__key=e.key||"id";this.__data=e.data||o;this.__auto=!!e.autogc;this.__doSwapCache(e.id)};r.__destroy=function(){this.__super();if(this.__timer)this.__doGCAction()};r.__doSwapCache=function(e){var t;if(e){t=this.__cache[e];if(!t){t={};this.__cache[e]=t}}t=t||this.__cache;t.hash=t.hash||{};this.__lspl=t};r.__doGCAction=function(){this.__timer=window.clearTimeout(this.__timer);var e={};i._$loop(this.__lspl,function(t,n){if("hash"!=n)if(i._$isArray(t))i._$forEach(t,function(t){if(t)e[t[this.__key]]=!0},this)},this);i._$loop(this.__getHash(),function(t,i,n){if(!e[i])delete n[i]})};r.__doGCSchedule=function(){if(this.__timer)this.__timer=window.clearTimeout(this.__timer);this.__timer=window.setTimeout(this.__doGCAction._$bind(this),150)};r.__doSaveItemToCache=function(e,t){if(!i._$isArray(e)){e=this.__doFormatItem(e,t)||e;if(!e)return null;var n=e[this.__key];if(null!=n){var a=this.__getHash()[n];if(a)e=i._$merge(a,e);this.__getHash()[n]=e}delete e.__dirty__;return e}var o=[];i._$forEach(e,function(e){o.push(this.__doSaveItemToCache(e,t))},this);return o};r.__doRemoveItemFromList=function(e,t){var n=null,a=this.__key;if(!i._$isArray(t)){var n=null,a=this.__key;t=t[a]||t;var o=this._$getListInCache(e),s=i._$indexOf(o,function(e){return!!e&&e[a]==t});if(s>=0){n=o[s];o.splice(s,1)}return n}var n=[];i._$reverseEach(t,function(t){n.unshift(this.__doRemoveItemFromList(e,t))},this);return n};r.__doFormatItem=s;r.__doUnshiftToList=function(e,t){if(t)if(i._$isArray(t))i._$reverseEach(t,function(t){this.__doUnshiftToList(e,t)});else{var n=this._$getListInCache(e),t=this.__doSaveItemToCache(t,e);if(t)n.unshift(t)}};r._$setTotal=function(e,t){var i=this._$getListInCache(e);i.length=Math.max(i.length,t);this._$setLoaded(e)};r._$getTotal=function(e){return this._$getListInCache(e).length};r._$setLoaded=function(e,t){this._$getListInCache(e).loaded=t!==!1};r._$isLoaded=function(e){return!!this._$getListInCache(e).loaded};r._$setListInCache=function(e,t){this._$clearListInCache(e);this.__getList({key:e,offset:0,limit:t.length+1},{list:t,
total:t.length})};r._$getListInCache=function(){var e=function(e){return(e||"")+(!e?"":"-")+"list"};return function(t){var t=e(t),i=this.__lspl[t];if(!i){i=[];this.__lspl[t]=i}return i}}();r.__getHash=function(){var e=this.__lspl.hash;if(!e){e={};this.__lspl.hash=e}return e};r._$pullRefresh=function(){var e=function(e){return"r-"+e.key};return function(t){var n=i._$merge({},t),a=e(n),o=this._$dispatchEvent._$bind(this);if(!this.__doQueueRequest(a,o)){n.rkey=a;n.onload=this.__pullRefresh._$bind(this,n);this._$dispatchEvent("dopullrefresh",n)}}}();r.__pullRefresh=function(e,t){var i=e.key,n=parseInt(t.total),a=t.list||t.result;this.__doUnshiftToList(i,a||t);if(!isNaN(n)&&a){this._$getListInCache(i).length=n;this._$setLoaded(i)}this.__doCallbackRequest(e.rkey,"onpullrefresh",e)};r._$getList=function(){var e=function(e){return"r-"+e.key+"-"+e.offset+"-"+e.limit};return function(t){t=t||o;var i={key:""+t.key||"",ext:t.ext||null,data:t.data||null,offset:parseInt(t.offset)||0,limit:parseInt(t.limit)||0},n=this._$getListInCache(i.key),a=this.__hasFragment(n,i.offset,i.limit);if(!a){var s=e(i),_=this._$dispatchEvent._$bind(this);if(!this.__doQueueRequest(s,_)){i.rkey=s;i.onload=this.__getList._$bind(this,i);this._$dispatchEvent("doloadlist",i)}}else this._$dispatchEvent("onlistload",i)}}();r.__getList=function(){var e=function(e,t,i){if(e)return!0;i.splice(t,1)};return function(t,n){t=t||o;if(n){var a=t.key,s=t.offset,_=this._$getListInCache(a);var r=n||[];if(!i._$isArray(r)){r=n.result||n.list||[];var c=parseInt(n.total);if(!isNaN(c)||c>r.length)this._$setTotal(a,c)}i._$forEach(r,function(e,t){_[s+t]=this.__doSaveItemToCache(e,a)},this);if(r.length<t.limit){this._$setLoaded(a);i._$reverseEach(_,e)}this.__doCallbackRequest(t.rkey,"onlistload",t)}else this.__doCallbackRequest(t.rkey,"onlistload",t)}}();r._$clearListInCache=function(){var e=function(e,t,i){i.splice(t,1)};return function(t){if(t){var n=this._$getListInCache(t);i._$reverseEach(n,e);this._$setLoaded(t,!1);if(this.__auto)this.__doGCSchedule()}else i._$loop(this.__lspl,function(e,t){if("hash"!=t&&i._$isArray(e)){t=t.substr(0,t.length-5);this._$clearListInCache(t)}},this)}}();r.__doCheckItemValidity=function(e,t){return!e.__dirty__};r._$getItemInCache=function(e){return this.__getHash()[e]};r._$clearItemInCache=function(e){var t=this._$getItemInCache(e);if(t)t.__dirty__=!0};r._$getItem=function(){var e=function(e){return"r-"+e.key+"-"+e.id};return function(t){t=t||o;var i=t[this.__key],n={id:i,ext:t.ext,data:t.data||{},key:""+t.key||""};_item=this._$getItemInCache(i);n.data[this.__key]=i;if(!_item||!this.__doCheckItemValidity(_item,n.key)){var a=e(n),s=this._$dispatchEvent._$bind(this);if(!this.__doQueueRequest(a,s)){n.rkey=a;n.onload=this.__getItem._$bind(this,n);this._$dispatchEvent("doloaditem",n)}}else this._$dispatchEvent("onitemload",n)}}();r.__getItem=function(e,t){e=e||o;this.__doSaveItemToCache(t,e.key);this.__doCallbackRequest(e.rkey,"onitemload",e)};r._$addItem=function(e){e=i._$merge({},e);e.onload=this.__addItem._$bind(this,e);this._$dispatchEvent("doadditem",e)};r.__addItem=function(e,t){var i=e.key;t=this.__doSaveItemToCache(t,i);if(t){var n=0,a=this._$getListInCache(i);if(!e.push){n=-1;var o=e.offset||0;a.splice(o,0,t)}else if(a.loaded){n=1;a.push(t)}else a.length++}var s={key:i,flag:n,data:t,action:"add",ext:e.ext};this._$dispatchEvent("onitemadd",s);return s};r._$deleteItem=function(e){e=i._$merge({},e);e.onload=this.__deleteItem._$bind(this,e);this._$dispatchEvent("dodeleteitem",e)};r.__deleteItem=function(e,t){var i,n=e.key;if(t){var a=e.id;i=this._$getItemInCache(a)||null;this.__doRemoveItemFromList(n,a)}var o={key:n,data:i,action:"delete",ext:e.ext};this._$dispatchEvent("onitemdelete",o);return o};r._$updateItem=function(e){e=i._$merge({},e);e.onload=this.__updateItem._$bind(this,e);this._$dispatchEvent("doupdateitem",e)};r.__updateItem=function(e,t){var i=e.key;if(t)t=this.__doSaveItemToCache(t,i);var n={key:i,data:t,action:"update",ext:e.ext};this._$dispatchEvent("onitemupdate",n);return n};if(!0)e.P("nej.ut")._$$ListCache=a._$$CacheList;return a},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","780a96dd705b8404d9982fdccc656c08","1ac5189378fe8b0e72e58c27245ecd7e");I$("2517578cc53ee8bfb33bcd101fcd7e49",function(e,t,i,n,a,o,s,_,r,c,d,l,f,u,h){var m;l._$$ListModule=t._$klass();m=l._$$ListModule._$extend(_._$$EventTarget);m.__reset=function(e){this.__ropt={};this.__super(e);this.__lbox=a._$get(e.parent);this.__iopt={parent:this.__lbox};this.__limit=parseInt(e.limit)||10;this.__first=parseInt(e.first)||this.__limit;this.__doResetTemplate(e.item);this.__doResetCache(e.cache||f);this.__doResetPager(e.pager||f);this._$refresh()};m.__destroy=function(){this._$dispatchEvent("onbeforerecycle");this.__doClearListBox();this.__super();if(this.__ropt.clear)this.__cache._$clearListInCache(this.__ropt.key);this.__cache._$recycle();if(this.__pager){this.__pager._$recycle();delete this.__pager}delete this.__pkls;delete this.__popt;delete this.__pulling;delete this.__cache;delete this.__lbox;delete this.__ikls;delete this.__iopt;delete this.__iext;delete this.__ropt};m.__getItemBodyId=function(e){return this.__getItemId(e)+r._$seed()};m.__getItemId=function(e){var t=(this.__iopt||f).prefix||"";return t+e};m.__getPageInfo=function(e,t,i,n){var a={index:1,total:1};if(t>=e)a.index=Math.floor((t-e)/i)+2;if(n>e)a.total=Math.ceil((n-e)/i)+1;return a};m.__doResetJSTTemplate=function(e){delete this.__ikls;this.__ikey=e;this.__doInitDomEvent([[this.__lbox,"click",this.__onCheckAction._$bind(this)]])};m.__doResetTemplate=function(e){if(!i._$isString(e)){i._$merge(this.__iopt,e);this.__iext=i._$merge({},e,function(e){return!i._$isFunction(e)});var t=this.__iopt.klass;delete this.__iopt.klass;if(!i._$isString(t)){delete this.__ikey;this.__ikls=t;this.__iopt.ondelete=this._$dispatchEvent._$bind(this,"ondelete");this.__iopt.onupdate=this._$dispatchEvent._$bind(this,"onupdate")}else this.__doResetJSTTemplate(t)}else this.__doResetJSTTemplate(e)};m.__doResetCache=function(e){var t=e.klass,n=i._$merge({},e);this.__ropt.key=n.lkey;this.__ropt.ext=n.ext;this.__ropt.data=n.data||{};this.__ropt.clear=!!n.clear;this.__iopt.pkey=n.key||"id";n.onerror=this._$dispatchEvent._$bind(this,"onerror");n.onlistload=this.__cbListLoad._$bind(this);n.onpullrefresh=this.__cbPullRefresh._$bind(this);if(t&&"onlistchange"in t)this.__doInitDomEvent([[t,"listchange",this.__cbListChange._$bind(this)]]);else{n.onitemadd=this.__cbItemAdd._$bind(this);n.onitemdelete=this.__cbItemDelete._$bind(this);n.onitemupdate=this.__cbItemUpdate._$bind(this)}this.__cache=(t||d._$$CacheList)._$allocate(n);if(null!=e.total)this.__cache._$setTotal(this.__ropt.key,e.total);if(e.list)this.__cache._$setListInCache(this.__ropt.key,e.list)};m.__doResetPager=function(e){this.__pkls=e.klass||s._$$Pager;this.__popt=i._$merge({},e);if(i._$isArray(e.parent)){this.__popt.parent=e.parent[0];this.__pbid=e.parent.slice(1);if(!this.__pbid||!this.__pbid.length)delete this.__pbid}delete this.__popt.klass};m.__doClearListBox=function(){var e=/^(?:table|tr|tbody|ul|ol|select)$/i;return function(){this._$dispatchEvent("onbeforelistclear",{parent:this.__lbox});if(this.__items&&this.__items.length>0){this.__items=this.__ikls._$recycle(this.__items);delete this.__items}if(e.test(this.__lbox.tagName))a._$clearChildren(this.__lbox);else this.__lbox.innerHTML=""}}();m.__doSwitchPagerShow=function(e){if(!this.__popt.fixed){a._$setStyle(this.__popt.parent,"display",e);i._$forEach(this.__pbid,function(t){a._$setStyle(t,"display",e)},this)}};m.__doRefreshByPager=function(){var e=this.__popt.index||1;delete this.__popt.index;if(this.__pager)e=this.__pager._$getIndex();this.__doChangePage({last:e,index:e})};m.__doChangePage=function(e){this._$dispatchEvent("onpagechange",e)};m.__doChangeOffset=function(e){this.__ropt.offset=e;this.__doLoadList()};m.__doGenRequestOpt=function(e){return e};m.__doLoadList=function(){this.__doBeforeListLoad();var e=this.__ropt.data;e.offset=this.__ropt.offset;var t=0==e.offset;e.total=t;this.__ropt.limit=t?this.__first:this.__limit;e.limit=this.__ropt.limit;this.__cache._$getList(this.__doGenRequestOpt(i._$merge({},this.__ropt)))};m.__cbListLoad=function(e){if(e.key==this.__ropt.key&&e.offset==this.__ropt.offset){this.__doBeforeListShow();var t=this.__cache._$getListInCache(e.key);if(!t||!t.length){if(!this._$cache()._$isLoaded(e.key))this._$dispatchEvent("onlistloaderror",{parent:this.__lbox});else this.__doShowEmpty();return!0}var i=e.limit,n=e.offset;if(!this.__cache._$isFragmentFilled(e.key,n,i)){this._$dispatchEvent("onlistloaderror",{parent:this.__lbox});return!0}if(!this.__doBeforeListRender(t,n,i)){this._$dispatchEvent("onbeforelistrender",{list:t,limit:i,offset:n,parent:this.__lbox,total:this.__cache._$getTotal(e.key)});if(this.__ikey){this.__iopt.xlist=t;this.__iopt.beg=n;this.__iopt.end=Math.min(t.length,n+i)-1;this.__iopt.act="list";var a=r._$get(this.__ikey,this.__iopt,this.__iext);this.__doShowListByJST(a)}else{this.__iopt.limit=i;this.__iopt.offset=n;var o=c._$getItemTemplate(t,this.__ikls,this.__iopt);this.__doShowListByItem(o)}this._$dispatchEvent("onafterlistrender",{list:t,limit:i,offset:n,parent:this.__lbox,total:this.__cache._$getTotal(e.key)})}}};m.__cbPullRefresh=function(e){if(this.__pulling){delete this.__pulling;this.__doBeforeListShow("onafterpullrefresh");this._$refresh()}};m.__doSyncPager=function(e,t){if(this.__pager){if((this.__popt||f).limit>0)t=Math.min(t,this.__popt.limit);var n=this.__pager._$getIndex(),a=this.__pager._$getTotal();if(n>t||t!=a){this.__pager._$recycle();delete this.__pager;this.__doChangePage({last:n,index:Math.min(e,t)});return!0}}else{this.__popt.index=e;this.__popt.total=t;this.__pager=this.__pkls._$allocate(this.__popt);this.__pager._$setEvent("onchange",this.__doChangePage._$bind(this));i._$forEach(this.__pbid,function(e){this.__pager._$bind(e)},this)}};m.__doFormatData=function(){var e=+new Date;return function(t){var i=t[this.__iopt.pkey];if(!i){
t["dirty-data"]=!0;t[this.__iopt.pkey]="dirty-"+e++}return t}}();m.__doSplitDirty=function(e){var t=e[this.__iopt.pkey];if(e["dirty-data"]){delete e["dirty-data"];delete e[this.__iopt.pkey]}return t};m.__doInsertOneItem=function(){var e=function(e,t){this.__lbox.insertAdjacentElement(e,t)};return function(t,n){var a=[n];if(this.__ikey){var a=this.__cache._$getListInCache(this.__ropt.key),o=i._$indexOf(a,n);if(o<0){o=0;a=[n]}this.__iopt.xlist=a;this.__iopt.beg=o;this.__iopt.end=o;this.__iopt.act="add";this.__doShowListByJST(r._$get(this.__ikey,this.__iopt,this.__iext),t)}else{this.__iopt.limit=1;this.__iopt.offset=0;this.__iopt.parent=e._$bind(this,t);var s=c._$getItemTemplate(a,this.__ikls,this.__iopt);this.__iopt.parent=this.__lbox;this.__doShowListByItem(s)}this._$dispatchEvent("onafterinsert",{pos:t})}}();m.__doBeforeListLoad=u;m.__doBeforeListShow=function(e){var t={parent:this.__lbox};this._$dispatchEvent(e||"onafterlistload",t);if(!t.stopped)a._$removeByEC(this.__ntip)};m.__doBeforeListRender=u;m.__doRenderMessage=function(e,t){if(i._$isString(e)){if(!this.__ntip)this.__ntip=a._$create("div");this.__ntip.innerHTML=e}else this.__ntip=e;this.__lbox.insertAdjacentElement(t||"beforeEnd",this.__ntip)};m.__doShowMessage=function(e,t,i){var n={parent:this.__lbox};if(e)this._$dispatchEvent(e,n);if(!n.stopped)this.__doRenderMessage(n.value||t,i)};m.__doShowEmpty=u;m.__doShowListByJST=u;m.__doShowListByItem=u;m.__onCheckAction=function(){var e=/^(?:delete|update)$/;return function(t){var i=n._$getElement(t,"d:action");if(i){var o=a._$dataset(i,"action");if(e.test(o)){var s=a._$dataset(i,"id");if(s){var _=this.__cache._$getItemInCache(s);if(_){n._$stop(t);this._$dispatchEvent("on"+o,{data:_,id:_[this.__iopt.pkey],body:a._$get(this.__getItemBodyId(s))})}}}}}}();m.__cbItemAdd=u;m.__doDeleteItem=function(e){var t=e.data||{},i={data:t,key:this.__ropt.key,id:t[this.__iopt.pkey]};this._$dispatchEvent("onbeforedelete",i);this.__cache._$deleteItem(i)};m.__cbItemDelete=u;m.__doUpdateItem=function(e){var t=e.data||{},i={data:t,key:this.__ropt.key};this._$dispatchEvent("onbeforeupdate",i);this.__cache._$updateItem(i)};m.__cbItemUpdate=function(e){this.__doCheckResult(e,"onafterupdate");if(!e.stopped){var t=e.data[this.__iopt.pkey];if(this.__items){var n=c._$getItemById(this.__getItemId(t));if(n)n._$refresh(e.data)}else{var o=this._$getItemBody(t);if(!o)return;var s=this.__cache._$getListInCache(e.key),_=i._$indexOf(s,e.data);if(_<0)return;this.__iopt.xlist=s;this.__iopt.beg=_;this.__iopt.end=_;this.__iopt.act="update";var d=r._$get(this.__ikey,this.__iopt,this.__iext);o.insertAdjacentHTML("afterEnd",d);a._$remove(o)}this._$dispatchEvent("onafterupdaterender",{data:e.data,parent:this.__lbox})}};m.__doCheckResult=function(e,t){var i=e.data;if(!i||null==i[this.__iopt.pkey]){this._$dispatchEvent("onerror",e);e.stopped=!0}if(!e.stopped)this._$dispatchEvent(t,e)};m.__cbAppendList=u;m.__cbUnshiftList=u;m.__cbListChange=function(e){if(e.key==this.__ropt.key)switch(e.action){case"add":this.__cbItemAdd(e);break;case"delete":this.__cbItemDelete(e);break;case"update":this.__cbItemUpdate(e);break;case"refresh":this._$refresh();break;case"unshift":this.__cbUnshiftList(e.offset,e.limit);break;case"append":this.__cbAppendList(e.offset,e.limit)}};m._$update=function(e){this.__doUpdateItem({data:e})};m._$delete=function(e){this.__doDeleteItem({data:e})};m._$add=function(e){this.__cache._$addItem({data:e,key:this.__ropt.key})};m._$cache=function(){return this.__cache};m._$unshift=function(e){this.__doInsertOneItem("afterBegin",this.__doFormatData(e));return this.__doSplitDirty(e)};m._$append=function(e){this.__doInsertOneItem("beforeEnd",this.__doFormatData(e));return this.__doSplitDirty(e)};m._$refresh=function(){this.__doClearListBox();this.__doRefreshByPager()};m._$refreshWithClear=function(){this.__cache._$clearListInCache(this.__ropt.key);this._$refresh()};m._$pullRefresh=function(){if(!this.__pulling){this.__pulling=!0;this.__doShowMessage("onbeforepullrefresh","列表刷新中...","afterBegin");this.__cache._$pullRefresh({key:this.__ropt.key,data:this.__ropt.data})}};m._$getTotal=function(){return this.__cache._$getTotal(this.__ropt.key)};m._$getPager=function(){return this.__pager};m._$items=function(){return this.__items};m._$getItemBody=function(e){if(this.__ikey)return a._$get(this.__getItemBodyId(e));else{var t=c._$getItemById(this.__getItemId(e));if(t)return t._$getBody()}};m._$isLoaded=function(){return this.__cache._$isLoaded(this.__ropt.key)};m._$showMessage=function(e){this.__doClearListBox();this.__doShowMessage(null,e)};m._$nextPage=function(){if(this.__pager){var e=this.__pager._$getIndex()+1,t=this.__pager._$getTotal();e=Math.max(1,Math.min(e,t));this._$pageTo(e);return e<t}};m._$prevPage=function(){if(this.__pager){var e=this.__pager._$getIndex()-1,t=this.__pager._$getTotal();e=Math.max(1,Math.min(e,t));this._$pageTo(e);return e<=1}};m._$pageTo=function(e){if(this.__pager){var t=this.__pager._$getTotal();e=Math.max(1,Math.min(e,t));this.__pager._$setIndex(e)}};if(!0)e.copy(e.P("nej.ut"),l);return l},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","780a96dd705b8404d9982fdccc656c08","4cd67180df9ce322f7a6a6207080bbc9","455067b9dcb8d33b1e1808745dbbb96a","50043314de3ac888066178568259baa6","351b76160a74729564be6e661a8d91d8","1bb4e44caf394e00cfac15a4e96405c3","4b460e06b9deefa9efed504ac2d1a610","2318238864a492451a5aba5d50acbc2d","f6bee5d24c4db95615edd22836cbf32e");I$("1e81d1884b46bf4bdbf59103ab669284",function(e,t,i,n,a,o,s,_,r,c,d){var l;_._$$ListModuleWF=t._$klass();l=_._$$ListModuleWF._$extend(s._$$ListModule);l.__reset=function(e){this.__doResetMoreBtn(e.more);this.__sbody=n._$get(e.sbody);this.__doInitDomEvent([[this.__sbody,"scroll",this.__onCheckScroll._$bind(this)]]);var t=e.delta;if(null==t)t=30;this.__delta=Math.max(0,t);var i=parseInt(e.count)||0;this.__count=Math.max(0,i);var a=parseInt(e.number)||0;if(a>1&&a<=i)this.__number=a;this.__super(e)};l.__destroy=function(){this.__super();delete this.__nmore;delete this.__sbody;delete this.__endskr;delete this.__nexting};l.__getPageInfo=function(e,t){var i=this.__first+(this.__count-1)*this.__limit,n=this.__count*this.__limit;return this.__super(i,e,n,t)};l.__doResetMoreBtn=function(e){this.__nmore=n._$get(e);this.__doInitDomEvent([[this.__nmore,"click",this._$next._$bind(this)]])};l.__doCheckScroll=function(e){if(!this.__endskr&&e&&this.__lbox.clientHeight){if(!e.scrollHeight)e=n._$getPageBox();var t=n._$offset(this.__lbox,this.__sbody),i=t.y+this.__lbox.offsetHeight-e.scrollTop-e.clientHeight,a=e.scrollHeight<=e.clientHeight;if(i<=this.__delta||a&&!this.__endskr)window.setTimeout(this._$next._$bind(this),0)}};l.__onCheckScroll=function(e){if(!this.__endskr){var t=i._$getElement(e);if(!t)t=n._$getPageBox();this.__doCheckScroll(t)}};l.__doChangePage=function(e){this.__super(e);if(!e.stopped){this.__doClearListBox();var t=0;if(e.index>1)t=this.__first+((e.index-1)*this.__count-1)*this.__limit;this.__offset=t;this._$next()}};l.__doGenRequestOpt=function(e){if(this.__number){var t=e.offset>0?this.__limit:this.__first,i=t+this.__limit*(this.__number-1);this.__offset=e.offset+i;e.data.limit=i;e.limit=i;delete this.__number}return e};l.__cbListLoad=function(e){delete this.__nexting;if(!this.__super(e))this._$resize()};l.__cbListChange=function(e){if(!e.key||e.key==this.__ropt.key){switch(e.action){case"refresh":case"append":delete this.__nexting}this.__super(e)}};l.__doBeforeListLoad=function(){this.__doShowMessage("onbeforelistload","");n._$setStyle(this.__nmore,"display","none")};l.__doBeforeListRender=function(e,t,i){var a=e.length,o=e.loaded?t+i>=a:t+i>a;this.__offset=Math.min(this.__offset,a);n._$setStyle(this.__nmore,"display",o?"none":"");if(o)this.__endskr=!0;if(this.__count>0){var s=this.__getPageInfo(t,e.length);if(this.__doSyncPager(s.index,s.total))return!0;var _=this.__first-this.__limit,r=this.__count*this.__limit;this.__endskr=(t+i-_)%r==0||o;n._$setStyle(this.__nmore,"display",this.__endskr?"none":"");this.__doSwitchPagerShow(this.__endskr&&s.total>1?"":"none")}};l.__doShowEmpty=function(){this.__offset=0;this.__endskr=!0;this.__doShowMessage("onemptylist","没有列表数据！")};l.__doShowListByJST=function(e,t){this.__lbox.insertAdjacentHTML(t||"beforeEnd",e)};l.__doShowListByItem=function(e){this.__items=this.__items||[];if(a._$isArray(e))d.push.apply(this.__items,e);else this.__items.push(e)};l.__cbItemAdd=function(e){n._$removeByEC(this.__ntip);this.__doCheckResult(e,"onafteradd");var t=e.flag;if(!e.stopped&&t)if(!(this.__count>0)){this.__offset+=1;t==-1?this._$unshift(e.data):this._$append(e.data)}else this.__doRefreshByPager()};l.__cbItemDelete=function(e){this.__doCheckResult(e,"onafterdelete");if(!e.stopped)if(!(this.__count>0)){var t=e.data[this.__iopt.pkey];if(this.__items){var i=o._$getItemById(this.__getItemId(t)),s=a._$indexOf(this.__items,i);if(s>=0){this.__items.splice(s,1);this.__offset-=1}if(i)i._$recycle()}else{var _=this._$getItemBody(t);if(_)this.__offset-=1;n._$remove(_)}if(this.__offset<=0)this._$next()}else this.__doRefreshByPager()};l.__cbAppendList=function(e,t){if(e==this.__offset)if(this._$isLoaded()){this.__endskr=!1;this._$resize()}};l.__cbUnshiftList=function(e,t){if(0==e){var i=this.__cache._$getListInCache(this.__ropt.key);for(var n=t-1;n>=0;n--)this._$unshift(i[n])}};l._$resize=function(){var e=this.__sbody;if(e&&!this.__endskr)this.__doCheckScroll(this.__sbody)};l._$refresh=function(){delete this.__endskr;this.__super()};l._$next=function(){if(!this.__nexting){this.__nexting=!0;var e=this.__offset;this.__offset+=0==e?this.__first:this.__limit;this.__doChangeOffset(e)}};if(!0)e.copy(e.P("nej.ut"),_);return _},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","4cd67180df9ce322f7a6a6207080bbc9","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","2318238864a492451a5aba5d50acbc2d","2517578cc53ee8bfb33bcd101fcd7e49");I$("2137f385e9bbd5978a6a1d0b6271ef2c",function(e,t,i,n,a){var o=window.setting||{};n._$$Module=e._$klass();
a=n._$$Module._$extend(t._$$EventTarget);a.__init=function(e){this.__super(e);this.__aktime=window.setInterval(this.__doUpdateACK._$bind(this),2e3)};a.__reset=function(e){this.__super(e)};a.__destroy=function(){window.clearInterval(this.__aktime);delete this.__aktime;this.__super()};a.__doUpdateACK=function(){var e=(o.appkey||"").toUpperCase();if(window.localStorage)localStorage.setItem("X-"+e+"-YSF-ACK",+new Date)}},"e84bded65b98b38941ed4f3e7b9e6d19","1bb4e44caf394e00cfac15a4e96405c3","806a8a7cfd11b6141fd1e6b03e9baf59");I$("65a1e588cbbb49086859492d859a87de",function(e,t){var i=e._$uniqueID(),n=new RegExp("\\["+i+"\\](.+?)\\[\\/"+i+"\\]","gi"),a=new RegExp("((?:(http|https|rtsp):\\/\\/(?:(?:[a-zA-Z0-9\\$\\-\\_\\.\\+\\!\\*\\'\\(\\)\\,\\;\\?\\&\\=]|(?:\\%[a-fA-F0-9]{2})){1,64}(?:\\:(?:[a-zA-Z0-9\\$\\-\\_\\.\\+\\!\\*\\'\\(\\)\\,\\;\\?\\&\\=]|(?:\\%[a-fA-F0-9]{2})){1,25})?\\@)?)?(?:(([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9]){0,1}\\.)+[a-zA-Z]{2,63}|((25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9])\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[0-9]))))(?:\\:\\d{1,5})?)(\\/(?:(?:[a-zA-Z0-9¡-퟿豈-﷏ﷰ-￯\\;\\/\\?\\:\\@\\&\\=\\#\\~\\-\\.\\+\\!\\*\\'\\(\\)\\,\\_])|(?:\\%[a-fA-F0-9]{2}))*)?(?:\\b|$)","gi");t._$encode=function(e){return(e||"").replace(a,function(e){return"["+i+"]"+e+"[/"+i+"]"})};t._$decode=function(e){RegExp.lastIndex=-1;return(e||"").replace(n,function(e,t){var i=t||"";if(i.indexOf("://")<0)i="http://"+i;return'<a target="_blank" href="'+i+'">'+t+"</a>"})};t._$complete=function(i){return t._$decode(e._$escape(t._$encode(i)))}},"780a96dd705b8404d9982fdccc656c08");I$("3f8e628214ce1b173311db1722ad9b9e",function(e,t,i,n,a,o,s){var _;n._$$Media=t._$klass();_=n._$$Media._$extend(i._$$EventTarget);_.__reset=function(e){this.__state=0;this._$source(e.url);if(null!=e.volume)this._$volume(e.volume);this.__super(e)};_.__destroy=function(){this.__super();this._$stop()};_.__doPlay=o;_.__doPause=o;_.__doStop=o;_.__onStop=function(){this.__doStateChange(4);this.__doStateChange(0)};_.__doError=function(){this.__state=0};_.__setCurrentTime=o;_.__getCurrentTime=o;_.__setVolume=o;_.__getVolume=o;_.__doStateChange=function(e){if(e!=this.__state){this.__state=e;this._$dispatchEvent("onstatechange",{state:this.__state})}};_.__onVolumeChange=function(){this._$dispatchEvent("onvolumechange",{volume:this._$volume()})};_._$duration=o;_._$source=function(e){e=e||"";if(e){this._$stop();this.__source=e}};_._$play=function(){if(0==this.__state||3==this.__state)this.__doPlay()};_._$pause=function(){if(1==this.__state||2==this.__state)this.__doPause()};_._$stop=function(){if(0!=this.__state)this.__doStop()};_._$seek=function(e){if(null!=e)this.__setCurrentTime(e);return this.__getCurrentTime()};_._$volume=function(e){if(null!=e){var e=Math.max(0,Math.min(e,100));this.__setVolume(e/100)}return 100*this.__getVolume()};if(!0)e.copy(e.P("nej,ut"),n);return n},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","1bb4e44caf394e00cfac15a4e96405c3");I$("700dfa5fe48d7e443bfe7333bc279200",function(e,t,i,n,a,o,s){var _;n._$$MediaAudio=t._$klass();_=n._$$MediaAudio._$extend(i._$$Media);_.__reset=function(e){this.__audio=new Audio;this.__doInitDomEvent([[this.__audio,"loadstart",this.__onLoading._$bind(this)],[this.__audio,"timeupdate",this.__onPlaying._$bind(this)],[this.__audio,"pause",this.__onPause._$bind(this)],[this.__audio,"volumechange",this.__onVolumeChange._$bind(this)],[this.__audio,"ended",this.__onStop._$bind(this)],[this.__audio,"error",this.__onError._$bind(this)]]);this.__super(e)};_.__destroy=function(){this.__super();delete this.__audio};_.__doPlay=function(){if(this.__audio.src!=this.__source){this.__audio.src=this.__source;this.__source=this.__audio.src}this.__audio.play()};_.__doPause=function(){this.__audio.pause()};_.__doStop=function(){this.__stopped=!0;this.__doPause();if(3==this.__state)this.__onPause()};_.__onLoading=function(){if(!this.__audio.paused)this.__doStateChange(1)};_.__onPause=function(){var e=!this.__stopped?3:0;this.__stopped=!1;this.__doStateChange(e);if(0==e)this.__audio&&this.__audio.removeAttribute("src")};_.__onPlaying=function(){var e=this.__audio.duration;if(!this.__audio.paused&&!isNaN(e)){this.__doStateChange(2);this._$dispatchEvent("ontimeupdate",{duration:this.__audio.duration,current:this.__audio.currentTime})}};_.__onError=function(e){this.__doError();var t=this.__audio.error;this._$dispatchEvent("onerror",{code:t.code})};_.__setCurrentTime=function(e){if(1!=this.__state)this.__audio.currentTime=e||0};_.__getCurrentTime=function(){return this.__audio.currentTime};_.__setVolume=function(e){this.__audio.volume=e};_.__getVolume=function(){return this.__audio.volume};_._$duration=function(){return!this.__audio?0:this.__audio.duration};if(!0)e.copy(e.P("nej.ut"),n);return n},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","3f8e628214ce1b173311db1722ad9b9e");I$("6c1f4c16cb85d957d0ce95faafaecbb4",function(e,t,i,n,a){t.__getAudioInst=function(t){return e._$$MediaAudio._$allocate(t)};return t},"700dfa5fe48d7e443bfe7333bc279200");I$("d8b5f7910f3e975cbd89ed998450ce14",function(e,t,i,n,a,o,s,_,r){var c;o._$$MediaFlash=t._$klass();c=o._$$MediaFlash._$extend(a._$$Media);c.__init=function(){var e=function(e){this.__audio=e;if(this.__action){this.__action.call(this);delete this.__action}};return function(){this.__super();n._$flash({hidden:!0,src:i._$get("audio.swf"),onready:e._$bind(this),onended:this.__onStop._$bind(this),onpause:this.__onPause._$bind(this),onseeking:this.__onLoading._$bind(this),onprogress:this.__onLoading._$bind(this),ontimeupdate:this.__onPlaying._$bind(this),onvolumechange:this.__onVolumeChange._$bind(this),onerror:this.__onError._$bind(this)})}}();c.__destroy=function(){this.__super();delete this.__action};c.__doPlay=function(){if(this.__audio){if(this.__source){this.__audio.nej_setSrc(this.__source);delete this.__source}this.__audio.nej_play()}else this.__action=this.__doPlay};c.__doPause=function(){if(this.__audio)this.__audio.nej_pause();else this.__action=this.__doPause};c.__doStop=function(){if(this.__audio){this.__audio.nej_stop();this.__doStateChange(0)}else this.__action=this.__doStop};c.__onLoading=function(){this.__doStateChange(1)};c.__onPause=function(){this.__doStateChange(3)};c.__onPlaying=function(e){this.__doStateChange(2);this._$dispatchEvent("ontimeupdate",{duration:e.duration,current:e.currentTime});if(null!=this.__dtvol){var t=this.__dtvol;delete this.__dtvol;this.__setVolume(t)}};c.__onError=function(e){this.__doError();this._$dispatchEvent("onerror",{code:e.code})};c.__setCurrentTime=function(e){if(1!=this.__state)this.__audio.nej_seek(e||0)};c.__getCurrentTime=function(){return this.__audio.nej_flash_get_currentTime()};c.__setVolume=function(e){if(this.__audio)try{this.__audio.nej_flash_set_volume(e)}catch(t){this.__dtvol=e}else this.__dtvol=e};c.__getVolume=function(){if(this.__audio)return this.__audio.nej_flash_get_volume()};c._$duration=function(){return!this.__audio?0:this.__audio.nej_flash_get_duration()};if(!0)e.copy(e.P("nej.ut"),o);return o},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","04cd16543048e84cdc028e9a9d6bdb9e","42346f5a862580df7dc6152a734f7525","3f8e628214ce1b173311db1722ad9b9e");I$("b3e00be4ba996dfe58a8a4c882643a7d",function(e,t,i,n,a,o){if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="4.0")I$("5ea887e50ecd51f485de7ff5c04cda51",function(e){t.__getAudioInst=function(t){return e._$$MediaFlash._$allocate(t)}},"d8b5f7910f3e975cbd89ed998450ce14");return t},"dcfbb39e75d6de6b8114c072c5b070e0","6c1f4c16cb85d957d0ce95faafaecbb4");I$("5821a529c5e6e425f3cb805a069a6691",function(e,t,i,n,a,o,s){n._$audio=function(e){return i.__getAudioInst(e)};n._$play=function(){var e={};var a=function(t,i,n,a){var s=e[t];if(s){var _=s.conf,r=_[i]||o,c=_.extra;if(a)delete e[t];n.data=c;r(n)}};var s=function(e,t){a(e,"onstatechange",{state:t},0==t)};var _=function(e,t){a(e,"onerror",{code:t},!0)};var r=function(e,t){a(e,"ontimeupdate",t)};var c=function(e,t){if(0==t.state)l(e);s(e,t.state)};var d=function(t){var n=e[t];if(n){n.audio=i.__getAudioInst({url:n.url,onerror:f._$bind(null,t),ontimeupdate:r._$bind(null,t),onstatechange:c._$bind(null,t)});n.audio._$play()}};var l=function(t){var i=e[t];if(i){if(i.audio)i.audio=i.audio._$recycle();if(i.timer)i.timer=window.clearTimeout(i.timer)}};var f=function(t,i){var n=e[t];if(n){l(t);var a=n.conf;if(a.retry>0){a.retry--;n.timer=window.setTimeout(d._$bind(null,t),a.interval||500)}else _(t,i.code)}};n._$stop=function(t){var i=e[t||"auto-audio"];if(i)i.audio._$stop()};return function(i,n){if(i){var a=t._$merge({},n),o=a.key||"auto-audio",_=e[o];if(_){l(o);s(o,0)}e[o]={url:i,conf:a};d(o)}}}();if(!0){var _=e.P("nej.e");_._$audio=n._$audio;_._$playBgSound=n._$play;_._$stopBgSound=n._$stop}return n},"cb16f42daf02e8bc03f90d7a179f5573","780a96dd705b8404d9982fdccc656c08","b3e00be4ba996dfe58a8a4c882643a7d");I$("0439ef8e10bbb734615931acccc290d4",function(e,t,i,n,a,o,s){s.CONFIG={nosHost:"nos.netease.com",cdnHost:"nosdn.127.net"};s._$extend=function(e,t,i){for(var n in t)if(i||void 0===e[n]||null===e[n])e[n]=t[n];return e};s._$now=function(){return new Date(+new Date+((setting||{}).delta||0))};s._$datetime=function(e){var t=new Date(e);var n=s._$now();if(t.getFullYear()===n.getFullYear()){if(t.getMonth()===n.getMonth()){var a=n.getDate()-t.getDate();if(1===a)return"昨天"+i._$format(t," HH:mm");else if(0===a)return i._$format(t," HH:mm");else return i._$format(t,"MM-dd HH:mm")}return i._$format(t,"MM-dd HH:mm")}return i._$format(t,"yyyy-MM-dd HH:mm")};s._$fileSizeFormat=function(e,t){t=t&&t.toUpperCase();switch(t){case"GB":return(e/Math.pow(1024,3)).toFixed(1);case"MB":return(e/Math.pow(1024,2)).toFixed(1);case"KB":return Math.round(e/1024);case"B":return e;default:if(e>=Math.pow(1024,3))return(e/Math.pow(1024,3)).toFixed(1)+" GB";else if(e>=Math.pow(1024,2))return(e/Math.pow(1024,2)).toFixed(1)+" MB";else if(e>=1024)return Math.round(e/1024)+" KB";else return e+" B";
}};s._$spliceSuffix=function(e){var t=e.split("."),i={bmp:"imgflag",png:"imgflag",jpg:"imgflag",jpeg:"imgflag",gif:"imgflag",exif:"imgflag",pdf:"pdf",txt:"doc",doc:"doc",docx:"doc",xls:"excel",xlsx:"excel",csv:"excel",zip:"zip",rar:"zip","7z":"zip",ppt:"ppt",pptx:"ppt",key:"key",mp3:"audio",wma:"audio",ape:"audio",flac:"audio",wav:"audio",aac:"audio",ogg:"audio",avi:"video",mov:"video",mkv:"video",rmvb:"video",wmv:"video","3gp":"video",flv:"video",mp4:"video",mpg:"video"},n=i[t[t.length-1].toLowerCase()];if(!n)return"unknown";else return n};s._$getListModuleConfig=function(t){var a=t||{},o=e._$html2node(n._$getTextTemplate("resource-status-empty")),s=e._$html2node(n._$getTextTemplate("resource-status-loading")),_=e._$html2node(n._$getTextTemplate("resource-status-error"));var r=function(t,i){var n=(e._$getByClassName(t,"j-flag")||[])[0];n.innerText=i||""};if(!i._$isFunction(a.onemptylist))a.onemptylist=function(e){e.value=o};else a.onemptylist=a.onemptylist._$aop(function(e){e.args[0].value=o});if(!i._$isFunction(a.onbeforelistload))a.onbeforelistload=function(e){e.value=s};else a.onbeforelistload=a.onbeforelistload._$aop(function(e){e.args[0].value=s});if(!i._$isFunction(a.onlistloaderror))a.onlistloaderror=function(e){r(_);e.value=_};else a.onlistloaderror=a.onlistloaderror._$aop(function(e){r(_);e.args[0].value=_});if(!i._$isFunction(a.onerror))a.onerror=function(e){r(_);this._$showMessage(_)};else{var c=a.onerror;a.onerror=function(e){c.call(this,e);if(!e.stopped){var t=e.content||"错误提示："+(e.data||e.code)+"，"+e.message;r(_,t);this._$showMessage(_)}}}return a};s._$delegate=function(n,a,o){t._$addEvent(a,"click",function(a){try{var s=t._$getElement(a,"action")}finally{if(!s)return;var _=e._$dataset(s,"action"),r=(o||{})[_];if(i._$isFunction(r)){t._$stopDefault(a);r.call(n||this,s,a)}}})};s._$delegateWithStopEvent=function(n,a,o){t._$addEvent(a,"click",function(a){try{var s=t._$getElement(a,"action")}finally{if(!s)return;var _=e._$dataset(s,"action"),r=(o||{})[_];if(i._$isFunction(r))r.call(n||this,s,a)}})};s._$copy=function(e){return JSON.parse(JSON.stringify(e))};s._$replaceRichAndUnescape=function(e){var t=/<img[^>]+>/g;e=e.replace(t,"[图片]");var n=/<\/?[^>]*>/g;e=e.replace(n,"");return i._$unescape(e)};s._$escapeWithoutSpace=function(){var e=/<br\/?>$/,t={r:/\<|\>|\&|\r|\n|\'|\"/g,"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;","\n":"<br/>","\r":""};return function(n){n=i._$encode(t,n);return n.replace(e,"<br/><br/>")}}();s._$avatorClip=function(e){if(!e)return"";e+="?imageView&type=png|imageView&thumbnail=76y76&axis=5";if(e.indexOf("://")>=0)return e;else return appConfig.path.sdk+e};s._$throttle=function(e,t){var t=t||0;var i,n;var a=0;var o;var s=function(){a=+new Date;o=null;e.apply(i,n);i=n=null};return function(){var e=+new Date;var _=t-(e-a);i=this;n=arguments;if(_<=0||_>t){clearTimeout(o);s()}else if(!o)o=setTimeout(s,_)}};s._$debounce=function(e,t){var i;return function(){clearTimeout(i);context=this;args=arguments;i=setTimeout(function(){e.apply(context,args)},t)}};s._$transNosToCdn=function(e,t){var i=s.CONFIG.nosHost+"/"+t,n=t+"."+s.CONFIG.cdnHost;return e.replace(i,n)}},"455067b9dcb8d33b1e1808745dbbb96a","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","5821a529c5e6e425f3cb805a069a6691");I$("a59d2c87e9141105094aa7628e8fb3e4",function(e,t,i,n,a){var o=1;var s=function(){var e=window.navigator.userAgent;if(/SE 2.X MetaSr 1.0/gi.test(e))return!0;else return!1};a._$permission=function(){var e=!1;return function(){if(!e){e=!0;if(window.Notification&&!s())Notification.requestPermission(function(e){o="denied"!==e})}}}();var _;var r=function(t){var i=e._$merge({category:"winfocus"},t);parent.postMessage("pkg:"+JSON.stringify(i),"*")};var c=function(e,i){var a=t._$get("notify-sound-url");if(a)n._$play(a.src,{key:"ysf-message-sound"});if(!window.Notification||o)if(window.Notification&&!s()){var r={id:i.id,notify:new Notification(e,i)};if(_){_.notify.close();_=void 0}_=r;r.notify.onclick=function(){window.focus();r.notify.close()};r.notify.onclose=function(){window.clearTimeout(r.timer)};r.timer=window.setTimeout(function(){r.notify.close()},2e4)}};a._$closeBySessionId=function(e){if((!e||e==_.id)&&_)_.notify.close()};a._$notifyMessage=function(){var t={image:function(e){return"[图片]"},audio:function(e){return"[音频]"},file:function(e){return"[文件] "+e.content.name},rich:function(e){return i._$replaceRichAndUnescape(e.content)},"qa-list":function(e){return e.label}};return function(i,n){var o=window.setting||{},s=t[i.type],_=i.content||"",n="客服"+(n||"");if(e._$isFunction(s))_=s.call(this,i);if(1!=setting.dialogStyle){a._$permission();c(n+"说：",{body:_,tag:"ysf",icon:appConfig.path.kefu+"res/img/notification.png"})}else r({notify:n+"说:",body:_,tag:"ysf",icon:appConfig.path.kefu+"res/img/notification.png"})}}()},"780a96dd705b8404d9982fdccc656c08","455067b9dcb8d33b1e1808745dbbb96a","0439ef8e10bbb734615931acccc290d4","5821a529c5e6e425f3cb805a069a6691");I$("5a396a28eab0f64b95e943616c375096",function(e,t,i){i._$parse=function(t){var n=[],a=JSON.parse(t.answer_list||"null")||[],o=t.answer_label,s=t.evaluation;if(o||a.length>1)n.push({list:a,type:"qa-list",origin:t.question,label:t.answer_label||"",evaluation:t.evaluation||0});else if(1==a.length)n.push({type:"qa",content:(a[0]||{}).answer||"",evaluation:t.evaluation||0});if(1==t.operator_hint){var _=e._$uniqueID(),r=e._$uniqueID(),c=2==t.answer_flag||3==t.answer_flag?!0:!1;n.push({id:_,msgIdClient:r,type:"rich",action:"kefu",content:i._$action(_,t.operator_hint_desc||"",c)})}return n};i._$action=function(){var i=e._$uniqueID(),n=new RegExp("\\["+i+"(.+?)"+i+"\\]","gi"),a=/<a\s+href\s*=\s*('|")qiyu:\/\/action.qiyukf.com\?command=(.+?)\1\s*>(.+?)<\/a>/gi,o={applyHumanStaff:"kefu"};return function(s,_,r){var c={};_=(_||"").replace(a,function(t,n,a,_){var r=o[a];if(!r)return t;var d=e._$uniqueID();c[d]='<a href="#" data-id="'+s+'" data-name="'+r+'">'+_+"</a>";return"["+i+d+i+"]"});if(r)_=t._$decode(_);else _=t._$complete(_);return _.replace(n,function(e,t){return c[t]||e})}}()},"780a96dd705b8404d9982fdccc656c08","65a1e588cbbb49086859492d859a87de");I$("e7fe559a934e9f3b6e372effae2b8215",function(e,t){var i={};var n=0;t._$getCache=function(e){return i[e]};t._$setCache=function(e,t){i[e]=t};t._$parseTemplate=function(e){var i=t._$getTemplateType(e);switch(i){case"order_list":return t.__parseListTemplate(e);case"order_detail":return t.__parseDetailTemplate(e);case"order_logistic":return t.__parseFlowTemplate(e);case"order_status":return t.__parseStatusTemplate(e)}};t._$getTemplateType=function(e){var t=new DOMParser,i=t.parseFromString(e,"text/xml");return i.querySelector("template").getAttribute("id")};t.__parseListTemplate=function(e){var i=t.__botXmlParser(e),n={title:"",content:{list:[]}};var a=i.getLinks();n.title=i.getTextVal(null,"label");n.status=100;if(!(a.length<1)){for(var o=0;o<a.length;o++){var s=a[o];if("block"==s.getAttribute("type"))n.content.list.push({target:s.getAttribute("target"),params:s.getAttribute("params"),image:i.getImageUrl(s),title:i.getTextVal(s,"p_name"),price:i.getTextVal(s,"p_price"),number:i.getTextVal(s,"p_count"),statusInfo:i.getTextVal(s,"p_status"),status:100})}t._$setCache("list",n);return n}else console.error("parse list template is error",a)};t.__parseDetailTemplate=function(e){var i=t.__botXmlParser(e),n={title:"",content:{list:[]}};var a=i.getLayouts();if(!(a.length<2)){n.title=i.getTextVal(a[0],"label");n.status=400;for(var o=1;o<a.length;o++){var s=a[o];n.content.list.push({label:i.getTextVal(s,"label"),value:i.getTextVal(s,"value")})}t._$setCache("detail",n);return n}else console.error("parse detail template is error",a)};t.__parseFlowTemplate=function(e){var i=t.__botXmlParser(e),n={title:"",content:{list:[]}};var a=i.getLayouts();if(!(a.length<2)){n.title=i.getTextVal(a[0],"label");n.status=300;for(var o=1;o<a.length;o++){var s=a[o];n.content.list.push({value:i.getTextVal(s,"logistic"),timestamp:i.getTextVal(s,"timestamp")})}t._$setCache("flow",n);return n}else console.error("parse detail template is error",a)};t.__parseStatusTemplate=function(e){var i=t.__botXmlParser(e),n={title:"",content:{list:[]}};var a=i.getLinks();var o=i.getLayouts();if(!(o.length<3||a.length<1)){n.title=i.getTextVal(o[0],"label")+i.getTextVal(o[1],"label");n.status=200;for(var s=0;s<a.length;s++){var _=a[s];n.content.list.push({target:_.getAttribute("target"),params:_.getAttribute("params")||"",info:i.getTextVal(_,"valid_operation")})}t._$setCache("status",n);return n}else console.error("parse status template is error",o,a)};t.__botXmlParser=function(e){var t=new DOMParser;var i=t.parseFromString(e,"text/xml");return{getLayouts:function(){return i.querySelectorAll("LinearLayout")||[]},getLinks:function(e){e=e||i;return e.querySelectorAll("link")},getTextVal:function(e,t){e=e||i;var n=e.querySelector("text[name="+t+"]");return n?n.textContent:""},getImageUrl:function(e){e=e||i;return e.querySelector("image").getAttribute("url")}}};t._$openSwitch=function(){n=1};t._$getSwitchStatus=function(){return n}},"780a96dd705b8404d9982fdccc656c08");I$("f79b9b9df57f808c93cf2ff02581cd95",function(e,t,i,n,a,o,s){var _;n._$$CacheListAbstract=t._$klass();_=n._$$CacheListAbstract._$extend(i._$$CacheList);_.__reset=function(e){this.__super(e);this._$batEvent({doloadlist:this.__doLoadList._$bind(this),doloaditem:this.__doLoadItem._$bind(this),doadditem:this.__doAddItem._$bind(this),dodeleteitem:this.__doDeleteItem._$bind(this),doupdateitem:this.__doUpdateItem._$bind(this),dopullrefresh:this.__doPullRefresh._$bind(this)})};_.__doLoadList=o;_.__doPullRefresh=o;_.__doLoadItem=o;_.__doAddItem=o;_.__doDeleteItem=o;_.__doUpdateItem=o;if(!0)e.P("nej.ut")._$$AbstractListCache=n._$$CacheListAbstract;return n},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","f6bee5d24c4db95615edd22836cbf32e");I$("b9ad17c9f9807d3dd0368525d5270ba7",function(){function e(e,t,s){var _,r;
if(arguments.length<3)return i(e,t);else{if(S(t))r=a(e,t,s);else{_=typeof t;if("string"===_){if("function"==typeof e[t])r=n(e,t,s)}else if("function"===_)r=a(e,t(e),s);else r=o(e,t,s)}return r}}function t(e,t){var i,n,a;this.target=e;this.func=t;this.aspects={};i=this.orig=e[t];n=this;a=this.advised=function(){function e(e){var t=c(e);n._callSimpleAdvice("on",s,e);return t}function o(e,t){n._callSimpleAdvice(e,s,t)}var s,_,r,c,l;if(this instanceof a){s=w(i.prototype);c=function(e){return d(i,s,e)}}else{s=this;c=function(e){return i.apply(s,e)}}r=x.call(arguments);l="afterReturning";_=h({target:s,method:t,args:r});try{n._callSimpleAdvice("before",s,r);try{_.result=n._callAroundAdvice(s,t,r,e)}catch(f){_.result=_.exception=f;l="afterThrowing"}r=[_.result];o(l,r);o("after",r);if(_.exception)throw _.exception;return _.result}finally{m()}};I(a,"_advisor",{value:n,configurable:!0})}function i(e,t){var i,a;i=e.name||"_";a={};a[i]=e;n(a,i,t);return a[i]}function n(e,i,n){var a=t.get(e,i);return a&&a.add(n)}function a(e,t,i){var a,o,_,r;a=[];r=0;for(;_=t[r++];){o=n(e,_,i);o&&a.push(o)}return s(a)}function o(e,t,i){var a=[];for(var o in e)if("function"==typeof e[o]&&t.test(o))a.push(n(e,o,i));return s(a)}function s(e){return{remove:function(){for(var t=e.length-1;t>=0;--t)e[t].remove()}}}function _(t){return function(i,n,a){var o={};if(2===arguments.length){o[t]=n;return e(i,o)}else{o[t]=a;return e(i,n,o)}}}function r(e,t){var i,n,a;for(i in C){n=t[i];if(n){a=e[i];if(!a)e[i]=a=[];a.push({aspect:t,advice:n})}}}function c(e,t){var i,n,a;a=0;for(i in C){n=e[i];if(n){a+=n.length;for(var o=n.length-1;o>=0;--o)if(n[o].aspect===t){n.splice(o,1);--a;break}}}return a}function d(e,t,i){try{I(t,"constructor",{value:e,enumerable:!1})}catch(n){}e.apply(t,i);return t}function l(e,t){for(var i=0,n=e.length;i<n;i++)t(e[i])}function f(e,t){for(var i=e.length-1;i>=0;--i)t(e[i])}function u(){return g}function h(e){b.push(g);return g=e}function m(){return g=b.pop()}function p(){try{return"x"in Object.defineProperty({},"x",{})}catch(e){}}e.before=_("before");e.around=_("around");e.on=_("on");e.afterReturning=_("afterReturning");e.afterThrowing=_("afterThrowing");e.after=_("after");e.joinpoint=u;e.add=function(){return e.apply(null,arguments)};t.prototype={_callSimpleAdvice:function(e,t,i){var n,a;a=this.aspects[e];if(a){n=C[e];n(this.aspects[e],function(e){var n=e.advice;n&&n.apply(t,i)})}},_callAroundAdvice:function(e,t,i,n){function a(e,t){return e<0?n(t):o(_[e].advice,e,t)}function o(i,n,o){function s(){return d}function _(){return c(arguments.length>0?x.call(arguments):o)}function r(e){return c(e||o)}function c(e){d++;return a(n-1,e)}var d,l;d=0;l=h({target:e,method:t,args:o,proceed:_,proceedApply:r,proceedCount:s});try{return i.call(e,l)}finally{m()}}var s,_;_=this.aspects.around;s=_?_.length:0;return a(s-1,i)},add:function(e){var t,i;t=this;i=t.aspects;r(i,e);return{remove:function(){var n=c(i,e);if(!n)t.remove()}}},remove:function(){delete this.advised._advisor;this.target[this.func]=this.orig}};t.get=function(e,i){if(i in e){var n,a;a=e[i];if("function"!=typeof a)throw new Error("Advice can only be applied to functions: "+i);n=a._advisor;if(!n){n=new t(e,i);e[i]=n.advised}return n}};var g,b,$,v,y,C,x,S,I,w;b=[];$=Array.prototype;v=$.unshift;y=$.push;x=$.slice;S=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};I=p()?Object.defineProperty:function(e,t,i){e[t]=i.value};w=Object.create||function(){function e(){}return function(t){e.prototype=t;var i=new e;e.prototype=null;return i}}();C={before:f,around:!1};C.on=C.afterReturning=C.afterThrowing=C.after=l;return e});I$("8eef0fcc6356fcef66565a551ca66308",function(e,t,i,n,a,o,s,_,r,c,d){d=e._$klass();c=d._$extend(n._$$EventTarget);var l={terminal:"WEB",project:"webapi",version:window.logSetting&&window.logSetting.version||"",type:"network",appkey:"",clientid:"",channel:"",attachment:"",platform:navigator.userAgent,extra:"",message:"",timestamp:"",sign:"",ver:""};var f={samplingRate:1,debugNums:Number(window.localStorage.getItem("debugNums"))||0};var u=[];var h=[];c.__init=function(e){this.__super(e);this.__initConfig();this.__initDebug()};c._$config=function(e){i._$merge(l,e)};c._$info=function(e,t){if(this.__checkSimple()){var i=500;var n=this.__handleInfoMsg("info",e,t);u.unshift(n);if(u.length>i)u.splice(u.length-1,1)}};c._$error=function(e,t,i){if(i||this.__checkSimple()){var n=this.__handleLogError("error",e,t);this.__sendLog(n,1)}};c._$debug=function(e){var e="[DEBUG] ["+i._$format(+new Date,"yyyy-MM-dd HH:mm:ss.ms")+"] "+e+"\n";h.unshift(e);if(h.length>=f.debugNums){var t=i._$merge({},l,{appkey:window.setting&&window.setting.appkey,clientid:window.setting&&window.setting.device,message:h.join("\n"),timestamp:+new Date,level:"DEBUG"});i._$merge(t,this.__createHash(t));this.__sendLog(t,1);h.length=0}};c._$batch=function(e,t,n){if(this.__checkSimple()){var a=this;var o=function(){var e=[].slice.call(arguments),t=null,n=e[0],o=e.slice(1);var s={};for(var _=0;_<o.length;_++){var t=o[_];if(i._$isObject(t))i._$merge(s,t);else s[_]=t}a._$info(n,s)};for(var s=0;s<t.length;s++)if("after"==n)_.after(e,t[s],o._$bind(this,t[s]));else _.before(e,t[s],o._$bind(this,t[s]))}};c._$getLogCache=function(){return u};c.__handleLogError=function(e,t,n){try{if(i._$isObject(n))n=JSON.stringify(n)}catch(n){}var a=+new Date;var o="["+e.toUpperCase()+"] ["+i._$format(a,"yyyy-MM-dd HH:mm:ss.ms")+"] "+t+": "+n+"\n";var s=i._$merge({},l,{appkey:window.setting&&window.setting.appkey,clientid:window.setting&&window.setting.device,message:o,timestamp:a,level:e});i._$merge(s,this.__createHash(s));u=[];return s};c.__handleInfoMsg=function(e,t,n){var a=[],o="",s=+new Date;n=n||{};for(var _ in n)if(n.hasOwnProperty(_))a.push(_+":"+JSON.stringify(n[_]||""));var o="["+e.toUpperCase()+"] ["+i._$format(s,"yyyy-MM-dd HH:mm:ss.ms")+"] "+t+": "+a.join(";");return o};c.__sendLog=function(e,t){if(window.logSetting){var i=window.logSetting.serverAddr;for(var n in e)e[n]=encodeURIComponent(e[n]);s._$request(i+"/swallow/log",{type:"json",method:"POST",data:e,onload:this.__cbLoad._$bind(this),onerror:this.__cbError._$bind(this,e,t)})}};c.__createHash=function(e){var t=o._$md52hex("ysf"+e.terminal+e.version+e.type+e.appkey+e.timestamp+"qykf");return{sign:t,ver:1}};c.__cbLoad=function(e){};c.__cbError=function(e,t){var i=1e3*t,n=3;if(!(t>n)){clearTimeout(this.__timer);this.__timer=setTimeout(function(){this.__sendLog(e,t+1)}._$bind(this),i)}};c.__initDebug=function(){function e(e){var t=[];return"\n"+JSON.stringify(e,function(e,i){if("object"==typeof i&&null!==i){if(t.indexOf(i)!==-1)return;t.push(i)}return i})}function t(e){return e}function i(e){return Number(e)}var n={o:e,O:e,s:t,d:i,j:e};if(window.debug)if(f.debugNums){window.debug.log=this._$debug._$bind(this);window.debug.formatArgs=function(e){e[0]=this.namespace+" "+e[0]};window.debug.formatters=n}};c.__initConfig=function(){var e=this;var t=window.logSetting.serverAddr;s._$request(t+"/swallow/config",{type:"json",data:{t:"web",p:"sdk"},method:"GET",type:"json",onload:function(e){i._$merge(f,e)}})};c.__checkSimple=function(){var e=Math.floor(100*Math.random()),t=Math.floor(100*f.samplingRate);return e<t?!0:!1};var m=d._$allocate();window.onerror=function(){m._$error("jsloaderror",[].slice.call(arguments),!0)};return m},"e84bded65b98b38941ed4f3e7b9e6d19","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08","1bb4e44caf394e00cfac15a4e96405c3","342a59fa556a9b26a8bb883d96638ac9","43182f014b9d40a77d4ee9e345c2f016","8583e3004310ef86c1cedbd4391e971c","b9ad17c9f9807d3dd0368525d5270ba7");I$("fdd887133f3f4e7b2851c20e58e72494",function(e,t,i,n,a,o,s){var _={};o._$$Cache=e._$klass();s=o._$$Cache._$extend(n._$$CacheListAbstract);s.__doSendRequest=function(e,n){var o=_[e];if(o){if(t._$isFunction(o.filter))o.filter.call(this,n);var s=function(e){var i=!1,s=n.onerror||o.onerror||"onerror";a._$error("httpRequestError",t._$merge({url:o.url},n,e));if(t._$isFunction(s))i=s.call(this,e,n);if(!i&&t._$isString(s))this._$dispatchEvent(s,e,n)};var r=function(e){if(e&&0===(""+e.code).indexOf("2")){if(t._$isFunction(o.format))o.format.call(this,e,n);var i=n.onload||o.onload;if(t._$isFunction(i))i.call(this,e.result);else if(t._$isString(i))this._$dispatchEvent(i,e.result);if(t._$isFunction(o.finaly))o.finaly.call(this,n,e.result)}else s.call(this,e)};var c=t._$merge({},n,{cookie:!0,type:"json",method:o.method||"POST",onload:r._$bind(this),onerror:s._$bind(this)});if(o.domain)o.__url=o.domain+o.url;i._$request(o.__url||o.url,c)}else console.error("not found request config for "+e)};s._$hasItem=function(e){return!!this._$getItemInCache(e)};o._$config=function(e){t._$forIn(e,function(e,t){if("string"==typeof e)e={url:e};_[t]=e})};o._$do=function(e,i){if(t._$isFunction(i)){var n=e._$allocate(),a=i.call(null,n);n._$recycle();return a}}},"e84bded65b98b38941ed4f3e7b9e6d19","780a96dd705b8404d9982fdccc656c08","8583e3004310ef86c1cedbd4391e971c","f79b9b9df57f808c93cf2ff02581cd95","8eef0fcc6356fcef66565a551ca66308");I$("6cabb143c99287da4b40b5b45f0c77e4",function(e,t,i,n,a,o,s,_,r,c,d,l,f,u,h){var m=window.setting||{};if(window.debug)var p=window.debug("visitorSession:push");var g;var b={client_input:{"switch":1,sendingRate:"1.5"}};var $=[];window.msgQueue=$;var v=function(e){for(var t=0;t<$.length;t++)if($[t]==e)return!0;return!1};var y=function(){var e=!1;e=window.screenTop<-3e4&&window.screenLeft<-3e4;return e};d._$config({"user-add":{domain:window.setting.getKefuDomain,url:"/webapi/user/create.action",format:function(e,t){var i=e.info;e.result={token:i.token,account:i.accid,exchange:i.exchange};this.__setRemoteStorage(i.storage,t.data.appkey)},onerror:function(e,t){var i="";c._$error("httpRequestError",n._$merge({url:"/webapi/user/create.action"},t,e));if(1002==e.code||1003==e.code||1001==e.code){switch(e.code){case 1001:i="企业Appkey不存在";break;case 1002:i="帐户不合法";break;case 1003:i="系统错误"}this._$dispatchEvent("onusererror",i)}else this.__cbCreateYXUser(t.data.appkey,null);
return!0}},"user-push-add":{domain:window.setting.getKefuDomain,url:"/webapi/user/create.action",format:function(e){var t=e.info;e.result={token:t.token,account:t.accid,exchange:t.exchange}}},"user-evaluate":{url:"/webapi/user/evaluate.action",format:function(e){e.result={code:e.code,desc:e.desc}}}});var C={NULL:0,INIT:1,CONNECTED:2};h=e._$klass();f=h._$extend(d._$$Cache);f.__init=function(){this.__step=2;this.__count=0;this.__state=C.NULL;this.__nopt={db:!1,debug:window.MIN_DEBUG_MODE,syncTeams:!1,syncFriends:!1,syncRoamingMsgs:!1,syncTeamMembers:!1,syncRelations:!1,syncFilter:!0,lbsUrl:window.MIN_LBS,onmsg:this.__cbReceiveMessage._$bind(this),onofflinefiltermsgs:function(e){c._$info("onofflinefiltermsgs",{msgs:e});e.sort(function(e,t){return e.time-t.time});n._$forEach(e,function(e){this.__cbReceiveMessage(e,!0)},this)}._$bind(this),onofflinefiltercustomsysmsgs:function(e){c._$info("onofflinefiltermsgs",{msgs:e});e.sort(function(e,t){return e.time-t.time});n._$forEach(e,function(e){this.__onReceiveInstr(e,!0)},this)}._$bind(this),onerror:this.__onConnectError._$bind(this),onconnect:this.__cbConnect2Yunxin._$bind(this),ondisconnect:this.__onDisConnect._$bind(this),oncustomsysmsg:this.__onReceiveInstr._$bind(this)};this.__evalBox={};this.__sesTokenMap={};this.__super()};f.__doResetTimeout=function(){this.__count=0;return this.__count};f.__getNextTimeout=function(){var e=1e3*(this.__step+this.__step*this.__count);this.__count++;return e};f.__getDeviceID=function(){return m.fid||m.device};f.__getUserInfo=function(){var e=this.__getDataInCache("yunxin-user");if(window.localStorage){var t="X-"+e.appKey.toUpperCase()+"-YSF-INFO",i=localStorage.getItem(t);if(!i)return;var a=n._$query2object(i);if(a.uid)e.fid=a.uid;a.source=i;if(!a.title){var o=n._$query2object(location.search.substr(1));var s=decodeURIComponent(o.t);a.title=s}return a}};f.__getForeignInfo=function(e){var t={email:"email",real_name:"name",mobile_phone:"mobile",avator:"avator"},i=JSON.parse(e.profile||"null")||[];n._$forEach(i,function(i){var n=t[i.key];if(n){delete t[i.key];i.value=i.value||e[n]||m[n]||""}});n._$loop(t,function(t,n){var a=e[t]||m[t];if(null!=a)i.unshift({key:n,value:a})});return i};f.__getMessageBody=function(e){return{time:e.time,id:e.idServer,sid:this._$getSessionID(),msgIdClient:e.idClient,from:this._$getKefu(),to:{id:e.to}}};f.__onConnectError=function(){var e={302:function(){this._$dispatchEvent("onusererror")}};return function(t){var i=e[t.code];if(n._$isFunction(i))i.call(this);else if(n._$isString(i))e[i].call(this);c._$error("onConnectError",t)}}();f.__doCreateYXUser=function(e){var t=this.__getDataInCache("yunxin-user");this.__offlineAckTimer=setInterval(function(){this.__setAckDvc(e);this.__setAckTime(e)}._$bind(this),2e3);if(!t){var t={deviceid:this.__getDeviceID(e),appkey:e||"",token:m.uuid||""};if(m.bid&&m.bid!=-1)t.bid=m.bid;this.__doSendRequest("user-add",{data:t,onload:this.__cbCreateYXUser._$bind(this,e)})}else this.__cbCreateYXUser(e,t)};f.__cbCreateYXUser=function(e,t){if(t){n._$merge(window.logSetting,{token:t.token,account:t.account});this.__setDataInCache("yunxin-user",t);this.__setDataInCache("corp-appkey",e);this.__doResetTimeout();t.appKey=e;t.exchange=t.exchange||[-1];t=n._$merge({},t,this.__nopt);window.nim=this.__nim=new NIM(t)}else window.setTimeout(this.__doCreateYXUser._$bind(this,e),this.__getNextTimeout())};f.__cbConnect2Yunxin=function(e){c._$info("__cbConnect2Yunxin",e);n._$merge(e,{staffid:m.staffid||0,groupid:m.groupid||0,qtype:m.qtype||0,robotShuntSwitch:m.robotShuntSwitch||0,robotId:m.robotId});if(window.__shuntdata__)n._$merge(e,{staffid:window.__shuntdata__.staffid,groupid:window.__shuntdata__.groupid,entryid:window.__shuntdata__.entryid});var t=this.__getDataInCache("yunxin-user"),i=this.__getUserInfo()||{},a=t.exchange[0];t.ip=t.ip||e.ip||"";if(this.__ktimer)window.clearTimeout(this.__ktimer);this.__ktimer=window.setTimeout(this.__doCheckKefuFail._$bind(this),15e3);var o=this.__tmpOnly2kefu;delete this.__tmpOnly2kefu;if(o)e.type=1;this.__nim.sendCustomSysMsg({to:a,cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:1,deviceid:i.fid||this.__getDeviceID(),exchange:a,foreignid:i.fid||m.fid||"",msgToken:this._$getSeqOfHistoryLoad(),fromTitle:i.title||"未知页面名称",fromPage:i.referrer||document.referrer,fromType:"WEB",fromIp:t.ip,fromSubType:[navigator.platform||"",navigator.userAgent||""].join(" - "),version:"7",stafftype:e.type||0,staffid:e.staffid||0,groupid:e.groupid||0,entryid:e.entryid||0,level:i.level||0,qtype:e.qtype||0,authToken:i.authToken||0,robotShuntSwitch:e.robotShuntSwitch||0,landPage:i.landPage||"",landPageReferrer:i.landPageReferrer||"",sessionInfo:i.sessionInfo,templateId:m.templateId||0,robotId:e.robotId||0}),done:function(t,i){if(t){window.setTimeout(this.__cbConnect2Yunxin._$bind(this,e),this.__getNextTimeout());c._$error("cbConnect2Yunxin",n._$merge({cmd:1},t))}}._$bind(this)})};f.__doCheckKefuFail=function(){if(!this.__isShuntFlow)this.__cbAllocateKefu({code:-1},{time:+new Date})};f.__cbAllocateKefu=function(){var e=function(e,t){var i=this._$getAppkey();if(e)clearTimeout(e);return setInterval(function(){try{var e=JSON.parse(localStorage.getItem(("YSF-SATISFY-"+i+"-"+t).toUpperCase())||"{}");if(!v(t)&&e.name){$.push(t);this._$dispatchEvent("onevalresult",{content:e.name});this._$dispatchEvent("onevalresultmsg",{content:e.name,sid:e.sid})}}catch(n){console.error("time:",+new Date)}}._$bind(this),2e3)};var t={200:function(t,i){this.__sessionId=t.sessionid;this.__satifyTimer=e.call(this,this.__satifyTimer,this.__sessionId);this.__sesTokenMap[t.sessionid]=t.session_token;var a=this.__getDataInCache("yunxin-kefu")||{};if(a.stafftype!==t.stafftype){if(1==t.stafftype)t.iconurl=t.iconurl||"";else t.iconurl=t.iconurl||m.portrait||"";if(~t.iconurl.indexOf("nos.netease.com")||~t.iconurl.indexOf("nosdn.127.net"))t.iconurl+="?imageView&type=png|imageView&thumbnail=76y76&axis=5";this.__doClearQueueCheck();this.__setDataInCache("yunxin-kefu",t);this.__setDataInCache("evaluation",n._$merge(JSON.parse(t.evaluation||"{}"),{id:n._$uniqueID(),sid:this.__sessionId}));this.__state=C.CONNECTED;this._$dispatchEvent("onconnect",{time:i.time,id:t.staffid,sid:t.sessionid,nickname:t.staffname,isRobot:1==t.stafftype,groupname:t.groupname,hasKefuEntry:1==t.operator_enable,hasEvaluated:0==t.evaluation_enable,welcome:t.message||""});this.__botQuickEntry(t.stafftype,t.bot);if(this.__xtimer)window.clearInterval(this.__xtimer);this.__xtimer=window.setInterval(this.__doCheckUserChange._$bind(this),500);b["client_input"]={"switch":1,sendingRate:"1.5"};this._$dispatchEvent("onconfig",{type:"client_input",config:b["client_input"]})}else if(1==t.stafftype)this._$dispatchEvent("onnokefunoleave",t)},201:function(e,t){this.__doClearQueueCheck();this.__state=C.CONNECTED;this._$dispatchEvent("onnokefu",e)},205:function(e,t){this._$dispatchEvent("onnokefunoleave",e)},203:function(e,t){this.__sessionId=e.sessionid;this.__doClearQueueCheck();this.__qtimer=window.setInterval(this.__doCheckQueue._$bind(this),1e4);this._$dispatchEvent("onqueuestart",{showNum:e.showNum,count:e.before,inqueueNotify:e.inqueueNotify})},x:function(e,t,i){this.__doClearQueueCheck();this.__state=C.NULL;this._$dispatchEvent(i,e);this.__nim.disconnect()}};return function(e,i){c._$info("__cbAllocateKefu",{data:e,msg:i});if(this.__ktimer)this.__ktimer=window.clearTimeout(this.__ktimer);var a=t[e.code];if(n._$isFunction(a))a.call(this,e,i);else t.x.call(this,e,i,"onkefuerror")}}();f.__doCheckQueue=function(){var e=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({cc:!0,filter:!0,scene:"p2p",to:e.exchange[0],content:JSON.stringify({cmd:16,deviceid:this.__getDeviceID()}),done:function(e,t){if(e)c._$error("doCheckQueue",n._$merge({cmd:16},e))}})};f.__doClearQueueCheck=function(){if(this.__qtimer)this.__qtimer=window.clearInterval(this.__qtimer)};f.__onReceiveInstr=function(){var e=function(e,t){var i={image:"file",audio:"file",video:"file",file:"file"};var t={type:e.type,time:t.time,msgIdClient:t.idClient,fromUser:t.fromUser,from:{id:-72},id:t.idServer,sid:t.isOffline?-100:this._$getSessionID(),to:{id:t.to}};if("rich"==e.type){t.from=this._$getKefu();n._$merge(e,{attach:{msg:e.content}})}return n._$merge(t,{content:i[e.type]?e.attach:e.attach.msg})};var t={"-1000":function(e,t){var i=1==e.fromtype?!0:!1;delete e.fromtype;var a=this.__getDataInCache("yunxin-kefu")||{};if(1!=a.stafftype&&e.sessionid==a.sessionid)this.__nim.sendCustomSysMsg({cc:i,filter:!0,to:t.from,scene:"p2p",content:JSON.stringify(e),done:function(e,t){if(e)c._$error("recieveInstr",n._$merge({cmd:1e3},e))}})},2:function(e,t){if(0==g){g=1;this._$dispatchEvent("onshuntstatus",g)}this.__cbAllocateKefu(e,t)},90:function(e,t){if(e.entries){this.__isShuntFlow=!0;var i=JSON.parse(e.entries),a=this.__getDataInCache("yunxin-kefu");this._$dispatchEvent("onshunt");this._$dispatchEvent("shuntentries",{entries:i,from:n._$merge(this._$getKefu(),{portrait:e.iconurl}),label:e.message})}},6:function(e,t){if(e.sessionid==this.__sessionId){var i=this.__evalBox[e.sessionid];var n={closeReason:e["close_reason"],evaluate:e.evaluate,message:e["message"]};if(1==e.evaluate&&!i){if(1!=e.keep_connection)this.__doDisConnect(n);else{this._$keepConnection=1;this.__doDelDisConnect(n)}this._$dispatchEvent("oneval",{messageInvite:this._$getEvaluation().messageInvite})}else if(1!=e.keep_connection)this.__doDisConnect(n);else{this._$keepConnection=1;this.__doDelDisConnect(n)}}},50:function(e,t){this._$dispatchEvent("oneval",{messageInvite:e.message})},15:function(e,t){if(200!=e.code){if(302==e.code)this._$dispatchEvent("onqueuefail");this.__doClearQueueCheck()}else this._$dispatchEvent("onqueuechange",{showNum:e.showNum,count:e.before,inqueueNotify:e.inqueueNotify})},17:function(e,t){},60:function(e,t){var i=r._$parse(e);n._$forEach(i,function(e){var i=this.__getMessageBody(t);this._$dispatchEvent("onmessage",n._$merge(i,e))},this)},70:function(e,t){this._$dispatchEvent("onovertime",{msg:e.message,time:e.timestamp
})},95:function(e,t){this._$setSessionID(e.sessionid);this.__sesTokenMap[e.sessionid]=e.session_token;this.__sessionId=e.sessionid;this.__updateKefuName(e.staffname);this._$dispatchEvent("ontransferresult",{sessionId:e.sessionid,staffId:e.staffid,staffName:e.staffname||"",welcome:e.message||""})},72:function(t,i){var a={question:function(t,i){if(!v(i.idClient)){t.type="text";this._$dispatchEvent("onmessage",e.call(this,t,i))}},robot:function(t,i){this._$dispatchEvent("onrobotanswerevalresult",e.call(this,t,i))}};n._$merge(i,{fromUser:1});if(a[t.type])a[t.type].call(this,t,i);else this._$dispatchEvent("onmessage",e.call(this,t,i))},134:function(e,t){var i={type:"push-msg",msgType:t.type,msgSessionId:t.ext.msgSessionId,content:t.text,from:this._$getKefu(),id:t.idServer,msgIdClient:t.idClient};var a=1,o=1;if(!this._$chatNoKefu){if(!document.hidden&&!y()&&1==this.__sdkWindowStatus){this._$sendPushMsgStatus(2,[i.msgSessionId]);o=0}if(1==this._$hasList){this._$dispatchEvent("onmessage",i);a=0}this._$dispatchEvent("onpushmessage",n._$merge(i,{append:a,sdkAppend:o}))}},203:function(e,t){var i=this.__getMessageBody(t);this._$dispatchEvent("receivethirdorder",n._$merge(i,{content:e}))},104:function(e){var t=this.__getDataInCache("yunxin-user");if(e.fromIp==t.ip)this._$dispatchEvent("oncansendfile",{timestamp:e.timestamp,result:e.result})},205:function(e){var t=e.template.id;if("order_list"==t||"card_layout"==t)this._$dispatchEvent("onmorebotlist",null,e);else if("pair"==t)this._$dispatchEvent("onmorebotdetail",null,e)},41:function(e){var t=e.message;if(0==e.result){this._$dispatchEvent("onusererror",t);if(this.__ktimer)this.__ktimer=window.clearTimeout(this.__ktimer)}},65:function(t,i){t.type="rich";this._$dispatchEvent("onmessage",e.call(this,t,i))},57:function(e,t){b[e.type]=e.config;this._$dispatchEvent("onconfig",e)}};t["17"]=t["6"];return function(e,i,a){c._$info("__onReceiveInstr",{msg:e,cmd:a});var o=e.content||"";try{o=JSON.parse(o);if(i&&!i[o.cmd]&&!a)return}catch(s){}var _=t[o.cmd||a];if(n._$isFunction(_))_.call(this,o,e)}}();f.__cbReceiveMessage=function(){var e={image:"file",audio:"file",video:"file"};var t={60:!0,90:!0,95:!0,72:!0,203:!0,205:!0,65:!0};var i={2:134};return function(a,o){p&&p("[recieveMessage] msg:%O",a);if("custom"!=a.type)if(!/##/gi.test(a.idClient)){c._$info("recievemessage",a);this._$dispatchEvent("onmessage",{type:a.type,time:a.time,id:a.idServer,sid:o?-100:this._$getSessionID(),content:a[e[a.type]||a.type],from:o?{id:-100}:this._$getKefu(),to:{id:a.to},msgIdClient:a.idClient})}else{var s=a.idClient.split("##"),_=s[0],r=s[1];n._$merge(a,{ext:{type:r,msgSessionId:_}});this.__onReceiveInstr(a,t,i[a.ext.type])}else{a.isOffline=o;this.__onReceiveInstr(a,t)}}}();f.__doDisConnect=function(e){this.__state=C.NULL;var t=n._$merge({time:+new Date},e);this.__delDataInCache("yunxin-kefu");this._$dispatchEvent("onfinish",t);this.__nim.disconnect()};f.__doDelDisConnect=function(e){this.__state=C.NULL;var t=n._$merge({time:+new Date},e);this.__delDataInCache("yunxin-kefu");this._$dispatchEvent("onfinish",t)};f.__onDisConnect=function(e){c._$error("__onDisConnect",e);this.__doClearQueueCheck();this.__delDataInCache("yunxin-kefu");if(this.__xtimer)this.__xtimer=window.clearInterval(this.__xtimer);if(this.__offlineAckTimer)this.__offlineAckTimer=window.clearInterval(this.__offlineAckTimer);if(this.__state!==C.NULL){this.__state=C.NULL;if(e.kicked)this._$dispatchEvent("onkickout");else this._$dispatchEvent("ondisconnect")}};f.__doCheckUserChange=function(){var e=this.__getUserInfo(),t=this;if(e)if(this.__last!=e.source){this.__last=e.source;var i=this.__getDataInCache("yunxin-user"),a=i.exchange[0];this.__nim.sendCustomSysMsg({to:a,cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:52,foreignid:e.uid,userinfo:JSON.stringify(this.__getForeignInfo(e)),authToken:e.authToken||0}),done:function(e,t){if(e)c._$error("doCheckUserChange",n._$merge({cmd:52},e))}});p&&p("[reportCrm] content:%O",{cmd:52,foreignid:e.uid,userinfo:this.__getForeignInfo(e),authToken:e.authToken||0})}};f.__setRemoteStorage=function(e,i){var a={userInfo:function(){var a=t._$text2type(e.userInfo,"json");a=n._$object2query(a);var o="X-"+i.toUpperCase()+"-YSF-INFO";window.localStorage.setItem(o,a)},orderInfo:function(){var a=t._$text2type(e.orderInfo,"json");a=n._$object2query(a);var o="X-"+i.toUpperCase()+"-YSF-PRODUCT";window.localStorage.setItem(o,a)},analyticInfo:function(){var a=t._$text2type(e.analyticInfo,"json");a=n._$object2query(a);var o="X-"+i.toUpperCase()+"-YSF-WEBANALYTICS";window.localStorage.setItem(o,a)}};if(e)n._$loop(e,function(e,t){var i=a[t];if(i&&n._$isFunction(i))i.apply(this)}._$bind(this))};f._$getVisitor=function(){var e=this.__getDataInCache("yunxin-user");return{id:e.account}};f._$getAppkey=function(){return m.appkey||this.__getDataInCache("corp-appkey")};f._$getKefu=function(){var e=this.__getDataInCache("yunxin-kefu");if(!e)return{};else return{id:e.staffid,portrait:e.iconurl,nickname:e.staffname}};f._$getEvaluation=function(){return this.__getDataInCache("evaluation")||{}};f._$getSessionID=function(){return this.__sessionId||(this.__getDataInCache("yunxin-kefu")||{}).sessionid};f._$setSessionID=function(e){(this.__getDataInCache("yunxin-kefu")||{}).sessionid=e};f.__updateKefuName=function(e){(this.__getDataInCache("yunxin-kefu")||{}).staffname=e};f._$isRobot=function(){return 1==(this.__getDataInCache("yunxin-kefu")||{}).stafftype};f._$connect=function(e,t,i){if(window.nim){window.nim.disconnect();delete window.nim}if(e.appkey||e.token){if(this.__state===C.NULL){this.__state=C.INIT;this.__doResetTimeout();e=e||{};this.__tmpOnly2kefu=t;if(i)this._$dispatchEvent("reconnect");if(!e.token)this.__doCreateYXUser(e.appkey);else this.__cbCreateYXUser(e.appkey,e)}}else this._$dispatchEvent("onusererror")};f._$pushMsgConnect=function(e,t,i){if(window.nim){window.nim.disconnect();delete window.nim}this.__doSendRequest("user-push-add",{data:{deviceid:this.__getDeviceID(),appkey:e||""},onload:function(a){a.appKey=e;a.exchange=a.exchange||[-1];a=n._$merge({},a,this.__nopt,{onerror:function(){},onconnect:function(){this._$sendPushMsg(t,i)}._$bind(this),ondisconnect:function(){},oncustomsysmsg:function(){}});window.nim=this.__nim=new NIM(a)}._$bind(this)})};f._$isInQueue=function(){return!!this.__qtimer};f._$canSendMessage=function(){return this._$isInQueue()||this.__state===C.CONNECTED};f._$isDelay=function(){return!!this.__delay};f._$sendMessage=function(){var e=function(e){var t={c:e.content.file,m:"sendFile"};var i=e.content.file;if(n._$isString(i))if(0===i.indexOf("data:image"))t.r="dataURL";else{t.r="file";t.c={url:i,size:1,md5:i,ext:"png",w:1,h:1}}else if("INPUT"===i.tagName)t.r="fileInput";else if(i.md5)t.r="file";else t.r="blob";return t};var t=function(e){var t={"crm-thirdorder":202};n._$merge(e.content,{cmd:t[e.type]});var i={m:"sendCustomMsg",r:"content",c:JSON.stringify(e.content)};return i};var i={image:e,audio:e,video:e,file:e,geo:{m:"sendGeo",r:"geo"},text:{m:"sendText",r:"text"},"crm-thirdorder":t};return function(e){if(this._$canSendMessage()){var t=i[e.type];if(n._$isFunction(t))t=t.call(this,e);if(t){var a=this.__getDataInCache("yunxin-user"),o=n._$merge({cc:!0,filter:!0,scene:"p2p",to:a.exchange[0]},e);o[t.r]=t.c||o.content;if("content"!=t.r)delete o.content;c._$info("_$sendMessage",o);return this.__nim[t.m](o)}else(e.done||u)({code:-2,message:"消息类型不支持"})}else(e.done||u)({code:-1,message:"长连接未建立"})}}();f._$updateEvaluate=function(e,t,i,n){e=parseInt(e,10);var a=this.__sesTokenMap[e];if(a){this.__evalBox[e]=!0;$.push(e);this.__doSendRequest("user-evaluate",{data:{sessionid:e,session_token:a,evaluation:t,fromtype:"web",remarks:i},onload:function(){var a={sid:e,value:t,name:n,remarks:i};if(window.localStorage)window.localStorage.setItem(("YSF-SATISFY-"+this._$getAppkey()+"-"+e).toUpperCase(),JSON.stringify(a))},onerror:function(){c._$error("_$updateEvaluate",{sid:e,value:t,remarks:i});window.setTimeout(this._$updateEvaluate._$bind(this,e,t,i),1e4)}._$bind(this)})}};f._$syncRobot=function(e){if(this._$canSendMessage()){var t=this.__getDataInCache("yunxin-user"),i=this.__getDataInCache("yunxin-kefu"),a=n._$merge({cmd:61},e);this.__nim.sendCustomSysMsg({to:t.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify(a),done:function(t){if(t){window.setTimeout(this._$syncRobot._$bind(this,e),1e4);c._$error("syncRobot",n._$merge({cmd:61},t))}}._$bind(this)})}};f._$syncRobotEx=function(e){var t={matched_question:"question",id:"questionid"};var i=function(e){var i={};for(var n in e)if(t[n])i[t[n]]=e[n];else i[n]=e[n];return i};if(this._$canSendMessage()){var a=this.__getDataInCache("yunxin-user"),o=this.__getDataInCache("yunxin-kefu"),s=n._$uniqueID(),_=n._$merge({cmd:63},i(e),{msgIdClient:s});this.__nim.sendCustomSysMsg({to:a.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify(_),done:function(t,i){if(!t)$.push(s);else{window.setTimeout(this._$syncRobotEx._$bind(this,e),1e4);c._$error("syncRobotEx",n._$merge({cmd:63},t))}}._$bind(this)})}};f._$action=function(){var e={kefu:function(e){if(this._$isRobot())this.__cbConnect2Yunxin({type:1})}};return function(t,i){var a=e[t];if(n._$isFunction(a)){c._$info("_$action",{action:t,data:i});a.call(this,i)}}}();f._$sendOfflineMessage=function(e){var t=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({cc:!0,filter:!0,scene:"p2p",to:t.exchange[0],content:JSON.stringify({cmd:83,message:e.content||"",mobile:e.mobile||"",email:e.email||""}),done:e.done})};f._$sendSelectShunt=function(e){var t={type:1};n._$merge(t,e);g=0;this.__cbConnect2Yunxin(t)};f._$sendKefuHeart=function(e){var t=this,i=window.globalSetting.heartbeatCycle||8e3;var n=this.__getDataInCache("yunxin-user");var a=function(){if(e)t.__nim.sendCustomSysMsg({cc:!0,filter:!0,to:n.exchange[0],scene:"p2p",content:JSON.stringify({cmd:-1e3,sessionid:e}),done:function(e,n){if(t.__timeout)clearTimeout(t.__timeout);t.__timeout=setTimeout(function(){a()},i)}})};a()};f.__sender3rdProductsInfo=function(e){
var t=this.__getDataInCache("yunxin-user"),i=this,a=i.__getProductInfo();var o=function(){i.__nim.sendCustomSysMsg({cc:!0,filter:!0,to:t.exchange[0],scene:"p2p",content:JSON.stringify(n._$merge({cmd:121},a)),done:function(t,o){if(!t)e(n._$merge({id:n._$uniqueID(),type:"productinfo"},a));else{i._$dispatchEvent("onproducterror",{type:"product-error",content:"商品链接参数错误"});c._$error("sender3rdProductsInfo",n._$merge({cmd:121},t))}}})};if(a)o()};f.__getProductInfo=function(){if(window.localStorage){var e=this.__getDataInCache("yunxin-user");var t="X-"+e.appKey.toUpperCase()+"-YSF-PRODUCT",i=localStorage.getItem(t);return null==i?null:n._$query2object(i)}};f.__setAckDvc=function(e){if(window.localStorage){var t="YSF-"+e.toUpperCase()+"-DVCTIME";window.localStorage.setItem(t,+new Date)}};f.__setAckTime=function(e){if(window.localStorage){var t="YSF-"+e+"-MSGTIME";if(!document.hidden&&!y()&&1==this.__sdkWindowStatus)window.localStorage.setItem(t,+new Date)}};f.__confirmAckDvc=function(e){if(window.localStorage){var t="YSF-"+e.toUpperCase()+"-DVCTIME",i=this.__getDeviceID(),o=2100,s=+new Date;if(Math.abs(s-Number(window.localStorage.getItem(t)))>o){var _=a._$md52hex(n._$uniqueID()+"-"+ +new Date);window.localStorage.setItem(i,_)}}};f._$sendPrdMsg=function(){var e=this;if(window.localStorage){var t="X-"+this.__getDataInCache("yunxin-user").appKey.toUpperCase()+"-YSF-PRODUCT",i=localStorage.getItem(t),a="YSF-PRODUCT-"+this.__sessionId+"-last",o=localStorage.getItem(a);if(i&&i!=o)this.__sender3rdProductsInfo(function(o){window.localStorage.setItem(a,i);window.localStorage.removeItem(t);e._$dispatchEvent("onmessage",n._$merge({fromUser:1,from:{id:-72}},o))})}};f._$sendPushMsg=function(e,t){e=e||[];var i=this.__getDataInCache("yunxin-user");for(var a=0;a<e.length;a++){var o=1==t?{cmd:133,deviceid:this.__getDeviceID(),msgId:e[a]}:{cmd:133,deviceid:this.__getDeviceID(),batchId:e[a]};this.__nim.sendCustomSysMsg({cc:!0,filter:!0,to:i.exchange[0],scene:"p2p",content:JSON.stringify(o),done:function(e,t){if(e)c._$error("sendPushMsg",n._$merge({cmd:133},e))}})}};f._$sendPushMsgStatus=function(e,t){var i=this.__getDataInCache("yunxin-user");for(var a=0;a<t.length;a++)this.__nim.sendCustomSysMsg({cc:!0,filter:!0,to:i.exchange[0],scene:"p2p",content:JSON.stringify({cmd:135,msgSessionId:t[a],status:e}),done:function(e,t){if(e)c._$error("sendPushMsgStatus",n._$merge({cmd:135},e))}})};f._$checkCanSendFile=function(e){var t=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({to:t.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:103,fromIp:t.ip,timestamp:e.timestamp}),done:function(e){if(!e);else c._$error("checkCanSendFile",n._$merge({cmd:103},e))}._$bind(this)})};f.__sendMessageByContent=function(e,t,i){e.time=e.time||+new Date;e.id=e.id||n._$uniqueID();e.idServer=e.idServer||n._$uniqueID();e.idClient=e.idClient||n._$uniqueID();this._$dispatchEvent("onmessage",{type:"text",time:e.time,id:e.idServer,content:t,fromUser:1,from:i||this._$getKefu(),to:{id:e.to},msgIdClient:e.idClient})};f.__botQuickEntry=function(e,t){if(1==e)this._$dispatchEvent("onbotentry",t);else if(0==e)this._$dispatchEvent("unbotentry")};f._$getMoreBotList=function(e){var t=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({to:t.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:204,target:e.template.action.target,params:e.template.action.params}),done:function(t){if(!t);else{this._$dispatchEvent("onmorebotlist",t,e);c._$error("getMoreBotList",n._$merge({cmd:204},t))}}._$bind(this)})};f._$getMoreBotDetail=function(e){var t=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({to:t.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:204,target:e.target,params:e.params}),done:function(e){if(!e);else{this._$dispatchEvent("onmorebotdetail",e,{template:{id:"pair"}});c._$error("getMoreBotDetail",n._$merge({cmd:204},e))}}._$bind(this)})};f._$evalRobotAnswer=function(e){var t=this.__getDataInCache("yunxin-user");this._$dispatchEvent("onrobotanswerevalresult",{id:e.id,evaluation:e.evaluation});this.__nim.sendCustomSysMsg({to:t.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:64,msgidClient:e.msgIdClient,evaluation:e.evaluation}),done:function(e){if(!e);else c._$error("evalRobotAnswer",n._$merge({cmd:64},e))}._$bind(this)})};f._$getSeqOfHistoryLoad=function(){var e=this._$getAppkey().toUpperCase(),t="YSF-"+e+"-HISTORY-SEQ",i=localStorage.getItem(t);try{i=JSON.parse(i)}catch(o){i=null}if(!i||m.fid&&i.relatedFid&&i.relatedFid!=m.fid){i={value:a._$md52hex(n._$uniqueID()+"-"+ +new Date),relatedFid:m.fid};localStorage.setItem(t,JSON.stringify(i))}else if(i&&!i.relatedFid&&m.fid){i.relatedFid=m.fid;localStorage.setItem(t,JSON.stringify(i))}return i.value};f._$sendInputContent=function(e){var t=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({to:t.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:58,sessionid:e.sessionId,msgType:"text",content:e.content,editTime:+new Date,sendingRate:this._$getConfig("client_input").sendingRate}),done:function(e){if(!e);else c._$error("sendInputContent",n._$merge({cmd:58},e))}._$bind(this)})};f._$getConfig=function(e){if(e)return b[e];else return b};var x=h._$allocate();c._$batch(x,["__init","__doCreateYXUser","__cbCreateYXUser","__cbConnect2Yunxin","__doCheckKefuFail","__doCheckQueue","__doClearQueueCheck","__doDisConnect","__doDelDisConnect","__updateKefuName","__sendMessageByContent","__botQuickEntry","__sender3rdProductsInfo","__confirmAckDvc","_$setSessionID","_$connect","_$pushMsgConnect","_$updateEvaluate","_$syncRobot","_$syncRobotEx","_$sendOfflineMessage","_$sendSelectShunt","_$sendPrdMsg","_$sendPushMsg","_$sendPushMsgStatus","_$sendThirdOrder","_$checkCanSendFile","_$getMoreBotList","_$getMoreBotDetail","_$evalRobotAnswer","_$sendInputContent"]);c._$batch(x,["__getDeviceID","__doResetTimeout","__getForeignInfo","__getProductInfo","__getNextTimeout","__getMessageBody","_$getKefu","_$getAppkey","_$getSessionID","_$getEvaluation","_$getVisitor","_$isDelay","_$isRobot","_$isInQueue","_$canSendMessage"],"after");return x},"e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08","43182f014b9d40a77d4ee9e345c2f016","bcb6a16a4419b7316d40b22a20044a08","806a8a7cfd11b6141fd1e6b03e9baf59","e7fe559a934e9f3b6e372effae2b8215","5a396a28eab0f64b95e943616c375096","8eef0fcc6356fcef66565a551ca66308","fdd887133f3f4e7b2851c20e58e72494");I$("d75d95943d0f2436559eb6094b78d11d",function(e,t,i,n,a,o,s,_,r,c,d,l,f,u,h){if(window.debug)var m=window.debug("visitorSession:message");var p={};var g=[];var b=[];var $=function(e,t){var n=t.msgIdClient;if(null==n||void 0==n)return!1;var a=i._$indexOf(e,function(e){var i=e.msgIdClient;if(null!=i&&n==i&&e.type==t.type)return!0});return a>=0};var v=function(e,t){for(var i=0;i<e.length;i++)if(e[i].id==t.id)return!0;return!1};d._$config({"msg-all":{method:"POST",url:"/webapi/user/message.action",format:function(e,t){var a=e.result;i._$forEach(a,function(e){if(!e.fromUser)e.from=f._$getKefu()||{}});a=this.__formatMessageList(a);i._$forEach(b,function(e){if(!$(a,e))a.push(e)});a.sort(function(e,t){return e.time>t.time?1:-1});if(t.ext&&t.ext.reconnect&&1==window.setting.dialogStyle){a.forEach(function(e){e.id=i._$uniqueID();this.__addItem({key:"msg-all",push:!0},e)}._$bind(this));n._$dispatchEvent(this.constructor,"listchange",{action:"refresh",key:"msg-all"})}}},"msg-history":{method:"POST",url:"/webapi/user/message/history.action",format:function(e,t){var n=e.result;i._$forEach(n,function(e){if(!e.fromUser)e.from={};if(!e.msgIdClient)e.msgIdClient=i._$uniqueID()});if(n.length){var a=n[n.length-1];n.push({id:i._$uniqueID(),type:"historySplit",content:{mid:a.id,sid:a.sessionId}});if(t.isFirst)n.unshift({id:i._$uniqueID(),type:"messageSplit",content:"以上为历史消息"})}n=this.__formatHistoryMessageList(n)},onload:function(e){if(e.length){this._$unshiftMsgToList(e);this._$dispatchEvent("onhistorylistload")}else this._$dispatchEvent("onhistorylistend")},onerror:"onhistorylistloaderr"}});u._$completeURL=function(e){return o._$decode(e)};u._$$Cache=e._$klass();h=u._$$Cache._$extend(d._$$Cache);h.__init=function(){var e=!1;return function(t){if(!e){e=!0;f._$addEvent("onmessage",this.__cbReceiveMessagePkg._$bind(this));f._$addEvent("oneval",this.__cbReceiveEvaluate._$bind(this));f._$addEvent("onevalresult",this.__cbReceiveResultEvaluate._$bind(this));f._$addEvent("shuntentries",this.__cbShuntEntries._$bind(this));f._$addEvent("receivethirdorder",this.__cbReceiveThirdOrderMsg._$bind(this));f._$addEvent("reconnect",this.__cbReconnect._$bind(this));f._$addEvent("onrobotanswerevalresult",this.__syncRobotAnswerEvalResult._$bind(this));f._$addEvent("onmorebotlist",this.__cbMoreBotList._$bind(this));f._$addEvent("onmorebotdetail",this.__cbMoreBotDetail._$bind(this))}this.__super(t)}}();h.__deduplicate=function(e,t){var i={};for(var n=0;n<e.length;n++){var a=e[n];if(a[t])if(i[a[t]])e.splice(n--,1);else i[a[t]]=!0;else;}};h.__deduplicateHistory=function(e){var t=5;var i=this._$getListInCache("msg-all");for(var n=0;n<e.length;n++){var a=e[n];for(var o=0;o<t;o++){var s=i.length-1-o;if(s<0)break;var _=i[s];if(a.msgIdClient&&_.msgIdClient&&a.msgIdClient==_.msgIdClient){e.splice(n--,1);break}}}};h.__formatMessageList=function(e){this.__doSplitQAList(e);this.__doParseProductList(e);this.__doParseMsg(e);this.__doParseBotMsgList(e);this.__doFilterTrashMsg(e);this.__deduplicate(e,"msgIdClient");return e};h.__formatHistoryMessageList=function(e){e=this.__formatMessageList(e);this.__deduplicateHistory(e);for(var i=0;i<e.length;i++){var n=e[i];if("custom"==n.type){var a=t._$text2type(n.content,"json"),o=a.staffinfo?JSON.parse(a.staffinfo):{},s=a.oldStaffInfo?JSON.parse(a.oldStaffInfo):{},_=a.newStaffInfo?JSON.parse(a.newStaffInfo):{};var r=a.cmd;switch(parseInt(r)){case 3:if(0==a.type){if(o.nickname)n.content="客服 "+o.nickname+" 为您服务";else n.content="客服为您服务";
n.type="sys"}else if(2==a.type){n.content="留言开始";n.type="sys"}else if(3==a.type){n.content="进入排队";n.type="sys"}break;case 84:if(2==a.type){n.content="留言结束";n.type="sys"}else e.splice(i--,1)}}else;}};h.__doLoadList=function(e){e.onerror=function(t){e.onload&&e.onload([])};e.data=i._$merge(e.data,{k:f._$getAppkey(),u:f.__getDeviceID()});var t=(e.key||"").split("-");this.__doSendRequest(t[0]+"-"+t[1],e)};h._$getHistory=function(e){e=e||{};var t={appkey:f._$getAppkey(),token:f._$getSeqOfHistoryLoad(),limit:20,timestamp:+new Date};var i=f._$getSessionID();if(i)t.currentSid=i;var n=this._$getListInCache("msg-all");if(!e.isFirst&&n&&n.length){t.mid=n[0].content.mid;t.sid=n[0].content.sid}this.__doSendRequest("msg-history",{data:t,isFirst:e.isFirst})};h.__doFormatItem=function(e){if(e){if("image"===e.type){var t=e.content.url||"";if((t.indexOf("nos.netease.com")>=0||t.indexOf("nosdn.127.net")>=0)&&t.indexOf("?")<0){e.content.origin=t;e.content.url=t+"?imageView&thumbnail=1500x850";e.content.thumb=t+"?imageView&thumbnail=120x120";var n=this.__getDataInCacheWithDefault("nos-cache",{});n[e.content.url]=e.content}}var a=e.content;if(i._$isString(a))e.richContent=o._$encode(a)}};h.__doMapRobotQA=function(){var e=/<a\s(.*?)>/gi;var t=function(t){return(t||"").replace(e,'<a target="_blank" $1>')};return function(e,n){var a=this.__getDataInCacheWithDefault("robot-qa-list",{});i._$forEach(e,function(e){var o=e.id;if(!o){o=i._$uniqueID();e.id=o;e.randomId=!0}a[o]=e;e.origin=n;e.answer=t(e.answer)})}}();h.__cbReceiveMessagePkg=function(e){var t=function(){var e=!1;e=window.screenTop<-3e4&&window.screenLeft<-3e4;return e};if(1==window.setting.dialogStyle){if(this.__checkAckTimeout(f._$getAppkey())){var i=f._$getKefu();setTimeout(function(){this.__sendMsgToSDK(e);if(localStorage&&null==localStorage.getItem("YSF-MSGID-"+e.id)){localStorage.setItem("YSF-MSGID-"+e.id,1);s._$notifyMessage(e,i.nickname)}}._$bind(this),100*setting.dvcTimer)}}else if(document.hidden||t()){var i=f._$getKefu();s._$notifyMessage(e,i.nickname)}this.__cbReceiveMessage(e)};h.__cbReceiveMessage=function(){var e=function(e,t){var n=t.msgIdClient;if(null==n||void 0==n)return!1;var a=i._$indexOf(e,function(e){var t=e.msgIdClient;if(null!=t&&n==t)return!0});return a>=0};return function(t){var i=this._$getListInCache("msg-all");if(!e(i,t)&&!e(g,t)){m&&m("[recieveMessage] msg:%O",t);if("qa-list"==t.type)this.__doMapRobotQA(t.list,t.origin);else if("crm-thirdorder"==t.type)this.__doParseBotMsg(t);var a="msg-all",o=this.__doSaveItemToCache(t),i=this._$getListInCache(a);if(this._$isLoaded(a)){i.push(o);n._$dispatchEvent(this.constructor,"listchange",{flag:1,key:a,data:o,action:"add"})}else b.push(o)}}}();h.__cbReceiveEvaluate=function(e){var t=i._$uniqueID();n._$dispatchEvent(this.constructor,"onevalmsgid",t);this.__cbReceiveMessage({id:t,sid:f._$getSessionID(),type:"eval-show",category:f._$getEvaluation().type,time:+new Date,isval:!1,messageInvite:e.messageInvite})};h.__cbReceiveResultEvaluate=function(e){this._$recieveEvalMessage(i._$merge(e,{id:f._$getEvaluation().id,sid:f._$getSessionID(),type:"eval-show",time:+new Date,isval:!0}))};h._$sendAction=function(e,t){f._$action(e,this._$getItemInCache(t))};h._$sendOfflineMessage=function(e){var t=e.content||{};e.mobile=t.mobile;e.email=t.email;e.content=t.content;i._$merge(e,{fromUser:1});e.done=function(e,t){if(e)l._$error("_$sendOfflineMessage",e);this._$dispatchEvent("onofflinemsgsend",{success:!e})}._$bind(this);f._$sendOfflineMessage(e)};h._$getRobotItem=function(e){return this.__getDataInCacheWithDefault("robot-qa-list",{})[e]};h._$sendRobotMessage=function(e){var t=this.__getDataInCacheWithDefault("robot-qa-list",{})[e];if(t){f._$syncRobotEx({original_question:t.origin,matched_question:t.question,answer:t.answer,id:t.randomId?"":t.id});if(t.question)this.__cbReceiveMessage({type:"text",time:+new Date,id:i._$uniqueID(),sid:f._$getSessionID(),content:t.question,fromUser:1,from:f._$getVisitor(),to:f._$getKefu()});if(t.answer,!1)this.__cbReceiveMessage({type:"qa",time:+new Date,id:i._$uniqueID(),sid:f._$getSessionID(),content:t.answer,to:f._$getVisitor(),from:f._$getKefu()})}};h._$sendEvalMessage=function(e,t){var a={id:e.id,type:"eval-show",content:e.name,value:e.evaluation||0,isval:!0,messageThanks:e.messageThanks};a=i._$merge(this._$getItemInCache(e.id),a);this.__doSaveItemToCache(a,"msg-all");n._$dispatchEvent(this.constructor,"listchange",{data:a,key:"msg-all",flag:1,action:t?"add":"update"});f._$updateEvaluate(e.sid,e.evaluation,encodeURIComponent(e.remarks),e.name)};h._$recieveEvalMessage=function(e){var t={id:e.id,type:"eval-show",content:e.content,value:e.evaluation||0,isval:!0};t=i._$merge(this._$getItemInCache(e.id),t);var a=this._$getListInCache("msg-all"),o=$(a,t),s=$(g,t);this.__doSaveItemToCache(t,"msg-all");if(!o&&!s){a.push(t);n._$dispatchEvent(this.constructor,"listchange",{data:t,key:"msg-all",flag:1,action:o?"update":"add"})}};h._$sendMessage=function(e){if(e.content){if("image"===e.type){if(!e.content.file){this._$dispatchEvent("onerror",{code:"NotAnImage",message:"NotAnImage(请求对象不是合法图片)(上传文件失败)"});return}var t=this._$getImageByURL(e.content.file);if(t)e.content.file=t}var a;if(!e.id){a=i._$merge({state:1,id:"auto-"+i._$uniqueID(),sid:f._$getSessionID(),from:f._$getVisitor(),fromUser:1,time:+new Date},e);this.__cbReceiveMessage(a)}else{a=this._$getItemInCache(e.id);a.state=1;n._$dispatchEvent(this.constructor,"listchange",{data:a,key:"msg-all",action:"update"})}e.beginupload=function(e){if("file"==a.type){a.uploadObj=e;this._$updateMessage(a)}}._$bind(this),e.uploadprogress=function(e){if("file"==a.type){a.progressObj=e;n._$dispatchEvent(this.constructor,"fileuploadprogress",{msg:a})}}._$bind(this);e.uploaddone=function(t,i){if(i&&i.url)i.url=c._$transNosToCdn(i.url,"nim");delete a.uploadObj;if(!t){a.content=i;this.__doFormatItem(this._$getItemInCache(a.id))}else{l._$error("msg.uploaddone",t);a.state=-1;a.error=t;this._$updateMessage(a)}this._$dispatchEvent("onfileupload",{data:e})}._$bind(this);if(!e.done)e.done=function(e,t){a.error=e;a.time=(t||{}).time||a.time;if(e){l._$error("msg.done",e);if(!t){console.error(e.message);return}a.state=-1;if("custom"==t.type){t.content=a.content;t.type=a.type}a=i._$merge(a,t);if("NotAnImage"===e.code){this._$dispatchEvent("onerror",e);var o=this._$getListInCache("msg-all"),s=i._$indexOf(o,a);if(s>=0)o.splice(s,1);n._$dispatchEvent(this.constructor,"listchange",{data:a,key:"msg-all",action:"delete"});return}}else{a.state=0;a.msgIdClient=t.idClient;var _=a.content.url;if("image"==a.type&&_){var r=new Image;r.onload=this._$updateMessage._$bind(this,a);r.onerror=this._$updateMessage._$bind(this,a);r.src=_;return}}this._$updateMessage(a)}._$bind(this);f._$sendMessage(e)}};h._$reSendMessage=function(e){var t=this._$getItemInCache(e);if(t){var n=i._$merge(t,{id:t.id,type:t.type,content:t.content});if("file"==n.type||"image"==n.type){if(!n.content.file)n.content={file:t.content}}else i._$merge(n,{resend:!0,idClient:t.idClient});this._$sendMessage(n)}};h._$getImageByURL=function(e){var t=this.__getDataInCacheWithDefault("nos-cache",{})[e];if(t)return i._$merge({},t,{url:t.origin||t.url})};h._$getAudioURL=function(e,t){t=t||function(){};var i=this._$getItemInCache(e);if(i){var n=i.content.url||"";if(!(n.indexOf("nos.netease.com")>=0||n.indexOf("nosdn.127.net")>=0))this.__doSendRequest("msg-audio",{query:{id:e},onload:function(e){if(200!=e.code)t();else{i.content.url=e.result;t(e.result)}},onerror:function(e){t()}});else t(n)}else t()};h.__cbShuntEntries=function(e){var t={};var a=this._$getListInCache("msg-all");i._$merge(t,{list:e.entries,from:e.from,type:"shunt",id:0,label:e.label});n._$dispatchEvent(this.constructor,"listchange",{data:t,key:"msg-all",action:"add",flag:1})};h.__doSplitQAList=function(e){i._$reverseEach(e,function(e,t,n){if("qa"==e.type){var a=JSON.parse(e.content||"null"),o=_._$parse(a);i._$forEach(o,function(t,n,a){a[n]=i._$merge({},e,t)});o.unshift(t,1);n.splice.apply(n,o)}})};h.__doParseMsg=function(e){var t=this;var n={image:function(e){try{var t=JSON.parse(e.content);e.content=t;n["text"](e)}catch(i){n["text"](e)}},file:function(e){try{var t=JSON.parse(e.content);e.content=t;n["text"](e)}catch(i){n["text"](e)}},text:function(e){var i=t._$getListInCache("msg-all");if($(i,e)||$(g,e))e.type="custom"},productinfo:function(e){try{var t=JSON.parse(e.content);i._$merge(e,t);n["text"](e)}catch(a){n["text"](e)}},"qa-list":function(e){t.__doMapRobotQA(e.list,e.origin)},richtext:function(e){try{var t=JSON.parse(e.content).content;e.content=t;e.type="rich";n["text"](e)}catch(i){n["text"](e)}}};n["audio"]=n["action"]=n["image"];n["qa"]=n["qa-list"];n["rich"]=n["richtext"];e.forEach(function(e,t){if(n[e.type])n[e.type](e)})};h.__doParseProductList=function(e){var t,n={121:"productinfo"};i._$forEach(e,function(e,a){t=null;try{t=JSON.parse(e.content);if(t&&n[t.cmd]){e=i._$merge(e,{type:n[t.cmd]});e.product=t}}catch(o){}},this)};h.__doParseBotMsgList=function(e){i._$forEach(e,function(e,t){if("workflow"==e.type){try{e.content=JSON.parse(e.content)}catch(i){e.content={}}this.__doParseBotMsg(e)}}._$bind(this))};h.__doParseBotMsg=function(){var e=function(e){var t=[];if(e.width)t.push("width:"+e.width);if(e.color)t.push("color:"+e.color);if(e.align)t.push("text-align:"+e.align);var n=["display:inline-block;white-space:nowrap;word-wrap:normal","text-decoration:underline","font-style:italic","font-weight:bold"];if(e.flag){var a=[];var o=parseInt(e.flag).toString(2);o=new Array(n.length-o.length+1).join("0")+o;var s=o.split("");i._$forEach(o,function(e,t){if("1"==e)a.push(n[t])})}var _=t.join(";"),r=a.join(";");if(_)e.style=_;if(r)e.innerStyle=r};var t={qiyu_template_text:function(e){e.type="text";e.content=e.content.template.label},bot_form:function(e){i._$forEach(e.content.template.forms,function(e){e.required=parseInt(e.required)})},error_msg:function(e){e.content.template.label=_._$action(i._$uniqueID(),e.content.template.label)},card_layout:function(t){var n=t.content.template;
i._$forEach(n.list,function(t){i._$forEach(t.list,function(t){i._$forEach(t,function(i){i.width=100/t.length+"%";e(i)})})})},detail_view:function(t){var n=t.content.template;i._$forEach(n.thumbnail.list,function(t){i._$forEach(t,function(i){i.width=100/t.length+"%";e(i)})});i._$forEach(n.detail.list,function(t){i._$forEach(t,function(t){e(t.left);e(t.right)})})},pair:function(t){var n=t.content.template;i._$forEach(n.list,function(t){i._$forEach(t,function(t){e(t.left);e(t.right)})})}};return function(e){var n=e.content.template.id;switch(e.content.type){case"01":e.type="text";e.content=e.content.template;break;case"02":case"03":break;default:e.type="crm-thirdorder";var a=t[n];if(i._$isFunction(a))a.call(this,e)}}}();h.__doFilterTrashMsg=function(e){for(var i=0;i<e.length;i++){var n=e[i];if(1!=n.fromUser){if(n.ext){var a=t._$text2type(n.ext,"json");if(a.trashWords&&a.trashWords.length)e.splice(i--,1)}}else;}};h.__sendMsgToSDK=function(e){e.category="notify";parent.postMessage("pkg:"+JSON.stringify(e),"*")};h.__checkAckTimeout=function(e){if(window.localStorage){var t="YSF-"+e+"-MSGTIME",i=parseInt(window.localStorage.getItem(t)),n=+new Date;if(Math.abs(n-i)>2100)return!0;else return!1}};h.__cbReconnect=function(){this.__doLoadList({data:{limit:1e5,offset:0},key:"msg-all",ext:{reconnect:1}})};h.__cbReceiveThirdOrderMsg=function(e){this.__doParseBotMsg(e);this._$addMessage(e,1);n._$dispatchEvent(this.constructor,"onthirdorder",e)};h.__syncRobotAnswerEvalResult=function(e){var t=this._$getItemInCache(e.id);t=i._$merge(t,e);this._$updateMessage(e)};h._$addMessage=function(e,t){var i="msg-all",a=this._$getListInCache(i),e=this.__doSaveItemToCache(e);a.push(e);n._$dispatchEvent(this.constructor,"listchange",{flag:t,key:i,action:"add",data:e})};h._$updateMessage=function(e){var t="msg-all";e=this.__doSaveItemToCache(e);n._$dispatchEvent(this.constructor,"listchange",{key:t,action:"update",data:e})};h._$deleteMessage=function(e){var t="msg-all",a=this._$getListInCache(t);if(a.length<=0)console.error("why message list empty when delete");this._$clearItemInCache(e.id);var o=i._$indexOf(a,e);if(o>-1)a.splice(o,1);n._$dispatchEvent(this.constructor,"listchange",{key:t,action:"delete",data:e})};h._$unshiftMsgToList=function(e){var t="msg-all";i._$forEach(e,function(e){if(!e.id||e.id==-1)e.id=i._$uniqueID();this.__doUnshiftToList(t,e)}._$bind(this));n._$dispatchEvent(this.constructor,"listchange",{flag:1,key:t,offset:0,limit:e.length,action:"unshift"})};h._$abortFileTrans=function(e){var t=this._$getItemInCache(e);t.uploadObj.abort();this._$deleteMessage(t)};h._$getMoreBotList=function(e){f._$getMoreBotList(e)};h.__cbMoreBotList=function(e,t){var i={content:t};if(!e&&t)this.__doParseBotMsg(i);n._$dispatchEvent(this.constructor,"onmorebotlist",{error:e,content:i.content})};h._$getMoreBotDetail=function(e){f._$getMoreBotDetail(e)};h.__cbMoreBotDetail=function(e,t){var i={content:t};if(!e&&t)this.__doParseBotMsg(i);n._$dispatchEvent(this.constructor,"onmorebotdetail",{error:e,content:i.content})};u._$do=d._$do._$bind(null,u._$$Cache);a._$$CustomEvent._$allocate({element:u._$$Cache,event:["listchange","onevalmsgid","fileuploadprogress","onthirdorder","onmorebotlist","onmorebotdetail"]});u._$$Cache._$allocate()},"e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","4cd67180df9ce322f7a6a6207080bbc9","342a59fa556a9b26a8bb883d96638ac9","65a1e588cbbb49086859492d859a87de","a59d2c87e9141105094aa7628e8fb3e4","5a396a28eab0f64b95e943616c375096","e7fe559a934e9f3b6e372effae2b8215","0439ef8e10bbb734615931acccc290d4","fdd887133f3f4e7b2851c20e58e72494","8eef0fcc6356fcef66565a551ca66308","6cabb143c99287da4b40b5b45f0c77e4");I$("d0d9030fa4d2fa9ea4edda1d07a88a55",function(e,t,i,n,a,o,s,_,r,c){o._$$Draggable=t._$klass();c=o._$$Draggable._$extend(a._$$EventTarget);c.__reset=function(e){this.__super(e);this.__overflow=!!e.overflow;this.__body=i._$get(e.body);this.__mbar=i._$get(e.mbar)||this.__body;this.__view=i._$get(e.view)||i._$getPageBox();this.__direction=parseInt(e.direction)||0;this.__doInitDomEvent([[document,"mouseup",this.__onDragEnd._$bind(this)],[document,"mousemove",this.__onDragging._$bind(this)],[this.__mbar,"mousedown",this.__onDragStart._$bind(this)]])};c.__destroy=function(){this.__super();delete this.__body;delete this.__mbar;delete this.__view};c.__getMaxRange=function(){return{x:this.__view.clientWidth-this.__body.offsetWidth,y:this.__view.clientHeight-this.__body.offsetHeight}};c.__onDragStart=function(e){n._$stop(e);if(!this.__offset){this.__offset={x:n._$pageX(e),y:n._$pageY(e)};this.__maxbox=this.__getMaxRange()}};c.__onDragging=function(e){if(this.__offset){n._$stop(e);var t={x:n._$pageX(e),y:n._$pageY(e)};var a=t.x-this.__offset.x,o=t.y-this.__offset.y,s=parseInt(i._$getStyle(this.__body,"top"))||0,_=parseInt(i._$getStyle(this.__body,"left"))||0,r={top:s+o,left:_+a};this.__offset=t;this._$setPosition(r)}};c.__onDragEnd=function(e){if(this.__offset){delete this.__maxbox;delete this.__offset;this._$dispatchEvent("ondragend",this._$getPosition())}};c._$setPosition=function(e){if(!this.__overflow){var t=this.__maxbox||this.__getMaxRange();e.top=Math.min(t.y,Math.max(0,e.top));e.left=Math.min(t.x,Math.max(0,e.left))}e.top=Math.round(e.top);e.left=Math.round(e.left);this._$dispatchEvent("onbeforechange",e);var i=this.__body.style;if(0==this.__direction||2==this.__direction)i.top=e.top+"px";if(0==this.__direction||1==this.__direction)i.left=e.left+"px";this._$dispatchEvent("onchange",e)};c._$getPosition=function(){return{left:parseInt(i._$getStyle(this.__body,"left"),10)||0,top:parseInt(i._$getStyle(this.__body,"top"),10)||0}};o._$$Dragger=o._$$Draggable;if(!0)e.copy(e.P("nej.ut"),o);return o},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","4cd67180df9ce322f7a6a6207080bbc9","1bb4e44caf394e00cfac15a4e96405c3");I$("fa750eb9869fd682219764fabeb14132",function(e,t,i,n,a,o,s,_){var r;a._$$Animation=t._$klass();r=a._$$Animation._$extend(i._$$EventTarget);r.__reset=function(e){this.__super(e);this.__end=e.to||o;this.__begin=e.from||{};this.__delay=Math.max(0,parseInt(e.delay)||0)};r.__destroy=function(){this.__super();this._$stop();if(this.__dtime){window.clearTimeout(this.__dtime);delete this.__dtime}delete this.__end;delete this.__begin};r.__onAnimationFrame=function(e){if(this.__begin){if((""+e).indexOf(".")>=0)e=+new Date;if(!this.__doAnimationFrame(e))this.__timer=n.requestAnimationFrame(this.__onAnimationFrame._$bind(this));else this._$stop()}};r.__doAnimationFrame=s;r._$play=function(){var e=function(){this.__dtime=window.clearTimeout(this.__dtime);this.__begin.time=+new Date;this.__timer=n.requestAnimationFrame(this.__onAnimationFrame._$bind(this))};return function(){this.__dtime=window.setTimeout(e._$bind(this),this.__delay)}}();r._$stop=function(){this.__timer=n.cancelAnimationFrame(this.__timer);this._$dispatchEvent("onstop")};if(!0)e.copy(e.P("nej.ut"),a);return a},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","1bb4e44caf394e00cfac15a4e96405c3","869beca8ceab3a775b034fbbbb8c912c");I$("ab7e53e7d01e03d6f01750aa8bbaed57",function(e,t,i,n,a,o,s,_){var r;a._$$AnimBezier=t._$klass();r=a._$$AnimBezier._$extend(n._$$Animation);r.__reset=function(e){this.__super(e);this.__duration=e.duration||200;this.__epsilon=1/(200*this.__duration);this.__doParseTiming(e.timing);this.__doCalPolynomialCoefficients()};r.__destroy=function(){this.__super();delete this.__pointer;delete this.__coefficient};r.__doParseTiming=function(){var e=/^cubic\-bezier\((.*?)\)$/i,t=/\s*,\s*/i,n={linear:[0,0,1,1],ease:[.25,.1,.25,1],easein:[.42,0,1,1],easeout:[0,0,.58,1],easeinout:[0,0,.58,1]};var a=function(e,t,i){i[t]=parseFloat(e)};return function(o){o=(o||"").toLowerCase();this.__pointer=n[o];if(e.test(o)){this.__pointer=RegExp.$1.split(t);i._$forEach(this.__pointer,a)}if(!this.__pointer)this.__pointer=n.ease}}();r.__doCalPolynomialCoefficients=function(){var e=this.__pointer,t=3*e[0],i=3*(e[2]-e[0])-t,n=1-t-i,a=3*e[1],o=3*(e[3]-e[1])-a,s=1-a-o;this.__coefficient={ax:n,ay:s,bx:i,by:o,cx:t,cy:a}};r.__doCalCubicBezierAtTime=function(){var e=function(e,t){return((t.ax*e+t.bx)*e+t.cx)*e};var t=function(e,t){return((t.ay*e+t.by)*e+t.cy)*e};var i=function(e,t){return(3*t.ax*e+2*t.bx)*e+t.cx};var n=function(t,n,a){var o,s,_,r,c,d;for(_=t,d=0;d<8;d++){r=e(_,a)-t;if(Math.abs(r)<n)return _;c=i(_,a);if(Math.abs(c)<1e-6)break;_-=r/c}o=0;s=1;_=t;if(_<o)return o;if(_>s)return s;for(;o<s;){r=e(_,a);if(Math.abs(r-t)<n)return _;if(t>r)o=_;else s=_;_=.5*(s-o)+o}return _};return function(e){return t(n(e/this.__duration,this.__epsilon,this.__coefficient),this.__coefficient)}}();r.__doAnimationFrame=function(e){var t=e-this.__begin.time,n=this.__doCalCubicBezierAtTime(t),a=i._$fixed(this.__begin.offset*(1-n)+this.__end.offset*n,2),o=!1;if(t>=this.__duration){a=this.__end.offset;o=!0}this._$dispatchEvent("onupdate",{offset:1*a});return o};r._$stop=function(){this._$dispatchEvent("onupdate",{offset:this.__end.offset});this.__super()};if(!0)e.copy(e.P("nej.ut"),a);return a},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","780a96dd705b8404d9982fdccc656c08","fa750eb9869fd682219764fabeb14132");I$("3b1361d1ef826125844a144cd4516201",function(e,t,i,n,a,o,s,_){var r;a._$$AnimEaseInOut=t._$klass();r=a._$$AnimEaseInOut._$extend(n._$$AnimBezier);r.__reset=function(e){e=i._$merge({},e);e.timing="easeinout";this.__super(e)};if(!0)e.copy(e.P("nej.ut"),a);return a},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","780a96dd705b8404d9982fdccc656c08","ab7e53e7d01e03d6f01750aa8bbaed57");I$("0c2cf5ac38d624489bd6977893a15d98",function(e){e.__getOverflowParent=function(e){return e}});I$("9fe6db670d7b3c23e9e35f4d83819695",function(e,t){if("trident"===e._$KERNEL.engine)I$("1b7d5739556ecab9e7a33402e46e383a",function(){t.__getOverflowParent=function(e){var t=e;if("BODY"==t.tagName)t=t.ownerDocument.documentElement;return t}});return t},"dcfbb39e75d6de6b8114c072c5b070e0","0c2cf5ac38d624489bd6977893a15d98");
I$("376cb34a97c879e9fa003cb7a8b072f1",function(e,t,i,n,a,o,s,_,r,c,d,l,f){var u;c._$$SimpleScroll=t._$klass();u=c._$$SimpleScroll._$extend(o._$$EventTarget);u.__init=function(){this.__aopt={to:{},from:{},duration:500,onstop:this.__doStopBarOpacity._$bind(this),onupdate:this.__doUpdateBarOpacity._$bind(this)};this.__dopt={x:{direction:1,ondragend:this.__onUpdateBarEnd._$bind(this,"x"),onbeforechange:this.__onBeforeUpdateBar._$bind(this,"x")},y:{direction:2,ondragend:this.__onUpdateBarEnd._$bind(this,"y"),onbeforechange:this.__onBeforeUpdateBar._$bind(this,"y")}};this.__dragger={};this.__super()};u.__reset=function(){var t={x:{min:0,speed:1,step:50,interval:50,left:0,right:0,hover:"js-hover",sb:"scrollWidth",cb:"clientWidth",ob:"offsetWidth",sr:"scrollLeft",ss:"width",sp:"left",dr:"right"},y:{min:0,speed:1,interval:50,step:50,top:0,bottom:0,hover:"js-hover",sb:"scrollHeight",cb:"clientHeight",ob:"offsetHeight",sr:"scrollTop",ss:"height",sp:"top",dr:"bottom"}};var n=function(n,a){if(!(a||d).body)a={body:a};var o=e.X(e.X({},t[n]),a);o.body=i._$get(o.body);if(o.body&&o.track){if(":parent"==o.track)o.track=o.body.parentNode;o.track=i._$get(o.track)}if(!o.min)o.min=!o.body?10:o.body[o.ob]||10;return o};var a=function(e,t){if(t){var i=this.__dopt[e];i.body=t;i.view=this.__parent;this.__dragger[e]=s._$$Dragger._$allocate(i)}};return function(e){this.__super(e);this.__bar={x:n("x",e.xbar),y:n("y",e.ybar)};this.__parent=i._$get(e.parent);this.__doInitDomEvent([[this.__parent,"mousewheel",this.__onMouseWheel._$bind(this)],[this.__parent,"scroll",this.__doSyncScrollBar._$bind(this)],[this.__parent,"mouseover",this.__doFixScrollBar._$bind(this)],[this.__bar.x.track,"mousedown",this.__onTrackDown._$bind(this,"x")],[this.__bar.y.track,"mousedown",this.__onTrackDown._$bind(this,"y")],[this.__bar.x.track,"mousewheel",this.__onMouseWheel._$bind(this)],[this.__bar.y.track,"mousewheel",this.__onMouseWheel._$bind(this)]]);var t=i._$get(e.trigger);if(t){this.__doInitDomEvent([[e.trigger,"mouseenter",this.__onMouseEnter._$bind(this)],[e.trigger,"mouseleave",this.__onMouseLeave._$bind(this)]]);this.__doUpdateBarOpacity({offset:0})}else this._$resize();a.call(this,"x",this.__bar.x.body);a.call(this,"y",this.__bar.y.body)}}();u.__destroy=function(){var e=function(e,t,i){e._$recycle();delete i[t];var n=this.__dopt[t];delete n.view;delete n.body};var t=function(e,t,n){if(e.body){var a={};a[e.ss]="";a[e.sp]="";i._$style(e.body,a);delete e.body}};return function(){this.__super();delete this.__isout;delete this.__parent;delete this.__dragging;this.__doStopBarOpacity();a._$loop(this.__dragger,e._$bind(this));a._$loop(this.__bar,t._$bind(this));delete this.__bar}}();u.__getOverflowParent=function(){return r.__getOverflowParent(this.__parent)};u.__doResetBarSize=function(e){var t=this.__getOverflowParent(),n=t[e.sb],a=t[e.cb],o=n-a,a=a-e[e.sp]-e[e.dr],s=n-a,_={},r={};if(o<=0){e.ratio=0;r.visibility="hidden";_[e.ss]=a+"px"}else{var c=Math.ceil(Math.max(e.min,a-a/n*s));r.visibility="visible";_[e.ss]=c+"px";e.max=Math.ceil(a-c+e[e.sp]);e.ratio=(a-c)/s}e.delta=0;if(e.body)e.delta=e.body[e.ob]-e.body[e.cb];i._$style(e.track||e.body,r);i._$style(e.body,_)};u.__doResetBarPosition=function(e,t){var n=this.__getOverflowParent();if(0!=t)n[e.sr]-=t*e.speed;if(e.body){var a=n[e.sr],o=Math.ceil(a*e.ratio)-e.delta+e[e.sp];i._$setStyle(e.body,e.sp,o+"px")}};u.__doSyncScrollBar=function(){if(!this.__dragging)this._$resize()};u.__doUpdateScrollBar=function(e,t){this.__doResetBarPosition(this.__bar.y,t);this.__doResetBarPosition(this.__bar.x,e)};u.__doAnimScrollBar=function(){this.__doStopBarOpacity();var e=this.__bar.y,t=e.track||e.body;if(!t){e=this.__bar.x;t=e.track||e.body}this.__aopt.from.offset=i._$getStyle(t,"opacity");this.__anim=_._$$AnimEaseInOut._$allocate(this.__aopt);this.__anim._$play()};u.__doUpdateBarOpacity=function(e){var t=e.offset;i._$setStyle(this.__bar.x.track||this.__bar.x.body,"opacity",t);i._$setStyle(this.__bar.y.track||this.__bar.y.body,"opacity",t)};u.__doStopBarOpacity=function(){if(this.__anim){this.__anim._$recycle();delete this.__anim}};u.__onMouseWheel=function(e){var t=this.__getOverflowParent(),i=t.scrollTop,a=t.scrollLeft;this.__doUpdateScrollBar(e.wheelDeltaX||0,e.wheelDeltaY||e.wheelDelta||0);i=t.scrollTop!=i;a=t.scrollLeft!=a;if(i||a)n._$stop(e)};u.__onMouseEnter=function(e){this.__isout=!1;this._$resize();this.__aopt.delay=0;this.__aopt.to.offset=.6;this.__doAnimScrollBar()};u.__onMouseLeave=function(e){this.__isout=!0;if(!this.__dragging){this.__aopt.delay=500;this.__aopt.to.offset=0;this.__doAnimScrollBar()}};u.__onTrackDown=function(){var e={x:function(e){this.__doUpdateScrollBar(e,0)},y:function(e){this.__doUpdateScrollBar(0,e)}};var t,a,o;var s=function(e){o=1;a=null;t=window.clearTimeout(t);n._$delEvent(e.track,"mouseup",a)};var _=function(r,c,d){var l=this.__bar[r],f=parseInt(i._$getStyle(l.body,l.sp)),u=f+d;if(!(f<=c&&c<=u)){if(!a){a=s._$bind(this,l);n._$addEvent(l.track,"mouseup",a)}e[r].call(this,(c<f?1:-1)*l.step*o);t=window.setTimeout(_._$bind(this,r,c,d),l.interval);o++}else s(l)};return function(e,t){var a=this.__bar[e],o=i._$offset(a.track)[e],r=n._$page(t)[e],c=a.body[a.ob];s(a);_.call(this,e,r-o,c)}}();u.__onBeforeUpdateBar=function(e,t){this.__dragging=!0;var n=this.__getOverflowParent(),a=this.__bar[e],o=a[a.sp],s=Math.max(o,Math.min(a.max,t[a.sp]));n[a.sr]=Math.ceil((s-o)/a.ratio);t[a.sp]=s;i._$addClassName(a.track,a.hover)};u.__onUpdateBarEnd=function(e){this.__dragging=!1;if(this.__isout)this.__onMouseLeave();var t=this.__bar[e];i._$delClassName(t.track,t.hover)};u.__doFixScrollBar=function(e){this._$resize()};u._$resize=function(){this.__doResetBarSize(this.__bar.x);this.__doResetBarSize(this.__bar.y);this.__doUpdateScrollBar(0,0)};u._$show=function(){this.__onMouseEnter()};u._$hide=function(){this.__onMouseLeave()};if(!0)e.copy(e.P("nej.ut"),c);return c},"cb16f42daf02e8bc03f90d7a179f5573","e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08","1bb4e44caf394e00cfac15a4e96405c3","d0d9030fa4d2fa9ea4edda1d07a88a55","3b1361d1ef826125844a144cd4516201","9fe6db670d7b3c23e9e35f4d83819695");I$("b60cdb5b242deb36987b693b62f62c0e",".#<uispace>-parent{position:relative;}\n");I$("ba3f74046c4402075f34cc74d15a2f24",'<textarea name="ntp" id="#<sbBody>">\n  <div class="u-scrollbar"><span class="thumb">&nbsp;</span></div>\n</textarea>');I$("186691795a2fc1193976edeb8747c76d",function(e,t,i,n,a,o,s,_,r){_._$$Scrollbar=e._$klass();r=_._$$Scrollbar._$extend(a._$$Abstract);r.__init=function(){this.__sopt={ybar:{}};this.__super()};r.__reset=function(e){var n=t._$get(e.parent);if(n){var a=e.container||n.parentNode;this.__super({parent:a,clazz:"m-scrollbar"});this.__sopt.parent=n;this.__scrollbar=i._$$SimpleScroll._$allocate(this.__sopt);setTimeout(function(){if(this.__scrollbar)this.__scrollbar._$resize()}._$bind(this),1e3);this.__doInitDomEvent([[e.sbody||this.__sopt.parent,"scroll",this.__doShowScrollBar._$bind(this)]])}};r.__destroy=function(){delete this.__sopt.parent;delete this.__sopt.trigger;this.__doClearComponent();this.__super()};r.__initXGui=function(){var e=t._$pushCSSText(o),i=n._$parseUITemplate(s);return function(){this.__seed_css=e;this.__seed_html=i.sbBody}}();r.__initNode=function(){this.__super();this.__sopt.ybar.track=this.__body;this.__sopt.ybar.body=t._$getChildren(this.__body)[0]};r.__doShowScrollBar=function(){if(this.__stimer)window.clearTimeout(this.__stimer);if(this.__scrollbar)this.__scrollbar._$show()};r.__doHideScrollBar=function(){this.__stimer=window.clearTimeout(this.__stimer);if(this.__scrollbar)this.__scrollbar._$hide()};r._$resize=function(){if(this.__scrollbar)this.__scrollbar._$resize()}},"e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","376cb34a97c879e9fa003cb7a8b072f1","2318238864a492451a5aba5d50acbc2d","d4e947987e24f4ce2260131a04872457","b60cdb5b242deb36987b693b62f62c0e","ba3f74046c4402075f34cc74d15a2f24");I$("e82df16b44b871b22a94efd3a341cb01",function(e,t,i,n,a,o){i.__handleFileLabelClick=function(){};return i});I$("118ff23ce86e10b02f1ac5477bd067f8",function(e,t,i,n,a,o,s){if("gecko"===e._$KERNEL.engine)I$("8f91248b3f3e44c3117cf8582017bc08",function(){i.__handleFileLabelClick=function(){var e=function(e){t._$stop(e);t._$getElement(e,"t:label").control.click()};return function(i){t._$addEvent(i,"click",e)}}()});return i},"dcfbb39e75d6de6b8114c072c5b070e0","4cd67180df9ce322f7a6a6207080bbc9","e82df16b44b871b22a94efd3a341cb01");I$("940fa04144ba9d08b57524738e940640",function(e,t,i,n,a,o,s,_,r,c){var d={},l=t._$pushCSSText(".#<uispace>{position:absolute;width:0;height:0;overflow:hidden;}");s._$bind=function(){var e=function(e){var t=d[e];if(!t){t={};d[e]=t}return t};var o=function(e,t){if(t){var i=[];n._$loop(t,function(e,t){i.push('<input type="hidden" name="'+t+'" value="'+e+'">')});e.insertAdjacentHTML("afterBegin",i.join(""))}};var s=function(e,i,n,a,s){var _,r=d[e],c=l+" "+(n||"");i=t._$get(i);if(i){_=t._$create("div",c);i.appendChild(_);t._$dataset(i,"id",e);o(i,a)}else{_=t._$create("form",c);t._$dataset(_,"id",e);o(_,a);(s||document.body).appendChild(_)}r.pid=t._$id(_)};var c=function(e,n){var a=n.accept||"";if(a)a='accept="'+a+'"';var o="";if(n.multiple)o='multiple="true"';var n=d[e],s=e+"-"+n.nmb,_=t._$html2node('<input type="file" '+o+" "+a+' contenteditable="false" id="'+s+'"/>');n.nmb++;t._$get(n.pid).appendChild(_);i._$addEvent(_,"change",f);return s};var f=function(e){var n=i._$getElement(e),a=n.id,o=a.split("-"),s=d[o[0]];if(n.value){if(s.multiple)t._$get(s.lab).htmlFor=c(o[0],s);if(!n.name){var _="";n.name=s.name+_}s.onchange({id:a,form:n.form,target:t._$get(s.lab)})}};return function(i,o){i=t._$get(i);if(i&&"LABEL"==i.tagName){t._$dumpCSSText();var d=n._$uniqueID(),l=e(d);o=o||_;s(d,o.form,o.clazz,o.param,t._$get(o.parent));l.nmb=0;l.name=o.name||"file";l.lab=t._$id(i);l.accept=o.accept||"";l.multiple=!!o.multiple;l.onchange=o.onchange||r;i.htmlFor=c(d,l);a.__handleFileLabelClick(i);
return d}}}();s._$get=function(e){var i=d[e];if(i){var n=t._$get(i.pid);if(n){if("FORM"!=n.tagName)n=n.parentNode;return n}}};s._$unbind=function(e){var i=d[e];if(i){t._$remove(i.pid);delete d[e]}};s._$selectable=function(){var e;return function(){if(null==e){var t=document.createElement("input");t.type="file";e=!t.disabled}return e}}();o._$merge({_$bind:s._$bind});if(!0){var o=e.P("nej.e");o._$file=s._$bind;o._$getFileForm=s._$get;o._$removeFileForm=s._$unbind}return s},"cb16f42daf02e8bc03f90d7a179f5573","455067b9dcb8d33b1e1808745dbbb96a","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08","118ff23ce86e10b02f1ac5477bd067f8","b01c677ecd401a2fc164bad715b15e74");I$("9162ba9f0874421ef2bafacb7709e403",function(e,t,i,n,a,o){i.__setCursorPosition=function(e,t){e.selectionEnd=t.end||0;e.selectionStart=t.start||0;e.focus()};i.__getCursorPosition=function(e){e.focus();return{end:e.selectionEnd,start:e.selectionStart}};i.__getCursorPXPosition=function(t){var i=document.createElement("div");e._$style(i,{position:"absolute",visibility:"hidden",whiteSpace:"pre-wrap",appearance:"textarea",font:e._$getStyle(t,"font"),display:e._$getStyle(t,"display"),padding:e._$getStyle(t,"padding"),wordWrap:e._$getStyle(t,"wordWrap"),textAlign:e._$getStyle(t,"textAlign"),letterSpacing:e._$getStyle(t,"letterSpacing"),top:0,left:0,width:t.clientWidth+"px",height:t.clientHeight+"px"});i.innerText=t.value;var n=document.createElement("span");i.appendChild(n);document.body.appendChild(i);var a={width:0,top:n.offsetTop,left:n.offsetLeft,height:n.offsetHeight};e._$remove(i);return a};return i},"455067b9dcb8d33b1e1808745dbbb96a","dcfbb39e75d6de6b8114c072c5b070e0");I$("84217811d61f8ea4dc99c6adb61930a3",function(e,t,i,n,a,o,s){if("trident"===t._$KERNEL.engine)I$("e3ac3d9669f74341d2b413499aaf9eaa",function(){e.__getCursorPXPosition=function(e){e.focus();var t=document.selection.createRange(),n=i._$getPageBox(),a=i._$offset(e);return{top:t.boundingTop-a.y+n.scrollTop,left:t.boundingLeft-a.x+n.scrollLeft,width:t.boundingWidth,height:t.boundingHeight}}});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release<="4.0")I$("903275ca433f88970c22849e0f10d591",function(){e.__setCursorPosition=function(e,t){var i=e.createTextRange();i.collapse(!0);i.moveStart("character",t.start);i.moveEnd("character",t.end-t.start);i.select();e.focus()};e.__getCursorPosition=function(e){var t=document.selection.createRange();var i=e.createTextRange();i.moveToBookmark(t.getBookmark());var n=e.createTextRange();n.collapse(!0);n.setEndPoint("EndToStart",i);var a=n.text.length;return{start:a,end:a+t.text.length}}});return e},"9162ba9f0874421ef2bafacb7709e403","dcfbb39e75d6de6b8114c072c5b070e0","455067b9dcb8d33b1e1808745dbbb96a");I$("52508a5411274020d3cb3249512bc4f2",function(e,t,i,n,a,o,s,_,r){var c={};o._$cursor=c._$cursor=function(e,n){e=t._$get(e);if(!e)return{start:0,end:0};if(i._$isNumber(n))n={start:n,end:n};if(null!=n){if(null==n.end)n.end=n.start||0;a.__setCursorPosition(e,n)}else n=a.__getCursorPosition(e);return n};o._$coordinate=c._$coordinate=function(e){e=t._$get(e);if(!e)return{top:0,left:0,width:0,height:0};else return a.__getCursorPXPosition(e)};n._$merge(c);if(!0)e.copy(e.P("nej.e"),o);return o},"cb16f42daf02e8bc03f90d7a179f5573","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","b01c677ecd401a2fc164bad715b15e74","84217811d61f8ea4dc99c6adb61930a3");I$("d5e5dc13d9282cb9d04030b15c9ad879",'<textarea name="ntp" id="#<photoBody>">\n  <div class="m-modal m-modal-confirm m-modal-confirmphoto">\n      <div class="modal_dialog">\n          <div class="modal_hd">\n              <h3 class="modal_title">发送图片</h3>\n          </div>\n          <div class="modal_bd">\n              <div class="content j-flag"></div>\n          </div>\n          <div class="modal_ft">\n              <button class="u-btn ok j-flag">发送</button>\n              <button class="u-btn-cancel cancel j-flag">取消</button>\n          </div>\n      </div>\n  </div>\n</textarea>\n<textarea name="jst" id="#<photoList>">\n    {list photos as x}\n    {if x_length>1}\n    <div class="photo-wrap" style="background-image:url(${x.url})">&nbsp;</div>\n    {else}\n    <div class="photo-wrap"><img src="${x.url}"/></div>\n    {/if}\n    {/list}\n</textarea>');I$("b20ced498e3e069fdb0b0e6096f96d68",function(e,t,i,n,a,o,s,_,r,c){r._$$PhotoViewer=e._$klass();c=r._$$PhotoViewer._$extend(n._$$Abstract);c.__reset=function(e){this.__super(e);this.__doInitDomEvent([[this.__nok,"click",this.__onOK._$bind(this)],[this.__ncc,"click",this.__onCC._$bind(this)]]);this.__scrollbar=s._$$Scrollbar._$allocate({parent:this.__lbox});this.__list=e.photos||[];o._$render(this.__lbox,this.__seed_list,{photos:this.__list});this.__doUpdateClass(this.__list.length);this.__nok.focus()};c.__destroy=function(){this.__scrollbar._$recycle();this.__lbox.innerHTML="";delete this.__scrollbar;delete this.__list;this.__super()};c.__initXGui=function(){var e=a._$parseUITemplate(_);return function(){this.__seed_list=e.photoList;this.__seed_html=e.photoBody}}();c.__initNode=function(){this.__super();var e=t._$getByClassName(this.__body,"j-flag");this.__lbox=e[0];this.__nok=e[1];this.__ncc=e[2]};c.__doUpdateClass=function(){var e=["z-second","z-more"];return function(i){var n="";if(2==i)n=e[0];else if(i>2)n=e[1];t._$replaceClassName(this.__lbox.parentNode,e.join(" "),n)}}();c.__onOK=function(){this._$dispatchEvent("onok",{data:this.__list});this._$recycle()};c.__onCC=function(){this._$dispatchEvent("oncc");this._$recycle()};r._$preview=function(e){var t={parent:document.body};r._$$PhotoViewer._$allocate(i._$merge(t,e))}},"e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","d4e947987e24f4ce2260131a04872457","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","186691795a2fc1193976edeb8747c76d","d5e5dc13d9282cb9d04030b15c9ad879");I$("a865d9e40e6aff266eb575ab1adb0693",'<textarea name="ntp" id="#<mdlBody>">\n<div class="m-modal m-modal-confirm m-modal-filetrans">\n    <div class="modal_dialog">\n        <div class="modal_hd">\n            <h3 class="modal_title">发送文件</h3>\n        </div>\n        <div class="modal_bd">\n\t\t\t<ul class="file-list"></ul>\n        </div>\n        <div class="modal_ft">\n            <button class="u-btn ok">确定</button>\n            <button class="u-btn u-btn-cancel cancel">取消</button>\n            <div class="u-error">\n            \t<span class="error-msg"></span>\n            </div>\n        </div>\n    </div>\n</div>\n</textarea>\n\n<textarea name="jst" id="#<fileList>">\n\t{list files as file}\n\t\t<li class="file-item {if file.overSize || file.isZero}z-disabled{/if}">\n\t\t\t<i class="u-icon-${file.name|spliceSuffix} icon"></i>\n\t\t\t<span class="name">${file.name}</span>\n\t\t\t<span class="size">${file.size|fileSizeFormat}</span>\n            {if file.overSize}\n                <span class="file-error">大于100MB无法发送</span>\n            {elseif file.isZero}\n                <span class="file-error">空文件无法发送</span>\n            {/if}\n\t\t</li>\n\t{/list}\n</textarea>\n');I$("9b566f5adaa3cf9da8659a996636b885",function(e,t,i,n,a,o,s,_,r,c,d){c._$$FileModal=e._$klass();d=c._$$FileModal._$extend(a._$$Abstract);d.__init=function(e){this.__super(e);_._$extend({fileSizeFormat:o._$fileSizeFormat,spliceSuffix:o._$spliceSuffix})};d.__reset=function(e){this.__super(e);this.__data=n._$merge({max:9,files:[],isValid:!1},e);this.__data.originFiles=this.__data.files;this.__data.files=Array.prototype.slice.call(this.__data.files);var t=this.__data.files,i=this.__data.max;if(t.length>i)t.splice(i);n._$forEach(t,function(e){if("INPUT"==e.tagName&&e.value)e.name=e.value.match(/[^\/\\]+$/);e.isZero=e.size<=0?!0:!1;e.overSize=e.size>100*Math.pow(1024,2)?!0:!1});this.__onCanSendFile({result:e.canSend});this.__doInitDomEvent([[this.__nok,"click",this.__onOK._$bind(this)],[this.__ncancel,"click",this.__onCancel._$bind(this)]]);this._$addEvent("oncansendfile",this.__onCanSendFile._$bind(this));this.__nok.focus();this.__render()};d.__destroy=function(){this.__super()};d.__initXGui=function(){var e=s._$parseUITemplate(r);return function(){this.__seed_html=e.mdlBody;this.__list_html=e.fileList}}();d.__initNode=function(){this.__super();this.__ntlt=t._$getByClassName(this.__body,"modal_title")[0];this.__nok=t._$getByClassName(this.__body,"ok")[0];this.__ncancel=t._$getByClassName(this.__body,"cancel")[0];this.__nlist=t._$getByClassName(this.__body,"file-list")[0];this.__nerror=t._$getByClassName(this.__body,"u-error")[0]};d.__render=function(){_._$render(this.__nlist,this.__list_html,this.__data)};d.__onOK=function(e){if(this.__data.isValid){var t=this.__getValidateFiles();this._$dispatchEvent("onok",e,t);this._$recycle()}};d.__onCancel=function(e){this._$dispatchEvent("oncancel",e);this._$recycle()};d.__onCanSendFile=function(e){this.__data.canSend=e.result;this.__validate()};d.__getValidateFiles=function(){var e=[];n._$forEach(this.__data.files,function(t){if(!t.overSize&&!t.isZero)e.push(t)});return e};d.__validate=function(){if(this.__getValidateFiles().length>0&&this.__data.canSend){this.__data.isValid=!0;this._$enableOk()}else{this.__data.isValid=!1;this._$disableOk()}var e="";if(0==this.__data.canSend)e="您同一时间段发送文件过多，请稍后再试";else if(this.__data.originFiles.length>this.__data.max)e="一次仅可发送前"+this.__data.max+"个文件";this.__nerror.innerText=e};d._$disableOk=function(){t._$attr(this.__nok,"disabled",!0);t._$addClassName(this.__nok,"z-disabled");t._$style(this.__nok,{color:"#fff"})};d._$enableOk=function(){this.__nok.removeAttribute("disabled");t._$delClassName(this.__nok,"z-disabled");t._$style(this.__nok,{color:"#fff"})}},"e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08","d4e947987e24f4ce2260131a04872457","0439ef8e10bbb734615931acccc290d4","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","a865d9e40e6aff266eb575ab1adb0693");I$("b2737c96b75e405cf55b07d3414e0d1b",function(e,t,i,n,a,o,s,_,r,c){
r._$$FileTransfer=e._$klass();c=r._$$FileTransfer._$extend(a._$$Abstract);c.__init=function(){this.__super()};c.__reset=function(e){this.__super(e);this.__fopt=i._$merge({node:null,accept:"*",multiple:!1,onchange:this.__onFileSelect._$bind(this)},e);if(this.__fopt.node){this.__fileSel=o._$bind(this.__fopt.node,this.__fopt);this._$addEvent("oncansendfile",this.__onCanSendFile._$bind(this))}};c.__destroy=function(){if(this.__fileSel)this.__fileSel._$recycle();this.__super()};c.__onFileSelect=function(e){this.__form=e.form;var i=t._$get(e.id),n=i.files;if(void 0===n){n=[];n.push(i)}this.__fModal=s._$$FileModal._$allocate({parent:document.body,canSend:this.__canSend,files:n,onok:this.__onOk._$bind(this),oncancel:this.__onCancel._$bind(this)});this.__canSend&&delete this.__canSend},c.__onOk=function(e,t){this._$dispatchEvent("onsend",t);this.__form.reset()};c.__onCancel=function(){this.__form.reset()};c.__checkCanSendFile=function(){this.__timestamp=i._$uniqueID();_._$checkCanSendFile({timestamp:this.__timestamp})};c.__onCanSendFile=function(e){this.__canSend=!!e.result;if(this.__fModal)this.__fModal._$dispatchEvent("oncansendfile",{result:this.__canSend})}},"e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","4cd67180df9ce322f7a6a6207080bbc9","d4e947987e24f4ce2260131a04872457","940fa04144ba9d08b57524738e940640","9b566f5adaa3cf9da8659a996636b885","6cabb143c99287da4b40b5b45f0c77e4");I$("921289b39d48691eb7f7f6e3f7755e42",'<textarea name="ntp" id="#<cnt>">\n  <div class="f-dn">\n  \t<div class="j-flag portrait_cnt"></div>\n  </div>\n</textarea>\n\n<textarea name="jst" id="#<list>">\n\t<div class="portrait_list f-clr j-list">\n\t\t{list plist as p}\n\t\t<!-- 行开始 -->\n\t\t{if (p_index + 1) % col === 1}\n\t\t<ul class="f-clr">\n\t\t{/if}\n\t\t<!-- 行开始end -->\n\t\t\t<li><i class="portrait_img portrait_icon_${p.file|reduceExt}" data-src="${prefix}${p.file}" data-id="${p.id}" title="${p.tag}" alt="${p.tag}"></i></li>\n\t\t<!-- 行结束 -->\n\t\t{if p_index % col === col-1}\n\t\t</ul>\n\t\t{/if}\n\t\t<!-- 行结束end -->\n\t\t{/list}\n\t</div>\n</textarea>');I$("30cf1ce66c96e658b40ece8275ce9b4f",{plist:[{id:"emoticon_emoji_01",tag:"[可爱]",file:"emoji_01.png"},{id:"emoticon_emoji_0",tag:"[大笑]",file:"emoji_00.png"},{id:"emoticon_emoji_02",tag:"[色]",file:"emoji_02.png"},{id:"emoticon_emoji_03",tag:"[嘘]",file:"emoji_03.png"},{id:"emoticon_emoji_04",tag:"[亲]",file:"emoji_04.png"},{id:"emoticon_emoji_05",tag:"[呆]",file:"emoji_05.png"},{id:"emoticon_emoji_06",tag:"[口水]",file:"emoji_06.png"},{id:"emoticon_emoji_145",tag:"[汗]",file:"emoji_145.png"},{id:"emoticon_emoji_07",tag:"[呲牙]",file:"emoji_07.png"},{id:"emoticon_emoji_08",tag:"[鬼脸]",file:"emoji_08.png"},{id:"emoticon_emoji_09",tag:"[害羞]",file:"emoji_09.png"},{id:"emoticon_emoji_10",tag:"[偷笑]",file:"emoji_10.png"},{id:"emoticon_emoji_11",tag:"[调皮]",file:"emoji_11.png"},{id:"emoticon_emoji_12",tag:"[可怜]",file:"emoji_12.png"},{id:"emoticon_emoji_13",tag:"[敲]",file:"emoji_13.png"},{id:"emoticon_emoji_14",tag:"[惊讶]",file:"emoji_14.png"},{id:"emoticon_emoji_15",tag:"[流感]",file:"emoji_15.png"},{id:"emoticon_emoji_16",tag:"[委屈]",file:"emoji_16.png"},{id:"emoticon_emoji_17",tag:"[流泪]",file:"emoji_17.png"},{id:"emoticon_emoji_18",tag:"[嚎哭]",file:"emoji_18.png"},{id:"emoticon_emoji_19",tag:"[惊恐]",file:"emoji_19.png"},{id:"emoticon_emoji_20",tag:"[怒]",file:"emoji_20.png"},{id:"emoticon_emoji_21",tag:"[酷]",file:"emoji_21.png"},{id:"emoticon_emoji_22",tag:"[不说]",file:"emoji_22.png"},{id:"emoticon_emoji_23",tag:"[鄙视]",file:"emoji_23.png"},{id:"emoticon_emoji_24",tag:"[阿弥陀佛]",file:"emoji_24.png"},{id:"emoticon_emoji_25",tag:"[奸笑]",file:"emoji_25.png"},{id:"emoticon_emoji_26",tag:"[睡着]",file:"emoji_26.png"},{id:"emoticon_emoji_27",tag:"[口罩]",file:"emoji_27.png"},{id:"emoticon_emoji_28",tag:"[生气]",file:"emoji_28.png"},{id:"emoticon_emoji_29",tag:"[抠鼻孔]",file:"emoji_29.png"},{id:"emoticon_emoji_30",tag:"[疑问]",file:"emoji_30.png"},{id:"emoticon_emoji_31",tag:"[怒骂]",file:"emoji_31.png"},{id:"emoticon_emoji_32",tag:"[晕]",file:"emoji_32.png"},{id:"emoticon_emoji_33",tag:"[呕吐]",file:"emoji_33.png"},{id:"emoticon_emoji_160",tag:"[拜一拜]",file:"emoji_160.png"},{id:"emoticon_emoji_161",tag:"[惊喜]",file:"emoji_161.png"},{id:"emoticon_emoji_162",tag:"[流汗]",file:"emoji_162.png"},{id:"emoticon_emoji_163",tag:"[卖萌]",file:"emoji_163.png"},{id:"emoticon_emoji_164",tag:"[默契眨眼]",file:"emoji_164.png"},{id:"emoticon_emoji_165",tag:"[烧香拜佛]",file:"emoji_165.png"},{id:"emoticon_emoji_166",tag:"[晚安]",file:"emoji_166.png"},{id:"emoticon_emoji_116",tag:"[撇嘴]",file:"new_emoji_01.png"},{id:"emoticon_emoji_117",tag:"[难过]",file:"1f641.png"},{id:"emoticon_emoji_118",tag:"[冷汗]",file:"1f628.png"},{id:"emoticon_emoji_119",tag:"[抓狂]",file:"1f629.png"},{id:"emoticon_emoji_120",tag:"[傲慢]",file:"1f615.png"},{id:"emoticon_emoji_121",tag:"[困]",file:"1f62a.png"},{id:"emoticon_emoji_123",tag:"[疯了]",file:"1f616.png"},{id:"emoticon_emoji_124",tag:"[白眼]",file:"new_emoji_02.png"},{id:"emoticon_emoji_125",tag:"[衰]",file:"new_emoji_05.png"},{id:"emoticon_emoji_126",tag:"[再见]",file:"new_emoji_06.png"},{id:"emoticon_emoji_127",tag:"[哼哼]",file:"1f63e.png"},{id:"emoticon_emoji_129",tag:"[饥饿]",file:"new_emoji_03.png"},{id:"emoticon_emoji_143",tag:"[飞吻]",file:"new_emoji_10.png"},{id:"emoticon_emoji_144",tag:"[微笑]",file:"1f642.png"},{id:"emoticon_emoji_145",tag:"[泪中带笑]",file:"new_emoji_13.png"},{id:"emoticon_emoji_146",tag:"[吐舌头]",file:"1f61d.png"},{id:"emoticon_emoji_147",tag:"[忧郁]",file:"new_emoji_11.png"},{id:"emoticon_emoji_148",tag:"[尴尬]",file:"1f630.png"},{id:"emoticon_emoji_149",tag:"[舒适]",file:"1f60c.png"},{id:"emoticon_emoji_150",tag:"[不悦]",file:"1f612.png"},{id:"emoticon_emoji_155",tag:"[拍掌]",file:"new_emoji_09.png"},{id:"emoticon_emoji_156",tag:"[糗大了]",file:"new_emoji_07.png"},{id:"emoticon_emoji_122",tag:"[奋斗]",file:"1f4aa-1f3fc.png"},{id:"emoticon_emoji_130",tag:"[乒乓]",file:"new_emoji_23.png"},{id:"emoticon_emoji_131",tag:"[猪头]",file:"1f437.png"},{id:"emoticon_emoji_132",tag:"[玫瑰]",file:"new_emoji_25.png"},{id:"emoticon_emoji_133",tag:"[凋谢]",file:"new_emoji_24.png"},{id:"emoticon_emoji_134",tag:"[瓢虫]",file:"1f41e.png"},{id:"emoticon_emoji_135",tag:"[月亮]",file:"new_emoji_30.png"},{id:"emoticon_emoji_136",tag:"[礼物]",file:"new_emoji_28.png"},{id:"emoticon_emoji_137",tag:"[拥抱]",file:"new_emoji_08.png"},{id:"emoticon_emoji_138",tag:"[抱拳]",file:"new_emoji_18.png"},{id:"emoticon_emoji_139",tag:"[勾引]",file:"new_emoji_19.png"},{id:"emoticon_emoji_140",tag:"[差劲]",file:"new_emoji_20.png"},{id:"emoticon_emoji_141",tag:"[爱你]",file:"new_emoji_21.png"},{id:"emoticon_emoji_142",tag:"[NO]",file:"new_emoji_22.png"},{id:"emoticon_emoji_151",tag:"[幽灵]",file:"1f47b.png"},{id:"emoticon_emoji_152",tag:"[礼盒]",file:"1f49d.png"},{id:"emoticon_emoji_153",tag:"[拜托]",file:"1f64f-1f3fc.png"},{id:"emoticon_emoji_154",tag:"[气球]",file:"1f388.png"},{id:"emoticon_emoji_34",tag:"[强]",file:"emoji_34.png"},{id:"emoticon_emoji_35",tag:"[弱]",file:"emoji_35.png"},{id:"emoticon_emoji_36",tag:"[OK]",file:"emoji_36.png"},{id:"emoticon_emoji_37",tag:"[拳头]",file:"emoji_37.png"},{id:"emoticon_emoji_38",tag:"[胜利]",file:"emoji_38.png"},{id:"emoticon_emoji_39",tag:"[鼓掌]",file:"emoji_39.png"},{id:"emoticon_emoji_167",tag:"[握手]",file:"emoji_167.png"},{id:"emoticon_emoji_40",tag:"[发怒]",file:"emoji_40.png"},{id:"emoticon_emoji_41",tag:"[骷髅]",file:"emoji_41.png"},{id:"emoticon_emoji_42",tag:"[便便]",file:"emoji_42.png"},{id:"emoticon_emoji_43",tag:"[火]",file:"emoji_43.png"},{id:"emoticon_emoji_44",tag:"[溜]",file:"emoji_44.png"},{id:"emoticon_emoji_45",tag:"[爱心]",file:"emoji_45.png"},{id:"emoticon_emoji_46",tag:"[心碎]",file:"emoji_46.png"},{id:"emoticon_emoji_47",tag:"[钟情]",file:"emoji_47.png"},{id:"emoticon_emoji_48",tag:"[唇]",file:"emoji_48.png"},{id:"emoticon_emoji_49",tag:"[戒指]",file:"emoji_49.png"},{id:"emoticon_emoji_50",tag:"[钻石]",file:"emoji_50.png"},{id:"emoticon_emoji_51",tag:"[太阳]",file:"emoji_51.png"},{id:"emoticon_emoji_52",tag:"[有时晴]",file:"emoji_52.png"},{id:"emoticon_emoji_53",tag:"[多云]",file:"emoji_53.png"},{id:"emoticon_emoji_54",tag:"[雷]",file:"emoji_54.png"},{id:"emoticon_emoji_55",tag:"[雨]",file:"emoji_55.png"},{id:"emoticon_emoji_56",tag:"[雪花]",file:"emoji_56.png"},{id:"emoticon_emoji_57",tag:"[爱人]",file:"emoji_57.png"},{id:"emoticon_emoji_58",tag:"[帽子]",file:"emoji_58.png"},{id:"emoticon_emoji_59",tag:"[皇冠]",file:"emoji_59.png"},{id:"emoticon_emoji_60",tag:"[篮球]",file:"emoji_60.png"},{id:"emoticon_emoji_61",tag:"[足球]",file:"emoji_61.png"},{id:"emoticon_emoji_62",tag:"[垒球]",file:"emoji_62.png"},{id:"emoticon_emoji_63",tag:"[网球]",file:"emoji_63.png"},{id:"emoticon_emoji_64",tag:"[台球]",file:"emoji_64.png"},{id:"emoticon_emoji_65",tag:"[咖啡]",file:"emoji_65.png"},{id:"emoticon_emoji_66",tag:"[啤酒]",file:"emoji_66.png"},{id:"emoticon_emoji_67",tag:"[干杯]",file:"emoji_67.png"},{id:"emoticon_emoji_68",tag:"[柠檬汁]",file:"emoji_68.png"},{id:"emoticon_emoji_69",tag:"[餐具]",file:"emoji_69.png"},{id:"emoticon_emoji_70",tag:"[汉堡]",file:"emoji_70.png"},{id:"emoticon_emoji_71",tag:"[鸡腿]",file:"emoji_71.png"},{id:"emoticon_emoji_72",tag:"[面条]",file:"emoji_72.png"},{id:"emoticon_emoji_73",tag:"[冰淇淋]",file:"emoji_73.png"},{id:"emoticon_emoji_74",tag:"[沙冰]",file:"emoji_74.png"},{id:"emoticon_emoji_75",tag:"[生日蛋糕]",file:"emoji_75.png"},{id:"emoticon_emoji_76",tag:"[蛋糕]",file:"emoji_76.png"},{id:"emoticon_emoji_77",tag:"[糖果]",file:"emoji_77.png"},{id:"emoticon_emoji_78",tag:"[葡萄]",file:"emoji_78.png"},{id:"emoticon_emoji_79",tag:"[西瓜]",file:"emoji_79.png"},{id:"emoticon_emoji_80",tag:"[光碟]",file:"emoji_80.png"},{id:"emoticon_emoji_81",tag:"[手机]",file:"emoji_81.png"},{id:"emoticon_emoji_82",tag:"[电话]",file:"emoji_82.png"},{id:"emoticon_emoji_83",tag:"[电视]",file:"emoji_83.png"},{id:"emoticon_emoji_84",tag:"[声音开启]",file:"emoji_84.png"},{id:"emoticon_emoji_85",tag:"[声音关闭]",file:"emoji_85.png"},{id:"emoticon_emoji_86",tag:"[铃铛]",file:"emoji_86.png"},{id:"emoticon_emoji_87",tag:"[锁头]",file:"emoji_87.png"},{id:"emoticon_emoji_88",tag:"[放大镜]",file:"emoji_88.png"},{id:"emoticon_emoji_89",
tag:"[灯泡]",file:"emoji_89.png"},{id:"emoticon_emoji_90",tag:"[锤头]",file:"emoji_90.png"},{id:"emoticon_emoji_91",tag:"[烟]",file:"emoji_91.png"},{id:"emoticon_emoji_92",tag:"[炸弹]",file:"emoji_92.png"},{id:"emoticon_emoji_93",tag:"[枪]",file:"emoji_93.png"},{id:"emoticon_emoji_94",tag:"[刀]",file:"emoji_94.png"},{id:"emoticon_emoji_95",tag:"[药]",file:"emoji_95.png"},{id:"emoticon_emoji_96",tag:"[打针]",file:"emoji_96.png"},{id:"emoticon_emoji_97",tag:"[钱袋]",file:"emoji_97.png"},{id:"emoticon_emoji_98",tag:"[钞票]",file:"emoji_98.png"},{id:"emoticon_emoji_99",tag:"[银行卡]",file:"emoji_99.png"},{id:"emoticon_emoji_100",tag:"[手柄]",file:"emoji_100.png"},{id:"emoticon_emoji_101",tag:"[麻将]",file:"emoji_101.png"},{id:"emoticon_emoji_102",tag:"[调色板]",file:"emoji_102.png"},{id:"emoticon_emoji_103",tag:"[电影]",file:"emoji_103.png"},{id:"emoticon_emoji_104",tag:"[麦克风]",file:"emoji_104.png"},{id:"emoticon_emoji_105",tag:"[耳机]",file:"emoji_105.png"},{id:"emoticon_emoji_106",tag:"[音乐]",file:"emoji_106.png"},{id:"emoticon_emoji_107",tag:"[吉他]",file:"emoji_107.png"},{id:"emoticon_emoji_108",tag:"[火箭]",file:"emoji_108.png"},{id:"emoticon_emoji_109",tag:"[飞机]",file:"emoji_109.png"},{id:"emoticon_emoji_110",tag:"[火车]",file:"emoji_110.png"},{id:"emoticon_emoji_111",tag:"[公交]",file:"emoji_111.png"},{id:"emoticon_emoji_112",tag:"[轿车]",file:"emoji_112.png"},{id:"emoticon_emoji_113",tag:"[出租车]",file:"emoji_113.png"},{id:"emoticon_emoji_114",tag:"[警车]",file:"emoji_114.png"},{id:"emoticon_emoji_115",tag:"[自行车]",file:"emoji_115.png"}],pmap:{emoticon_emoji_01:{tag:"[可爱]",file:"emoji_01.png"},emoticon_emoji_00:{tag:"[大笑]",file:"emoji_00.png"},emoticon_emoji_02:{tag:"[色]",file:"emoji_02.png"},emoticon_emoji_03:{tag:"[嘘]",file:"emoji_03.png"},emoticon_emoji_04:{tag:"[亲]",file:"emoji_04.png"},emoticon_emoji_05:{tag:"[呆]",file:"emoji_05.png"},emoticon_emoji_06:{tag:"[口水]",file:"emoji_06.png"},emoticon_emoji_145:{tag:"[汗]",file:"emoji_145.png"},emoticon_emoji_07:{tag:"[呲牙]",file:"emoji_07.png"},emoticon_emoji_08:{tag:"[鬼脸]",file:"emoji_08.png"},emoticon_emoji_09:{tag:"[害羞]",file:"emoji_09.png"},emoticon_emoji_10:{tag:"[偷笑]",file:"emoji_10.png"},emoticon_emoji_11:{tag:"[调皮]",file:"emoji_11.png"},emoticon_emoji_12:{tag:"[可怜]",file:"emoji_12.png"},emoticon_emoji_13:{tag:"[敲]",file:"emoji_13.png"},emoticon_emoji_14:{tag:"[惊讶]",file:"emoji_14.png"},emoticon_emoji_15:{tag:"[流感]",file:"emoji_15.png"},emoticon_emoji_16:{tag:"[委屈]",file:"emoji_16.png"},emoticon_emoji_17:{tag:"[流泪]",file:"emoji_17.png"},emoticon_emoji_18:{tag:"[嚎哭]",file:"emoji_18.png"},emoticon_emoji_19:{tag:"[惊恐]",file:"emoji_19.png"},emoticon_emoji_20:{tag:"[怒]",file:"emoji_20.png"},emoticon_emoji_21:{tag:"[酷]",file:"emoji_21.png"},emoticon_emoji_22:{tag:"[不说]",file:"emoji_22.png"},emoticon_emoji_23:{tag:"[鄙视]",file:"emoji_23.png"},emoticon_emoji_24:{tag:"[阿弥陀佛]",file:"emoji_24.png"},emoticon_emoji_25:{tag:"[奸笑]",file:"emoji_25.png"},emoticon_emoji_26:{tag:"[睡着]",file:"emoji_26.png"},emoticon_emoji_27:{tag:"[口罩]",file:"emoji_27.png"},emoticon_emoji_28:{tag:"[生气]",file:"emoji_28.png"},emoticon_emoji_29:{tag:"[抠鼻孔]",file:"emoji_29.png"},emoticon_emoji_30:{tag:"[疑问]",file:"emoji_30.png"},emoticon_emoji_31:{tag:"[怒骂]",file:"emoji_31.png"},emoticon_emoji_32:{tag:"[晕]",file:"emoji_32.png"},emoticon_emoji_33:{tag:"[呕吐]",file:"emoji_33.png"},emoticon_emoji_160:{tag:"[拜一拜]",file:"emoji_160.png"},emoticon_emoji_161:{tag:"[惊喜]",file:"emoji_161.png"},emoticon_emoji_162:{tag:"[流汗]",file:"emoji_162.png"},emoticon_emoji_163:{tag:"[卖萌]",file:"emoji_163.png"},emoticon_emoji_164:{tag:"[默契眨眼]",file:"emoji_164.png"},emoticon_emoji_165:{tag:"[烧香拜佛]",file:"emoji_165.png"},emoticon_emoji_166:{tag:"[晚安]",file:"emoji_166.png"},emoticon_emoji_34:{tag:"[强]",file:"emoji_34.png"},emoticon_emoji_35:{tag:"[弱]",file:"emoji_35.png"},emoticon_emoji_36:{tag:"[OK]",file:"emoji_36.png"},emoticon_emoji_37:{tag:"[拳头]",file:"emoji_37.png"},emoticon_emoji_38:{tag:"[胜利]",file:"emoji_38.png"},emoticon_emoji_39:{tag:"[鼓掌]",file:"emoji_39.png"},emoticon_emoji_200:{tag:"[握手]",file:"emoji_200.png"},emoticon_emoji_40:{tag:"[发怒]",file:"emoji_40.png"},emoticon_emoji_41:{tag:"[骷髅]",file:"emoji_41.png"},emoticon_emoji_42:{tag:"[便便]",file:"emoji_42.png"},emoticon_emoji_43:{tag:"[火]",file:"emoji_43.png"},emoticon_emoji_44:{tag:"[溜]",file:"emoji_44.png"},emoticon_emoji_45:{tag:"[爱心]",file:"emoji_45.png"},emoticon_emoji_46:{tag:"[心碎]",file:"emoji_46.png"},emoticon_emoji_47:{tag:"[钟情]",file:"emoji_47.png"},emoticon_emoji_48:{tag:"[唇]",file:"emoji_48.png"},emoticon_emoji_49:{tag:"[戒指]",file:"emoji_49.png"},emoticon_emoji_50:{tag:"[钻石]",file:"emoji_50.png"},emoticon_emoji_51:{tag:"[太阳]",file:"emoji_51.png"},emoticon_emoji_52:{tag:"[有时晴]",file:"emoji_52.png"},emoticon_emoji_53:{tag:"[多云]",file:"emoji_53.png"},emoticon_emoji_54:{tag:"[雷]",file:"emoji_54.png"},emoticon_emoji_55:{tag:"[雨]",file:"emoji_55.png"},emoticon_emoji_56:{tag:"[雪花]",file:"emoji_56.png"},emoticon_emoji_57:{tag:"[爱人]",file:"emoji_57.png"},emoticon_emoji_58:{tag:"[帽子]",file:"emoji_58.png"},emoticon_emoji_59:{tag:"[皇冠]",file:"emoji_59.png"},emoticon_emoji_60:{tag:"[篮球]",file:"emoji_60.png"},emoticon_emoji_61:{tag:"[足球]",file:"emoji_61.png"},emoticon_emoji_62:{tag:"[垒球]",file:"emoji_62.png"},emoticon_emoji_63:{tag:"[网球]",file:"emoji_63.png"},emoticon_emoji_64:{tag:"[台球]",file:"emoji_64.png"},emoticon_emoji_65:{tag:"[咖啡]",file:"emoji_65.png"},emoticon_emoji_66:{tag:"[啤酒]",file:"emoji_66.png"},emoticon_emoji_67:{tag:"[干杯]",file:"emoji_67.png"},emoticon_emoji_68:{tag:"[柠檬汁]",file:"emoji_68.png"},emoticon_emoji_69:{tag:"[餐具]",file:"emoji_69.png"},emoticon_emoji_70:{tag:"[汉堡]",file:"emoji_70.png"},emoticon_emoji_71:{tag:"[鸡腿]",file:"emoji_71.png"},emoticon_emoji_72:{tag:"[面条]",file:"emoji_72.png"},emoticon_emoji_73:{tag:"[冰淇淋]",file:"emoji_73.png"},emoticon_emoji_74:{tag:"[沙冰]",file:"emoji_74.png"},emoticon_emoji_75:{tag:"[生日蛋糕]",file:"emoji_75.png"},emoticon_emoji_76:{tag:"[蛋糕]",file:"emoji_76.png"},emoticon_emoji_77:{tag:"[糖果]",file:"emoji_77.png"},emoticon_emoji_78:{tag:"[葡萄]",file:"emoji_78.png"},emoticon_emoji_79:{tag:"[西瓜]",file:"emoji_79.png"},emoticon_emoji_80:{tag:"[光碟]",file:"emoji_80.png"},emoticon_emoji_81:{tag:"[手机]",file:"emoji_81.png"},emoticon_emoji_82:{tag:"[电话]",file:"emoji_82.png"},emoticon_emoji_83:{tag:"[电视]",file:"emoji_83.png"},emoticon_emoji_84:{tag:"[声音开启]",file:"emoji_84.png"},emoticon_emoji_85:{tag:"[声音关闭]",file:"emoji_85.png"},emoticon_emoji_86:{tag:"[铃铛]",file:"emoji_86.png"},emoticon_emoji_87:{tag:"[锁头]",file:"emoji_87.png"},emoticon_emoji_88:{tag:"[放大镜]",file:"emoji_88.png"},emoticon_emoji_89:{tag:"[灯泡]",file:"emoji_89.png"},emoticon_emoji_90:{tag:"[锤头]",file:"emoji_90.png"},emoticon_emoji_91:{tag:"[烟]",file:"emoji_91.png"},emoticon_emoji_92:{tag:"[炸弹]",file:"emoji_92.png"},emoticon_emoji_93:{tag:"[枪]",file:"emoji_93.png"},emoticon_emoji_94:{tag:"[刀]",file:"emoji_94.png"},emoticon_emoji_95:{tag:"[药]",file:"emoji_95.png"},emoticon_emoji_96:{tag:"[打针]",file:"emoji_96.png"},emoticon_emoji_97:{tag:"[钱袋]",file:"emoji_97.png"},emoticon_emoji_98:{tag:"[钞票]",file:"emoji_98.png"},emoticon_emoji_99:{tag:"[银行卡]",file:"emoji_99.png"},emoticon_emoji_100:{tag:"[手柄]",file:"emoji_100.png"},emoticon_emoji_101:{tag:"[麻将]",file:"emoji_101.png"},emoticon_emoji_102:{tag:"[调色板]",file:"emoji_102.png"},emoticon_emoji_103:{tag:"[电影]",file:"emoji_103.png"},emoticon_emoji_104:{tag:"[麦克风]",file:"emoji_104.png"},emoticon_emoji_105:{tag:"[耳机]",file:"emoji_105.png"},emoticon_emoji_106:{tag:"[音乐]",file:"emoji_106.png"},emoticon_emoji_107:{tag:"[吉他]",file:"emoji_107.png"},emoticon_emoji_108:{tag:"[火箭]",file:"emoji_108.png"},emoticon_emoji_109:{tag:"[飞机]",file:"emoji_109.png"},emoticon_emoji_110:{tag:"[火车]",file:"emoji_110.png"},emoticon_emoji_111:{tag:"[公交]",file:"emoji_111.png"},emoticon_emoji_112:{tag:"[轿车]",file:"emoji_112.png"},emoticon_emoji_113:{tag:"[出租车]",file:"emoji_113.png"},emoticon_emoji_114:{tag:"[警车]",file:"emoji_114.png"},emoticon_emoji_115:{tag:"[自行车]",file:"emoji_115.png"},emoticon_emoji_116:{tag:"[撇嘴]",file:"new_emoji_01.png"},emoticon_emoji_117:{tag:"[难过]",file:"1f641.png"},emoticon_emoji_118:{tag:"[冷汗]",file:"1f628.png"},emoticon_emoji_119:{tag:"[抓狂]",file:"1f629.png"},emoticon_emoji_120:{tag:"[傲慢]",file:"1f615.png"},emoticon_emoji_121:{tag:"[困]",file:"1f62a.png"},emoticon_emoji_122:{tag:"[疯了]",file:"1f616.png"},emoticon_emoji_123:{tag:"[奋斗]",file:"1f4aa-1f3fc.png"},emoticon_emoji_124:{tag:"[白眼]",file:"new_emoji_02.png"},emoticon_emoji_125:{tag:"[衰]",file:"new_emoji_05.png"},emoticon_emoji_126:{tag:"[再见]",file:"new_emoji_06.png"},emoticon_emoji_127:{tag:"[哼哼]",file:"1f63e.png"},emoticon_emoji_128:{tag:"[阴险]",file:"1f608.png"},emoticon_emoji_129:{tag:"[饥饿]",file:"new_emoji_03.png"},emoticon_emoji_130:{tag:"[乒乓]",file:"new_emoji_23.png"},emoticon_emoji_131:{tag:"[猪头]",file:"1f437.png"},emoticon_emoji_132:{tag:"[玫瑰]",file:"new_emoji_25.png"},emoticon_emoji_133:{tag:"[凋谢]",file:"new_emoji_24.png"},emoticon_emoji_134:{tag:"[瓢虫]",file:"1f41e.png"},emoticon_emoji_135:{tag:"[月亮]",file:"new_emoji_30.png"},emoticon_emoji_136:{tag:"[礼物]",file:"new_emoji_28.png"},emoticon_emoji_137:{tag:"[拥抱]",file:"new_emoji_08.png"},emoticon_emoji_138:{tag:"[抱拳]",file:"new_emoji_18.png"},emoticon_emoji_139:{tag:"[勾引]",file:"new_emoji_19.png"},emoticon_emoji_140:{tag:"[差劲]",file:"new_emoji_20.png"},emoticon_emoji_141:{tag:"[爱你]",file:"new_emoji_21.png"},emoticon_emoji_142:{tag:"[NO]",file:"new_emoji_22.png"},emoticon_emoji_143:{tag:"[飞吻]",file:"new_emoji_10.png"},emoticon_emoji_144:{tag:"[微笑]",file:"1f642.png"},emoticon_emoji_146:{tag:"[吐舌头]",file:"1f61d.png"},emoticon_emoji_147:{tag:"[忧郁]",file:"new_emoji_11.png"},emoticon_emoji_148:{tag:"[尴尬]",file:"1f630.png"},emoticon_emoji_149:{tag:"[舒适]",file:"1f60c.png"},emoticon_emoji_150:{tag:"[不悦]",file:"1f612.png"},emoticon_emoji_151:{tag:"[幽灵]",file:"1f47b.png"},emoticon_emoji_152:{tag:"[礼盒]",file:"1f49d.png"},emoticon_emoji_153:{tag:"[拜托]",file:"1f64f-1f3fc.png"},emoticon_emoji_154:{tag:"[气球]",file:"1f388.png"},emoticon_emoji_155:{tag:"[拍掌]",file:"new_emoji_09.png"
},emoticon_emoji_156:{tag:"[泪中带笑]",file:"1f602.png"},emoticon_emoji_157:{tag:"[糗大了]",file:"new_emoji_07.png"}},pmap2:{"[大笑]":"emoticon_emoji_00","[可爱]":"emoticon_emoji_01","[色]":"emoticon_emoji_02","[嘘]":"emoticon_emoji_03","[亲]":"emoticon_emoji_04","[呆]":"emoticon_emoji_05","[口水]":"emoticon_emoji_06","[汗]":"emoticon_emoji_145","[呲牙]":"emoticon_emoji_07","[鬼脸]":"emoticon_emoji_08","[害羞]":"emoticon_emoji_09","[偷笑]":"emoticon_emoji_10","[调皮]":"emoticon_emoji_11","[可怜]":"emoticon_emoji_12","[敲]":"emoticon_emoji_13","[惊讶]":"emoticon_emoji_14","[流感]":"emoticon_emoji_15","[委屈]":"emoticon_emoji_16","[流泪]":"emoticon_emoji_17","[嚎哭]":"emoticon_emoji_18","[惊恐]":"emoticon_emoji_19","[怒]":"emoticon_emoji_20","[酷]":"emoticon_emoji_21","[不说]":"emoticon_emoji_22","[鄙视]":"emoticon_emoji_23","[阿弥陀佛]":"emoticon_emoji_24","[奸笑]":"emoticon_emoji_25","[睡着]":"emoticon_emoji_26","[口罩]":"emoticon_emoji_27","[生气]":"emoticon_emoji_28","[抠鼻孔]":"emoticon_emoji_29","[疑问]":"emoticon_emoji_30","[怒骂]":"emoticon_emoji_31","[晕]":"emoticon_emoji_32","[呕吐]":"emoticon_emoji_33","[拜一拜]":"emoticon_emoji_160","[惊喜]":"emoticon_emoji_161","[流汗]":"emoticon_emoji_162","[卖萌]":"emoticon_emoji_163","[默契眨眼]":"emoticon_emoji_164","[烧香拜佛]":"emoticon_emoji_165","[晚安]":"emoticon_emoji_166","[强]":"emoticon_emoji_34","[弱]":"emoticon_emoji_35","[OK]":"emoticon_emoji_36","[拳头]":"emoticon_emoji_37","[胜利]":"emoticon_emoji_38","[鼓掌]":"emoticon_emoji_39","[握手]":"emoticon_emoji_200","[发怒]":"emoticon_emoji_40","[骷髅]":"emoticon_emoji_41","[便便]":"emoticon_emoji_42","[火]":"emoticon_emoji_43","[溜]":"emoticon_emoji_44","[爱心]":"emoticon_emoji_45","[心碎]":"emoticon_emoji_46","[钟情]":"emoticon_emoji_47","[唇]":"emoticon_emoji_48","[戒指]":"emoticon_emoji_49","[钻石]":"emoticon_emoji_50","[太阳]":"emoticon_emoji_51","[有时晴]":"emoticon_emoji_52","[多云]":"emoticon_emoji_53","[雷]":"emoticon_emoji_54","[雨]":"emoticon_emoji_55","[雪花]":"emoticon_emoji_56","[爱人]":"emoticon_emoji_57","[帽子]":"emoticon_emoji_58","[皇冠]":"emoticon_emoji_59","[篮球]":"emoticon_emoji_60","[足球]":"emoticon_emoji_61","[垒球]":"emoticon_emoji_62","[网球]":"emoticon_emoji_63","[台球]":"emoticon_emoji_64","[咖啡]":"emoticon_emoji_65","[啤酒]":"emoticon_emoji_66","[干杯]":"emoticon_emoji_67","[柠檬汁]":"emoticon_emoji_68","[餐具]":"emoticon_emoji_69","[汉堡]":"emoticon_emoji_70","[鸡腿]":"emoticon_emoji_71","[面条]":"emoticon_emoji_72","[冰淇淋]":"emoticon_emoji_73","[沙冰]":"emoticon_emoji_74","[生日蛋糕]":"emoticon_emoji_75","[蛋糕]":"emoticon_emoji_76","[糖果]":"emoticon_emoji_77","[葡萄]":"emoticon_emoji_78","[西瓜]":"emoticon_emoji_79","[光碟]":"emoticon_emoji_80","[手机]":"emoticon_emoji_81","[电话]":"emoticon_emoji_82","[电视]":"emoticon_emoji_83","[声音开启]":"emoticon_emoji_84","[声音关闭]":"emoticon_emoji_85","[铃铛]":"emoticon_emoji_86","[锁头]":"emoticon_emoji_87","[放大镜]":"emoticon_emoji_88","[灯泡]":"emoticon_emoji_89","[锤头]":"emoticon_emoji_90","[烟]":"emoticon_emoji_91","[炸弹]":"emoticon_emoji_92","[枪]":"emoticon_emoji_93","[刀]":"emoticon_emoji_94","[药]":"emoticon_emoji_95","[打针]":"emoticon_emoji_96","[钱袋]":"emoticon_emoji_97","[钞票]":"emoticon_emoji_98","[银行卡]":"emoticon_emoji_99","[手柄]":"emoticon_emoji_100","[麻将]":"emoticon_emoji_101","[调色板]":"emoticon_emoji_102","[电影]":"emoticon_emoji_103","[麦克风]":"emoticon_emoji_104","[耳机]":"emoticon_emoji_105","[音乐]":"emoticon_emoji_106","[吉他]":"emoticon_emoji_107","[火箭]":"emoticon_emoji_108","[飞机]":"emoticon_emoji_109","[火车]":"emoticon_emoji_110","[公交]":"emoticon_emoji_111","[轿车]":"emoticon_emoji_112","[出租车]":"emoticon_emoji_113","[警车]":"emoticon_emoji_114","[自行车]":"emoticon_emoji_115","[撇嘴]":"emoticon_emoji_116","[难过]":"emoticon_emoji_117","[冷汗]":"emoticon_emoji_118","[抓狂]":"emoticon_emoji_119","[傲慢]":"emoticon_emoji_120","[困]":"emoticon_emoji_121","[疯了]":"emoticon_emoji_122","[奋斗]":"emoticon_emoji_123","[白眼]":"emoticon_emoji_124","[衰]":"emoticon_emoji_125","[再见]":"emoticon_emoji_126","[哼哼]":"emoticon_emoji_127","[阴险]":"emoticon_emoji_128","[饥饿]":"emoticon_emoji_129","[乒乓]":"emoticon_emoji_130","[猪头]":"emoticon_emoji_131","[玫瑰]":"emoticon_emoji_132","[凋谢]":"emoticon_emoji_133","[瓢虫]":"emoticon_emoji_134","[月亮]":"emoticon_emoji_135","[礼物]":"emoticon_emoji_136","[拥抱]":"emoticon_emoji_137","[抱拳]":"emoticon_emoji_138","[勾引]":"emoticon_emoji_139","[差劲]":"emoticon_emoji_140","[爱你]":"emoticon_emoji_141","[NO]":"emoticon_emoji_142","[飞吻]":"emoticon_emoji_143","[微笑]":"emoticon_emoji_144","[吐舌头]":"emoticon_emoji_146","[忧郁]":"emoticon_emoji_147","[尴尬]":"emoticon_emoji_148","[舒适]":"emoticon_emoji_149","[不悦]":"emoticon_emoji_150","[幽灵]":"emoticon_emoji_151","[礼盒]":"emoticon_emoji_152","[拜托]":"emoticon_emoji_153","[气球]":"emoticon_emoji_154","[拍掌]":"emoticon_emoji_155","[泪中带笑]":"emoticon_emoji_156","[糗大了]":"emoticon_emoji_157"}});I$("8fd72c7e0540f7cdb299f6ddb8bbd1ab",function(e,t,i,n,a,o,s,_,r,c,d,l){var f="PORTRAIT_"+n._$uniqueID(),u=appConfig.path.sdk+"res/portrait/emoji/";d._$$Portrait=e._$klass();l=d._$$Portrait._$extend(s._$$Abstract);l.__init=function(){this.__super();o._$extend({reduceExt:function(e){return e.substr(0,e.length-4)}})};l.__reset=function(e){this.__btn=t._$get(e.btn);if(this.__btn){e.parent=e.parent&&t._$get(e.parent)||document.body;this.__col=e.col||12;c=n._$merge(c,{col:this.__col,prefix:d._$getPortraitRoot()});this.__super(e);this.__render();_._$$Scrollbar._$allocate({parent:this.__cnt});this.__doInitDomEvent([[this.__btn,"click",this.__onBtnClick._$bind(this)],[document,"click",this.__hideCnt._$bind(this)],[this.__body,"click",this.__selectItem._$bind(this)]])}};l.__destroy=function(){this.__doClearComponent();this.__super()};l.__initXGui=function(){var e=a._$parseUITemplate(r);return function(){this.__seed_html=e.cnt;this.__seed_list=e.list}}();l.__initNode=function(){this.__super();var e=t._$getByClassName(this.__body,"j-flag");this.__cnt=e[0];this.__prev=e[1];this.__next=e[2]};l.__onBtnClick=function(e){t._$hasClassName(this.__body,"f-dn")?this.__showCnt(e):this.__hideCnt(e)};l.__showCnt=function(e){i._$stop(e);i._$dispatchEvent(document,"click");t._$delClassName(this.__body,"f-dn");this._$dispatchEvent("onShow")};l._$hide=function(){this.__hideCnt()};l.__hideCnt=function(e){t._$addClassName(this.__body,"f-dn");this._$dispatchEvent("onHide")};l.__selectItem=function(e){i._$stop(e);var n=i._$getElement(e,"d:id");if(n){var a={id:t._$dataset(n,"id"),tag:t._$attr(n,"title"),src:t._$dataset(n,"src")};a.html=d._$getImgHTML(a);this._$dispatchEvent("onSelect",a);this.__hideCnt(e)}};l.__render=function(){o._$render(this.__cnt,this.__seed_list,c)};l._$getData=function(){return c};d._$isPortrait=function(e){var t=(e.src||"").toLowerCase(),i=d._$getPortraitRoot();return 0===t.indexOf(i)};d._$hasPortrait=function(e){var t=n._$indexOf(e.getElementsByTagName("img"),function(e){return d._$isPortrait(e)});return t>=0};d._$getPortraitRoot=function(){return appConfig.protocol.sdk+"://"+appConfig.domain.sdk+appConfig.online.sdk+"res/portrait/emoji/"};d._$formatPortrait=function(e){var t=e.getElementsByTagName("img");if(t&&t.length){e=e.cloneNode(!0);n._$reverseEach(e.getElementsByTagName("img"),function(e){var t=e.parentNode;if(d._$isPortrait(e)){var i=e.ownerDocument.createTextNode(e.title);t.replaceChild(i,e)}else t.removeChild(e)});return e}};d._$isPortraitURL=function(e){var t=e.className||"";return t.indexOf(f)>=0};d._$hasPortrait=function(e){var t=n._$indexOf(e.getElementsByTagName("img"),function(e){return d._$isPortraitURL(e)});return t>=0};d._$formatPortrait=function(e){var t=e.getElementsByTagName("img");if(t&&t.length){e=e.cloneNode(!0);n._$reverseEach(e.getElementsByTagName("img"),function(e){var t=e.ownerDocument.createTextNode(e.title);e.parentNode.replaceChild(t,e)});return e}};d._$portrait2text=function(e){var i=document.createElement("div");i.innerHTML=e;var n=i.getElementsByTagName("img");for(var a=n.length-1;a>=0;a--){var o=n[a];var s=t._$attr(o,"title");var _=document.createTextNode(s);i.replaceChild(_,o)}return i.innerHTML};d._$text2portrait=function(){var e=/(\[[^\]]+\])/gi;return function(t){var i=c.pmap;var n=c.pmap2;t=t.replace(e,function(e,t){if(n[t]){var a=d._$getImgHTML({id:n[t],tag:t,src:d._$getPortraitRoot()+i[n[t]].file});return a}else return t});return t}}();d._$getImgHTML=function(e){var t='<img class="portrait_icon '+f+'" data-id="'+e.id+'" src="'+e.src+'" title="'+e.tag+'" alt="'+e.tag+'">';return t}},"e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","d4e947987e24f4ce2260131a04872457","186691795a2fc1193976edeb8747c76d","921289b39d48691eb7f7f6e3f7755e42","30cf1ce66c96e658b40ece8275ce9b4f");I$("df2ba4eb2ac59f8c1794233521e00742",'<textarea name="ntp" id="#<editBody>">\n  <div class="m-iptbox">\n    <label id="portrait_btn" class="portrait_label" title="发送表情"><i class="u-icon u-icon-portrait"></i></label>\n    <label class="photo_label j-flag" title="发送图片"><i class="u-icon u-icon-photo"></i></label>\n    <label class="file_label j-fflag" title="发送文件"><i class="u-icon u-icon-file"></i></label>\n    <div class="textarea j-richflag">\n      <div class="textarea-mn j-flag"></div>\n    </div>\n    <button type="submit" class="u-btn u-btn-send j-flag">发送</button>\n    <form class="form j-flag"></form>\n    <div class="disabled"></div>\n  </div>\n</textarea>\n<textarea name="jst" id="#<editStyle>">\n  <head>\n    <meta charset="utf-8"/>\n    <style>\n      html,body{cursor:text;font-size:14px;font-family:Arial;word-wrap:break-word;}\n      html,body,p{margin:0;padding:0;border:0}\n      html{width:100%;height:100%;overflow:hidden;}\n      body{line-height:16px;padding:11px 10px;white-space:pre-wrap;}\n      img{max-width:90%;}\n      .portrait_icon{\n        width: 24px;\n        height: 24px;\n        vertical-align: middle;\n        display: inline-block;\n      }\n      ${css}\n    </style>\n  </head>\n  <body contenteditable="true"></body>\n</textarea>\n<textarea name="txt" id="#<editToast>">\n  <div class="tips-message">\n    <i class ="u-icon u-icon-warning"></i>\n    <h4></h4>\n  </div>\n</textarea>\n<textarea name="txt" id="#<editPlaceHolder>">\n  <div class="empty">请输入消息</div>\n</textarea>\n');
I$("f33b0e15e8ca960e395f0e825a2b1a09",function(e,t,i){i.__insertLineBreak=function(e){e.execCommand("insertLineBreak")};i.__insertHTML=function(e,t){e.execCommand("insertHTML",!1,t)};i.__unlink=function(e){e.execCommand("unlink",!1)};i.__getTextContent=function(e){return e&&e.innerText||""};i.__focusToEnd=function(e){e.focus();var t=e.getSelection();if(t.rangeCount>0){var i=t.getRangeAt(0);i.selectNodeContents(e.document.body);i.collapse(!1)}};i.__fixFocus=function(e){};i.__collapse=function(e){try{e.getSelection().collapseToEnd()}catch(t){}};i.__hasSelectionHack=function(){return!1};i.__saveSelection=function(){};i.__revertSelection=function(e,t){};i.__getPosition=function(e){if(e){var t=e.getSelection(),i=t.getRangeAt(0);if(i){var n=(i.getClientRects()||[])[0];if(n){var a=e.document,o=Math.max(a.body.scrollTop,a.documentElement.scrollTop),s=Math.min(a.body.clientHeight,a.documentElement.clientHeight);if(n.top>0&&n.top<s)return;return{top:n.top+o,left:n.left}}}}}},"780a96dd705b8404d9982fdccc656c08","455067b9dcb8d33b1e1808745dbbb96a");I$("d9aab39ffa93bcd02114c6f02758fc77",function(e,t,i){if("trident"===e._$KERNEL.engine)I$("479cc74f31811f7b57d85f8f651d050b",function(){i.__getPosition=function(e){};i.__saveSelection=function(e){var t=e.document;if(e.getSelection){var i=e.getSelection();if(i.rangeCount>0)return i.getRangeAt(0)}else if(t.selection)return t.selection.createRange()};i.__revertSelection=function(e,t){if(e&&t)if(t.select)t.select();else if(e.getSelection){var i=e.getSelection();i.addRange(t)}}});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release>"6.0")I$("c931615557e8f0582b3cbedb5ba45d35",function(){i.__insertLineBreak=function(e){var t=e.getSelection().getRangeAt(0);var i=e.createElement("p");i.innerText=" ";t.insertNode(i);t.collapse(!0)};i.__insertHTML=function(e,i){var n=e.getSelection();if(n.getRangeAt){var a=n.getRangeAt(0);if(a){var o=e.createElement("div");o.innerHTML=i;a.deleteContents();t._$reverseEach(o.childNodes,function(e){a.insertNode(e)});a.collapse(!1)}}}});if("trident"===e._$KERNEL.engine&&e._$KERNEL.release<="6.0")I$("8d154cac270385dcd9204725eafed2e9",function(){i.__insertLineBreak=function(e){var t=e.selection.createRange();t.pasteHTML("<p></p>");t.collapse(!1);t.select()};i.__insertHTML=function(e,t){var i=e.selection.createRange();if(i.pasteHTML)i.pasteHTML(t)};i.__hasSelectionHack=function(){return!0}});if("webkit"===e._$KERNEL.engine)I$("cd5a450276524be6d6f3ec7f0edbdb0a",function(){i.__fixFocus=function(e){var t=e.getSelection();if(!(t&&t.rangeCount>0)){var i=e.document.createRange();i.selectNodeContents(e.document.body);t.addRange(i);i.collapse(!1)}}});if("gecko"===e._$KERNEL.engine)I$("cdc7189cfe794c5ccee1fa9c0087fae0",function(){i.__insertLineBreak=function(e){e.execCommand("insertHTML",!1,"<p></p>")};i.__getTextContent=function(){var e=/inline|cell/i;var i=function(t){return!e.test(window.getComputedStyle(t,null).display||"")};var n=function(e,a){var o=e.childNodes;if(0!==o.length||e.nodeType!==Node.ELEMENT_NODE&&e.nodeType!==Node.TEXT_NODE){if(0===o.length)return;if(a.length>0)if("\n"!==a[a.length-1]&&i(e))a.push("\n");else a.push(" ");t._$forEach(o,function(e){n(e,a)})}else a.push(e.textContent||e.nodeValue||"")};return function(e){var t=[];n(e,t);return t.join("")}}()});return i},"dcfbb39e75d6de6b8114c072c5b070e0","780a96dd705b8404d9982fdccc656c08","f33b0e15e8ca960e395f0e825a2b1a09");I$("7af663264574a4890d1d6945b73ab82f",function(e,t,i,n,a,o,s,_,r,c,d,l,f,u,h,m,p){var g="YSF_MSG_"+n._$uniqueID()+"_";m._$$YSFEditor=e._$klass();p=m._$$YSFEditor._$extend(a._$$Abstract);p.__init=function(){this.__sopt={};this.__ropt={};this.__fopt={accept:"image/*",onchange:this.__onFileSelect._$bind(this)};this.__popt={clazz:"pc_portrait",btn:"portrait_btn",onSelect:this.__onPortraitSelect._$bind(this)};this.__eopt={visible:!0,onload:this.__onIFrameLoaded._$bind(this)};this.__super()};p.__reset=function(e){this.__super(e);this.__inputComposition=!1;t._$dataset(this.__fopt.btn,"log",e.log||"");this.__limit=parseInt(e.maxLength)||0;this.__placeholder=e.placeholder||"输入消息...";this.__doShowPlaceHolder();var i=parseInt(e.maxHeight)||0;if(i)this.__range=[0,i];this.__sopt.css=e.css||"";this.__iframe=t._$createXFrame(this.__eopt);this.__doInitDomEvent([[this.__nsender,"click",this.__doSubmitContent._$bind(this,{label:0})],[this.__nholder,"click",this._$focus._$bind(this)],[this.__nfile,"click",this.__onFileBtnClick._$bind(this)]]);this._$addEvent("oncansendfile",this.__onCanSendFile._$bind(this));if(e.popt){this.__popt=n._$merge(this.__popt,e.popt);this.__popt.parent=this.__popt.parent||this.__body}this.__portrait=f._$$Portrait._$allocate(this.__popt);this.__ftOpt={node:this.__nfile,multiple:!0,onsend:this.__doSendFile._$bind(this)};this.__fileTransfer=l._$$FileTransfer._$allocate(this.__ftOpt)};p.__destroy=function(){if(this.__scrollbar){this.__scrollbar._$recycle();delete this.__scrollbar}if(this.__observer){this.__observer.disconnect();delete this.__observer}if(this.__stimer){window.clearTimeout(this.__stimer);delete this.__stimer}t._$remove(this.__iframe);delete this.__iframe;delete this.__content;delete this.__range;this.__doHideToast();this._$clear();this.__super()};p.__initXGui=function(){var e=o._$parseUITemplate(u);return function(){this.__seed_tst=e.editToast;this.__seed_hld=e.editPlaceHolder;this.__seed_cnt=e.editStyle;this.__seed_html=e.editBody}}();p.__initNode=function(){this.__super();var e=t._$getByClassName(this.__body,"j-flag");this.__richText=t._$getByClassName(this.__body,"j-richflag")[0];this.__eopt.parent=e[1];this.__ropt.container=e[1];this.__fopt.btn=e[0];this.__fopt.form=e[3];this.__fopt.parent=this.__body;_._$bind(this.__fopt.btn,this.__fopt);this.__nsender=e[2];this.__ntoast=t._$html2node(o._$getTextTemplate(this.__seed_tst));this.__nholder=t._$html2node(o._$getTextTemplate(this.__seed_hld));this.__nfile=t._$getByClassName(this.__body,"j-fflag")[0]};p.__getViewPort=function(){try{return this.__iframe.contentWindow}catch(e){}};p.__getContext=function(){try{return this.__getViewPort().document}catch(e){}};p.__getBody=function(){try{var e=this.__getContext().body;return"true"==e.contentEditable?e:null}catch(t){}};p.__hasContent=function(){var e=this.__getBody(),t=this.__getTextContent(e).trim();if(!t)return f._$hasPortrait(e);else return!!t};p.__getTextContent=function(e){return h.__getTextContent(e||this.__getBody())};p.__doShowToast=function(e){this.__doHideToast();this.__body.appendChild(this.__ntoast);this.__ntoast.getElementsByTagName("h4")[0].innerHTML=e;this.__xtimer=window.setTimeout(this.__doHideToast._$bind(this),5e3)};p.__doHideToast=function(){if(this.__xtimer)this.__xtimer=window.clearTimeout(this.__xtimer);t._$removeByEC(this.__ntoast)};p.__doShowPlaceHolder=function(e){e=e||this.__placeholder;this.__nholder.innerText=e;this.__eopt.parent.appendChild(this.__nholder)};p.__doHidePlaceHolder=function(){t._$removeByEC(this.__nholder)};p.__doDumpImageFromEvent=function(e){var t=[],i=e.clipboardData||window.clipboardData||{};n._$forEach(i.items,function(e){if(0===e.type.indexOf("image")){var i=e.getAsFile();t.push({file:i,url:URL.createObjectURL(i)})}});var a=e.dataTransfer||{};n._$forEach(a.files,function(e){if(0===e.type.indexOf("image"))t.push({file:e,url:URL.createObjectURL(e)})});return t};p.__doDumpImageFromContent=function(e){var t=[],i=e.getElementsByTagName("IMG");n._$reverseEach(i,function(e){var i=e.src||"";if(0===i.indexOf("data:image")||i.indexOf("nos.netease.com")>0||i.indexOf("nosdn.127.net")>=0){t.push({url:i,file:i});e.parentNode.removeChild(e)}});return t};p.__doDumpTextFromEvent=function(e){var t="",i=e.clipboardData;if(i)t=i.getData("text/plain");else if(window.clipboardData)t=clipboardData.getData("text");return t||""};p.__doCheckEnter=function(e){if(13==e.keyCode){i._$stop(e);if(!e.ctrlKey)this.__doSubmitContent({label:1});else{h.__insertLineBreak(this.__getContext());var n=t._$getStyle(this.__getBody(),"lineHeight"),a=parseInt(n)||20;this.__getViewPort().scrollBy(0,a);this.__doCheckScrollBar()}}};p.__doCheckScrollBar=function(){var e=function(){delete this.__stimer;if(this.__scrollbar)this.__scrollbar._$resize()};return function(){if(!this.__stimer)this.__stimer=window.setTimeout(e._$bind(this),50)}}();p.__doCheckAutoHeight=function(){var e=this.__range;if(e&&e[0]!==e[1]){var i=this.__eopt.parent;if(!e[0]){if(!i.clientHeight)return;var n=i.clientHeight,a=e[1];e[0]=n;e[1]=Math.max(a,n)}var o=this.__getBody();if(o){t._$setStyle(i,"height","1px");var s=Math.max(e[0],Math.min(o.scrollHeight,e[1]));t._$setStyle(i,"height",s+"px");this._$dispatchEvent("onheightchange")}}};p.__doCheckInputLimit=function(e){if(this.__limit){if(null==e)e=this._$getContent().trim();if(e.length>this.__limit)this._$setContent(e.substr(0,this.__limit))}};p.__doCheckSubmitable=function(){this.__doDisableSubmit(!this.__hasContent())};p.__doCheckPlaceHolder=function(){var e=this.__hasContent();!e?this.__doShowPlaceHolder():this.__doHidePlaceHolder()};p.__doCheckEventMessage=function(e){var t=this.__doDumpTextFromEvent(e);if(0===t.indexOf(g)){i._$stop(e);this._$dispatchEvent("onsubmit",{type:"message",content:t.replace(g,"")})}};p.__doCheckEventImage=function(e){var t=this.__doDumpImageFromEvent(e);if(!t||!t.length){this.__filterRichContent(e);window.setTimeout(this.__doCheckContentImage._$bind(this),100)}else{i._$stop(e);this.__doPreviewImage(t)}};p.__doCheckContentImage=function(){var e=this.__getBody(),t=this.__doDumpImageFromContent(e);e.scrollTop=2*e.scrollHeight;h.__focusToEnd(this.__getViewPort());if(t&&t.length)this.__doPreviewImage(t)};p.__doSelectionChange=function(e){var t=this.__onSelectionChange._$bind(this);if(!window.MutationObserver){this.__doInitDomEvent([[e,"selectionchange",t]]);if(h.__hasSelectionHack())this.__doInitDomEvent([[e,"keydown",t],[e,"keyup",t]])}else{this.__observer=new MutationObserver(t);this.__observer.observe(e,{subtree:!0,childList:!0,attributes:!0,characterData:!0})}};p.__doLoadImage=function(e,t,i){var n=this,a=new Image;a.onload=function(){
t.call(n,e)};a.onerror=function(){e.file=null;(i||t).call(n,e)};a.src=e.url};p.__doPreviewImage=function(){var e=function(e){var t=[];n._$forEach(e,function(e){if(e.file)t.push(e)});return t};return function(t){var i=0,a=this;if(!this.__onPreviewState){var o=function(){i++;if(i==t.length){var n=e(t);if(!n.length)this.__doSendImage({});else{a.__onPreviewState=!0;d._$preview({photos:n,onok:function(){a.__doSendImage(n);delete a.__onPreviewState},oncc:function(){delete a.__onPreviewState}})}}};n._$forEach(t,function(e){if(e.url)this.__doLoadImage(e,o,o);else i++},this)}}}();p.__doSendFile=function(e){n._$forEach(e,function(e){this._$dispatchEvent("onsubmit",{type:"file",content:{file:e,name:e.name,size:e.size}})},this)};p.__doSendImage=function(e){if(!n._$isArray(e))this._$dispatchEvent("onsubmit",{type:"image",content:{url:e.url,file:e.file}});else n._$forEach(e,this.__doSendImage,this)};p.__doSubmitContent=function(e){var t=this._$getContent().trim();if(t)if(!(this.__limit&&t.length>this.__limit))this._$dispatchEvent("onsubmit",n._$merge({type:"text",content:t},e));else this._$toast("消息内容超过最大限制"+this.__limit+"个字符")};p.__doDisableSubmit=function(e){this.__nsender.disabled=!!e;!e?t._$delClassName(this.__nsender,"u-btn-disabled"):t._$addClassName(this.__nsender,"u-btn-disabled")};p.__doFocusToEnd=function(){h.__collapse(this.__getViewPort())};p.__onIFrameLoaded=function(e){var t=this.__getContext();t.open();t.write(s._$get(this.__seed_cnt,this.__sopt));t.close();var n=this.__getViewPort();this.__doInitDomEvent([[t,"paste",this.__onContentPaste._$bind(this)],[t,"drop",this.__onFileDropIn._$bind(this)],[t,"keydown",this.__doCheckEnter._$bind(this)],[n,"focus",this.__doHidePlaceHolder._$bind(this)],[n,"blur",this.__doCheckPlaceHolder._$bind(this)],[n,"scroll",this.__doCheckScrollBar._$bind(this)],[t,"click",i._$dispatchEvent._$bind(i,document,"click")],[t,"beforedeactivate",this.__doSaveSelection._$bind(this)],[t,"compositionstart",this.__onCompositionStart._$bind(this)],[t,"compositionend",this.__onCompositionEnd._$bind(this)]]);this.__doSelectionChange(t);try{t.execCommand("enableObjectResizing",!1,!1)}catch(a){}this.__ropt.parent=t.body;this.__ropt.sbody=this.__getViewPort();this.__scrollbar=c._$$Scrollbar._$allocate(this.__ropt);this._$setContent(this.__content||"");this.__setIframeStyle(t)};p.__doSaveSelection=function(){this.__range=h.__saveSelection(this.__getViewPort())};p.__onSelectionChange=function(e){var t=this._$getContent();this.__doCheckSubmitable();this.__doCheckAutoHeight();!this.__inputComposition&&this._$dispatchEvent("oninputchange",t)};p.__onContentPaste=function(e){this.__doCheckEventMessage(e);if(!this.__disSendImg)this.__doCheckEventImage(e);else{this.__stopImgEvent(e);this.__filterRichContent(e)}};p.__onFileSelect=function(e){var i=t._$get(e.id),n={file:(i.files||[])[0]};if(!n.file)n.file=i;else if(n.file.type.indexOf("image")<0)n.file=null;else n.url=URL.createObjectURL(n.file);this.__doLoadImage(n,this.__doSendImage)};p.__onFileDropIn=function(e){if(!this.__disSendImg){this.__doCheckEventImage(e);i._$stop(e);window.setTimeout(this.__doFocusToEnd._$bind(this),150)}else this.__stopImgEvent(e)};p.__onPortraitSelect=function(e){var t=this.__getContext();try{this._$focus();h.__fixFocus(this.__getViewPort());this.__doScrollToCursor();h.__insertHTML(t,e.html)}catch(i){console.log(i)}this.__onSelectionChange()};p.__doScrollToCursor=function(){var e=this.__getViewPort(),t=h.__getPosition(e);if(t)if(e)e.scrollTo(0,t.top||0)};p._$setContent=function(e){var t=this.__getBody();var i=document.createElement("div");if(t){delete this.__content;if("innerText"in i)i.innerText=e||"";else i.textContent=e||"";t.innerHTML=this.__text2portrait(i.innerHTML);this.__onSelectionChange()}else this.__content=e||""};p._$getContent=function(){var e=this.__getBody(),t=f._$formatPortrait(e)||e;return this.__getTextContent(t)};p._$reset=function(){this._$resetFile();this._$resetContent()};p._$resetFile=function(){this.__fopt.form.reset()};p._$resetContent=function(){this._$setContent("")};p._$focus=function(){var e=this.__getViewPort();if(e){this.__doHidePlaceHolder();e.focus();h.__revertSelection(e,this.__range);delete this.__range}};p._$blur=function(){window.focus()};p._$disable=function(e){!e?t._$delClassName(this.__body,"z-disabled"):t._$addClassName(this.__body,"z-disabled");this.__portrait._$hide()};p._$toast=function(e){if(!e)this.__doHideToast();else this.__doShowToast(e)};p._$placeholder=function(e){this._$reset();this.__doShowPlaceHolder(e)};p._$clear=function(e){e=e||{};if(!e.disabled&&e.focus){this._$reset();this._$focus()}else{this._$blur();this._$placeholder(e.placeholder);this._$disable(!!e.disabled);if(e.toast)this.__doShowToast(e.toast)}};m._$copy=function(e){i._$addEvent(e,"copy",function(e){var n=i._$getElement(e,"d:copyId");if(n){i._$stop(e);var a=g+t._$dataset(n,"copyId");if(e.clipboardData)e.clipboardData.setData("text/plain",a);else if(window.clipboardData)clipboardData.setData("text",a)}})};p.__portrait2text=function(e){return f._$portrait2text(e)};p.__text2portrait=function(e){return f._$text2portrait(e)};p._$toggleOpr=function(e){if(e){t._$addClassName(this.__richText,"u-status-robot");t._$addClassName(this.__fopt.btn,"f-dn");t._$addClassName("portrait_btn","f-dn");t._$addClassName(this.__nfile,"f-dn");this.__portrait._$hide()}else{t._$delClassName(this.__richText,"u-status-robot");t._$delClassName(this.__fopt.btn,"f-dn");t._$delClassName("portrait_btn","f-dn");t._$delClassName(this.__nfile,"f-dn")}this._$setDisSendImg(e)};p.__filterRichContent=function(e){i._$stop(e);var t=this.__getContext();var n=this.__doDumpTextFromEvent(e);n=this.__text2portrait(n);h.__insertHTML(t,n)};p._$setDisSendImg=function(e){e?this.__disSendImg=!0:delete this.__disSendImg};p.__stopImgEvent=function(e){var t=this.__doDumpImageFromEvent(e);if(!t||!t.length);else i._$stop(e)};p.__onFileBtnClick=function(e){this.__timestamp=n._$uniqueID();this._$dispatchEvent("checkcansendfile",this.__timestamp)};p.__onCanSendFile=function(e){if(e.timestamp==this.__timestamp){this.__canSend=!!e.result;this.__fileTransfer._$dispatchEvent("oncansendfile",{result:this.__canSend})}};p.__setIframeStyle=function(e){var t=function(e,t,i,n){if(e&&i){i="#"+i;if(!t)var a=e+"{"+i+"}";else a=e+"{"+t+":"+i+"}";var o=document.createTextNode(a);n.appendChild(o)}};var i=n._$query2object(location.search.substr(1)),a=i["editorColor"],o=i["editorBgColor"];if(a||o){var s=e.createElement("style"),_=e.head;s.type="text/css";_.appendChild(s);t("body","color",a,s);t("body","background-color",o,s)}};p.__onCompositionStart=function(e){this.__inputComposition=!0};p.__onCompositionEnd=function(e){this.__inputComposition=!1;var t=this._$getContent();!this.__inputComposition&&this._$dispatchEvent("oninputchange",t)}},"e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08","d4e947987e24f4ce2260131a04872457","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","940fa04144ba9d08b57524738e940640","52508a5411274020d3cb3249512bc4f2","186691795a2fc1193976edeb8747c76d","b20ced498e3e069fdb0b0e6096f96d68","b2737c96b75e405cf55b07d3414e0d1b","8fd72c7e0540f7cdb299f6ddb8bbd1ab","df2ba4eb2ac59f8c1794233521e00742","d9aab39ffa93bcd02114c6f02758fc77");I$("c0146f026fdabc84c5e6387f9522d49c",'<textarea name="ntp" id="#<lbBody>">\n  <div class="m-layer">\n      <div class="close j-flag">\n          <i class="u-icon-closewhite"></i>\n      </div>\n      <table>\n          <tbody>\n          <tr>\n              <td>\n                  <div class="lywrap">\n                      <div class="lyct small">\n                          <div class="prev j-flag">\n                              <i class="u-icon-prev"></i>\n                          </div>\n                          <div class="imgWrap j-flag"></div>\n                          <div class="next j-flag">\n                              <i class="u-icon-next"></i>\n                          </div>\n                      </div>\n                  </div>\n              </td>\n          </tr>\n          </tbody>\n      </table>\n  </div>\n</textarea>\n<textarea name="txt" id="#<lbLoading>">\n  <div class="status loading"><img src="/prd/res/img/loading.gif"/></div>\n</textarea>\n<textarea name="txt" id="#<lbError>">\n  <div class="status error"><div class="message j-flxg"></div></div>\n</textarea>');I$("59486eaf249342cac1b5b90408aaa0bc",function(e,t,i,n,a,o,s,_,r){_._$$LightBox=e._$klass();r=_._$$LightBox._$extend(a._$$Abstract);r.__init=function(){this.__super()};r.__reset=function(e){this._$batEvent({onshow:this.__doFadeIn._$bind(this),onhide:this.__doFadeOut._$bind(this)});this.__super(e);this.__doInitDomEvent([[this.__nclose,"click",this.__doExitFullScreen._$bind(this)],[this.__nprev,"click",this._$backward._$bind(this)],[this.__nnext,"click",this._$forward._$bind(this)],[this.__nbox,"click",this.__doRedirect2Href._$bind(this)],[document,"keydown",this.__doCheckNavigator._$bind(this)],[document,"fullscreenchange",this.__onFullScreenChange._$bind(this)],[this.__ntest,"load",this.__onImageLoad._$bind(this,!0)],[this.__ntest,"error",this.__onImageLoad._$bind(this,!1)]]);this.__list=e.list||[];this.__index=parseInt(e.index)||0;this.__disabled=e.disabled||"j-disabled";this._$go();if(e.fullscreen)this.__doFullScreen()};r.__destroy=function(){i._$remove(this.__image);delete this.__fulled;this.__super()};r.__initXGui=function(){var e=o._$parseUITemplate(s);return function(){this.__seed_html=e.lbBody;this.__seed_load=e.lbLoading;this.__seed_error=e.lbError}}();r.__initNode=function(){this.__super();var e=i._$getByClassName(this.__body,"j-flag");this.__nclose=e[0];this.__nprev=e[1];this.__nbox=e[2];this.__nnext=e[3];this.__ntest=new Image;this.__nloading=i._$html2node(o._$getTextTemplate(this.__seed_load));this.__nerror=i._$html2node(o._$getTextTemplate(this.__seed_error))};r.__doFadeIn=function(e){i._$addClassName(e.target,"a-fadein")};r.__doFadeOut=function(e){};
r.__doCheckDisableStatus=function(){this.__index<=0?i._$addClassName(this.__nprev,this.__disabled):i._$delClassName(this.__nprev,this.__disabled);this.__index>=this.__list.length-1?i._$addClassName(this.__nnext,this.__disabled):i._$delClassName(this.__nnext,this.__disabled)};r.__doFullScreen=function(){var e=this.__body.requestFullscreen||this.__body.msRequestFullscreen||this.__body.mozRequestFullScreen||this.__body.webkitRequestFullScreen;if(e)e.call(this.__body);this.__fulled=!0};r.__doExitFullScreen=function(e){var t=document.exitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen;if(t)t.call(document);this.__doCloseFullScreen()};r.__doCloseFullScreen=function(e){this._$dispatchEvent("onexit");this._$recycle()};r.__onFullScreenChange=function(e){var t=document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;if(!t)this.__doExitFullScreen()};r.__doRedirect2Href=function(e){var t=this.__list[this.__index];if(t&&t.href)window.open(t.href)};r.__doRenderImage=function(){var e=this.__list[this.__index];if(e){this.__doHideError();this.__doHideLoading();if(this.__image){var n={target:this.__image};this._$dispatchEvent("onhide",n);if(!n.stopped)i._$remove(this.__image)}this.__image=new Image;this.__nbox.appendChild(this.__image);t._$addEvent(this.__image,"error",this.__doCheckImageError._$bind(this));if(!e.thumb){i._$delClassName(this.__nbox.parentNode,"small");this.__image.src=e.src}else{i._$addClassName(this.__nbox.parentNode,"small");this.__doShowLoading();this.__image.src=e.thumb;this.__ntest.src=e.src}this._$dispatchEvent("onshow",{target:this.__image})}};r.__doCheckNavigator=function(e){var t=e.keyCode;if(37!==t)if(39!==t){if(27===t)this.__doExitFullScreen()}else this._$forward();else this._$backward()};r.__doShowLoading=function(){this.__nbox.parentNode.appendChild(this.__nloading)};r.__doHideLoading=function(){i._$removeByEC(this.__nloading)};r.__doShowError=function(e){i._$getByClassName(this.__nerror,"j-flxg")[0].innerText=e||"加载失败，请稍后再试";this.__nbox.parentNode.appendChild(this.__nerror)};r.__doHideError=function(){i._$removeByEC(this.__nloading)};r.__doCheckImageError=function(){var e="";if(navigator.onLine===!1)e="网络连接失败，请稍后再试";this.__doShowError(e)};r.__onImageLoad=function(e){var t=this.__list[this.__index];if(this.__ntest.src==t.src){this.__doHideLoading();if(e){i._$delClassName(this.__nbox.parentNode,"small");this.__image.src=t.src}else this.__doCheckImageError()}};r._$go=function(e){var t=this.__index+(e||0);this.__index=Math.max(0,Math.min(t,this.__list.length-1));this.__doCheckDisableStatus();this.__doRenderImage()};r._$backward=function(){if(!i._$hasClassName(this.__nprev,this.__disabled))this._$go(-1)};r._$forward=function(){if(!i._$hasClassName(this.__nnext,this.__disabled))this._$go(1)};_._$lightbox=function(e){var t=i._$get(e.current),a=e.group||"";if(t)a=i._$dataset(t,"group")||a;var o=i._$get(e.parent)||document.body,s=o.getElementsByTagName("IMG"),r=[],c=0;n._$forEach(s,function(e){if(!a||a==i._$dataset(e,"group")){var o={src:e.src,title:e.alt||"",href:i._$dataset(e,"href")};var s=i._$dataset(e,"src"),_=i._$dataset(e,"thumb");if(s){o.thumb=o.src;o.src=n._$absolute(s)}else if(_)o.thumb=n._$absolute(_);r.push(o);if(e===t)c=r.length-1}});_._$$LightBox._$allocate(n._$merge({fullscreen:!0,disabled:"z-page-disabled"},e,{parent:document.body,index:c,list:r}))};_._$delegate=function(e,i){t._$addEvent(e,"click",function(n){var a=t._$getElement(n,"d:group");if(a&&"IMG"==a.tagName){var o=e.scrollTop;_._$lightbox({parent:e,current:a,fullscreen:"mobile"==i?0:1,onexit:function(){window.setTimeout(function(){e.scrollTop=o},100)}})}})}},"e84bded65b98b38941ed4f3e7b9e6d19","4cd67180df9ce322f7a6a6207080bbc9","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","d4e947987e24f4ce2260131a04872457","2318238864a492451a5aba5d50acbc2d","c0146f026fdabc84c5e6387f9522d49c");I$("d204fffbaa9f74142b1dd3f3a67e31e9",'<textarea name="ntp" id="#<lbBody>">\n  <div class="m-modal m-modal-confirm m-modal-satisfyEva" style="display:none">\n\n      <table>\n          <tbody>\n          <tr>\n              <td class="j-flagmain">\n                  <div class="lywrap j-flag">\n                      <div class="close" data-action="close">\n                          &times;\n                      </div>\n                      <form class="m-form-evaluate j-form">\n                        <h2 class="form_tlt j-title"></h2>\n                        <div class="evaWrap j-flaglist"></div>\n                        <div class="form_item itm-remarks">\n                            <textarea placeholder="备注(选填)" name="remarks">&lt/textarea>\n                        </div>\n                        <div class="form_item itm-btn">\n                            <a class="u-btn u-btn-disabled ok j-formbtn " data-action="submitform">确定</a>\n                        </div>\n                      </form>\n                  </div>\n              </td>\n\t          <td class="m-modal-confirmEva j-flagconfirm" style="display:none">\n\t\t          <div class="modal_dialog">\n\t\t              <div class="modal_hd">\n\t\t                  <h3 class="modal_title">标题</h3>\n\t\t              </div>\n\t\t              <div class="modal_bd">\n\t\t                  <span>是否放弃当前评价,放弃后不可恢复</span>\n\t\t              </div>\n\t\t              <div class="modal_ft">\n\t\t                  <div class="group">\n\t\t                      <a class="u-btn" data-action="confirmok">确定</a>\n\t\t                      <a class="u-btn u-btn-disabled" data-action="confirmclose">取消</a>\n\t\t                  </div>\n\t\t              </div>\n\t\t          </div>\n\t\t      </td>\n\n          </tr>\n          </tbody>\n      </table>\n  </div>\n</textarea>\n\n<textarea name="jst" id="#<lbForm>">\n    <ul class="form_item item-list j-formitm">\n        {list list as x}\n        <li>\n            <label>\n                <div class="itm head">\n                    <img src="${x.img}">\n                </div>\n                <div class="itm choice" data-action="selitem" data-index="${x_index}">\n                    <i class="u-icon-radio {if x.active}active{/if}"></i>\n                    <span>${x.name}</span>\n                    <input type="radio" name="evaluation" value="${x.value}" {if x.active}checked="true"{/if}>\n                </div>\n            </label>\n        </li>\n        {/list}\n    </ul>\n</textarea>');I$("3c79b85c8f9d273108d56c2535ce239a",function(e,t,i,n,a,o,s,_,r,c){r._$$EvaluateModal=e._$klass();c=r._$$EvaluateModal._$extend(a._$$Abstract);var d=window.resourceConfig.satisfy;var l={2:{1:d+"s1.png",100:d+"s4.png"},3:{1:d+"s1.png",50:d+"s2.png",100:d+"s3.png"},5:{1:d+"s0.png",25:d+"s1.png",50:d+"s2.png",75:d+"s3.png",100:d+"s4.png"}};c.__init=function(){this.__super()};c.__reset=function(e){var n=i._$getByClassName(this.__container,"j-form")[0],a=e.form.list,o=e.form.type,_=l[o];this.__form=n;this.__formData=e.form;a.forEach(function(e){e.img=_[e.value]});this.__createEvalForm(e.form);t._$addEvent(n["remarks"],"keyup",this.__cbRemarks._$bind(this));r._$delegate(this,this.__body,{close:function(e,i){t._$stop(i);this.__hideModal(0)},selitem:function(t){var n=i._$dataset(t,"index"),t=i._$getByClassName(this.__container,"j-flaglist")[0];a.forEach(function(e,t){if(t!=n)e.active=0;else e.active=1});this.__cbEvaluation();s._$render(t,this.__seed_modal,e.form);this._$setEvalTypesClassName(e.form.list)},confirmclose:function(){this.__showModal()},confirmok:function(){this.__hideModal(1)},submitform:function(e,t){var i=e.getAttribute("data-flag");if(i&&0!=i){var o=function(e){for(var t=0;t<e.length;t++)if(1==e[t].checked)return parseInt(e[t].value)};var s=function(e){e.forEach(function(e){if(e.value==_.evaluation)_.name=e.name})};var _={evaluation:o(n["evaluation"]),remarks:(n["remarks"].value||"").trim(),id:this.__mid,flag:this.__evalFlag,sid:!this.__evalFlag?this.__sid:null,messageThanks:this.__formData.messageThanks};s(a);this._$dispatchEvent("submit",_);this.__hideModal(1)}}});this.__super(e)};c.__destroy=function(){this.__super()};c.__initXGui=function(){var e=o._$parseUITemplate(_);return function(){this.__seed_html=e.lbBody;this.__seed_modal=e.lbForm}}();c.__initNode=function(){this.__super();var e=i._$getByClassName(this.__body,"j-flag");this.__container=e[0];this.__ntitle=i._$getByClassName(this.__body,"j-title")[0]};c.__hideModal=function(e){var t=this.__form["remarks"].value,n=i._$getByClassName(this.__body,"j-flagmain")[0],a=i._$getByClassName(this.__body,"j-flagconfirm")[0];var o=function(){var e=i._$getByClassName(this.__container,"j-flaglist")[0];this.__form["remarks"].value="";this.__formData.list.forEach(function(e){e.active=0});s._$render(e,this.__seed_modal,this.__formData);this._$setEvalTypesClassName(this.__formData.list);this.__cbEvaluation(1)};if(!t||0!=e){if(1==e){i._$setStyle(n,"display","");i._$setStyle(a,"display","none")}o.call(this);i._$setStyle(this.__body,"display","none")}else{i._$setStyle(n,"display","none");i._$setStyle(a,"display","")}};c.__showModal=function(){var e=i._$getByClassName(this.__body,"j-flagmain")[0],t=i._$getByClassName(this.__body,"j-flagconfirm")[0];i._$setStyle(e,"display","");i._$setStyle(t,"display","none")};c._$showModal=function(e,t,n){this.__evalFlag=e;this.__sid=t;this.__mid=n;i._$setStyle(this.__body,"display","block")};c.__createEvalForm=function(e){var t=i._$getByClassName(this.__container,"j-flaglist")[0];s._$render(t,this.__seed_modal,e);this._$setEvalTypesClassName(e.list);this.__ntitle.innerText=this.__formData.messageInvite||"感谢您的咨询，请对我们的服务做出评价"};c.__cbRemarks=function(e){var t=e.target||{value:""},i=t.value.trim().length;if(i>100)t.value=t.value.slice(0,100)};c._$setEvalTypesClassName=function(e){var t={2:"two",3:"three",5:"five"};var n=t[e.length],a=i._$getByClassName(this.__container,"j-formitm")[0];i._$addClassName(a,n)};c.__cbEvaluation=function(e){var t=i._$getByClassName(this.__container,"j-formbtn")[0];
if(e){i._$addClassName(t,"u-btn-disabled");i._$attr(t,"data-flag",0)}else{i._$delClassName(t,"u-btn-disabled");i._$attr(t,"data-flag",1)}};r._$delegate=function(e,a,o){t._$addEvent(a,"click",function(a){try{var s=t._$getElement(a,"action")}catch(_){return}if(s){var r=i._$dataset(s,"action"),c=(o||{})[r];if(n._$isFunction(c)){t._$stopDefault(a);c.call(e||this,s,a)}}})}},"e84bded65b98b38941ed4f3e7b9e6d19","4cd67180df9ce322f7a6a6207080bbc9","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","d4e947987e24f4ce2260131a04872457","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","d204fffbaa9f74142b1dd3f3a67e31e9");I$("a65f10bd97b7e6580861baf173f7b424",function(e,t,i,n,a,o){o._$dur2time=function(){var e=function(e){return""+e};return function(e){if(!e)return'0"';e=Math.round(e/1e3);return e+'"'}}();o._$dur2width=function(e){return 40+7*e/1e3};o._$media=function(){var o={audio:function(t){var i="z-icon-playing";if(!e._$hasClassName(t,i)){var o=e._$dataset(t,"id");a._$do(function(a){a._$getAudioURL(o,function(a){if(a){a+=(a.indexOf("?")<0?"?":"&")+"audioTrans&type=mp3";n._$play(a,{key:"ysf-online-audio",onstatechange:function(n){if(2==n.state)e._$addClassName(t,i);else e._$delClassName(t,i)},ontimeupdate:function(e){},onerror:function(n){e._$delClassName(t,i)}})}})})}else n._$stop("ysf-online-audio")}};return function(n,a){t._$addEvent(n,"click",function(n){var s=t._$getElement(n,"d:action");if(s){var _=o[e._$dataset(s,"action")];if(i._$isFunction(_))_.call(a,s)}})}}()},"455067b9dcb8d33b1e1808745dbbb96a","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08","5821a529c5e6e425f3cb805a069a6691","d75d95943d0f2436559eb6094b78d11d");I$("5791ce1d894d724600feb9e7af867c46",function(e,t,i,n,a,o,s){o._$$HeadTab=e._$klass();s=o._$$HeadTab._$extend(a._$$Abstract);s.__reset=function(e){this.__super(e);this.tab={node:e.node,list:e.list,total:e.list.length,offset:0,parentWidth:e.parentWidth,selected:e.selected||"z-crt"};this.startNodeIndexMap=[0];this.currentNodeIndex=0;if(e.node){n._$merge(this.tab,{icon:this.__initIconNode(e.node)});this.__initEvent();this.__resetTab();t._$style(this.tab.node,{left:"0px",position:"absolute"})}};s.__initIconNode=function(e){var i=e.parentNode.parentNode;if(i){var a=function(e){var t=document.createElement("a");t.className=e;return t};var o=function(e){var i=t._$getChildren(e,"j-flag-triangle");n._$forEach(i,function(e){t._$remove(e)})};o(i);var s=a("icon-triangle-left j-flag-triangle");var _=a("icon-triangle-right j-flag-triangle");i.appendChild(s);i.appendChild(_);return[s,_]}};s.__initEvent=function(){i._$addEvent(this.tab.icon[0],"click",this.__clickLeftIcon._$bind(this));i._$addEvent(this.tab.icon[1],"click",this.__clickRightIcon._$bind(this));this._$addEvent("onresize",this.__onWidthResize._$bind(this))};s.__resetTab=function(){var e=this.tab.node.parentNode.offsetWidth,i=this.tab.node.scrollWidth,n=Math.ceil(i/e);this.startNodeIndexMap=[0];var a=0;for(var o=0,s=this.tab.list.length;o<s;o++){var _=this.tab.list[o],r=parseFloat(t._$getStyle(_,"margin-left")),c=parseFloat(t._$getStyle(_,"margin-right")),d=_.getBoundingClientRect().width+r+c,l=this.tab.node.parentNode.getBoundingClientRect().width;a+=d;if(a-c>l){a=d;this.startNodeIndexMap.push(o)}}this.__setIcon()};s.__onPageChange=function(){this.__setIcon();this.__positionScreen()};s.__setIcon=function(){t._$setStyle(this.tab.icon[0],"display","none");t._$setStyle(this.tab.icon[1],"display","none");if(void 0!=this.__getPreStartNodeIndex())t._$setStyle(this.tab.icon[0],"display","block");if(this.__getNextStartNodeIndex())t._$setStyle(this.tab.icon[1],"display","block")};s.__positionScreen=function(){var e=3;var i=this.tab.list[this.currentNodeIndex];var n=t._$offset(i,i.parentNode).x||0;t._$setStyle(this.tab.node,"left",-n+e+"px")};s.__clickLeftIcon=function(e){var t=this.__getPreStartNodeIndex();if(void 0!=t){this.currentNodeIndex=t;this.__onPageChange()}};s.__clickRightIcon=function(e){var t=this.__getNextStartNodeIndex();this.currentNodeIndex=t;this.__onPageChange()};s.__getPreStartNodeIndex=function(){for(var e=this.startNodeIndexMap.length-1;e>=0;e--){var t=this.startNodeIndexMap[e];if(t<this.currentNodeIndex)return t}};s.__getNextStartNodeIndex=function(){for(var e=0;e<this.startNodeIndexMap.length;e++){var t=this.startNodeIndexMap[e];if(t>this.currentNodeIndex)return t}return!1};s.__onWidthResize=function(){this.__resetTab()};s._$recycle=function(){i._$delEvent(this.tab.icon[0],"click");i._$delEvent(this.tab.icon[1],"click");this.__super()}},"e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08","d4e947987e24f4ce2260131a04872457");I$("c5bd6b5a26993ddce59cae6a164655c6",'<textarea name="ntp" id="#<lbEntry>">\n</textarea>\n\n<textarea name="jst" id="#<lbList>">\n\t<ul class="m-botentry j-flag">\n\t\t{list list as x}\n\t\t<li class="li" data-action="${x.action}" data-id="${x.id}" data-url="${x.url}" data-label="${x.label}">\n\t\t\t${x.label}\n\t\t</li>\n\t\t{/list}\n\t</ul>\n</textarea>\n');I$("dc0818cb792326d52de3dc64bfa05fba",function(e,t,i,n,a,o,s,_,r,c,d){c._$$BotEntry=e._$klass();d=c._$$BotEntry._$extend(a._$$Abstract);d.__reset=function(e){this.__super(e);var i=e.list;var n=this;this.__timer={};this.__timer["resize"]=null;if(i&&i.length>0)this.__renderList(e.list);t._$addEvent(window,"resize",function(e){if(n.__timer.resize)clearTimeout(n.__timer.resize);n.__timer.resize=setTimeout(function(){n.__ht._$dispatchEvent("onresize")},500)})};d.__destroy=function(){this.__super()};d.__initXGui=function(){var e=o._$parseUITemplate(r);return function(){this.__seed_html=e.lbEntry;this.__seed_list=e.lbList}}();d.__initNode=function(){this.__super();this.__delegate(this.__body,"li",this.__selectItem._$bind(this));i._$style(this.__body,{right:"20px",left:"20px",height:"100%",position:"absolute",overflow:"hidden"})};d.__renderList=function(e){s._$render(this.__body,this.__seed_list,{list:e});var t=i._$getByClassName(this.__body,"j-flag")[0];var e=i._$getChildren(t);this.__ht=_._$$HeadTab._$allocate({node:t,list:e})};d.__delegate=function(e,i,n){var a=this;t._$addEvent(e,"click",function(e){var a=t._$getElement(e,"t:"+i);if(a)n(a)})};d.__selectItem=function(e){var t=i._$dataset(e,"label"),n=i._$dataset(e,"action"),a=i._$dataset(e,"url");this._$dispatchEvent("select",{label:t,action:n,url:a})}},"e84bded65b98b38941ed4f3e7b9e6d19","4cd67180df9ce322f7a6a6207080bbc9","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","d4e947987e24f4ce2260131a04872457","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","5791ce1d894d724600feb9e7af867c46","c5bd6b5a26993ddce59cae6a164655c6");I$("115a03469de376c8d4087b69a0981423",function(e,t,i,n,a,o,s,_,r){_._$$WFList=e._$klass();r=_._$$WFList._$extend(a._$$Abstract);r.__init=function(){this.__super()};r.__reset=function(e){this.__super(e);this.__opt={listBox:e.listBox,scrollBox:e.scrollBox,tplSeed:e.tplSeed,scrollDelta:e.scrollDelta};this.__data={list:e.data||[],limit:e.limit,page:e.data.length/e.limit-1};this.__locked=!1;this.__doInitDomEvent([[this.__opt.scrollBox,"scroll",this.__onScroll._$bind(this)]]);this._$addEvent("listchange",this.__onListChange._$bind(this));this._$refresh()};r.__destroy=function(){this.__super()};r._$refresh=function(){s._$render(this.__opt.listBox,this.__opt.tplSeed,{beg:0,end:this.__data.list.length-1,xlist:this.__data.list})};r._$next=function(){this.__locked=!0;this._$dispatchEvent("ongetList",{page:this.__data.page+1})};r.__onListChange=function(e){var t=e.data;switch(e.action){case"append":this.__append(t);break;case"refresh":this._$refresh()}this.__locked=!1};r.__append=function(e){var t=this.__data.list.length;this.__data.list=this.__data.list.concat(e);this.__data.page++;var i=s._$get(this.__opt.tplSeed,{beg:t,end:this.__data.list.length-1,xlist:this.__data.list});this.__opt.listBox.insertAdjacentHTML("beforeend",i)};r.__onScroll=function(){if(!this.__locked){var e=this.__opt.scrollBox,i=this.__opt.listBox,n=t._$offset(i,e),a=n.y+i.offsetHeight-e.scrollTop-e.clientHeight;if(a<=this.__opt.scrollDelta)this._$next()}}},"e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","4cd67180df9ce322f7a6a6207080bbc9","d4e947987e24f4ce2260131a04872457","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610");I$("575d32837fac37c0643c0e82bfaee724",'<textarea name="ntp" id="#<orderBody>">\n\t<div class="m-modal m-modal-thirdorder">\n\t    <div class="modal_dialog">\n\t        <div class="modal_hd1">\n\t            <p class="modal_title">请选择你想咨询的订单</p>\n\t            <div class="modal_close">&times;</div>\n\t        </div>\n\t        <div class="modal_bd">\n\t\t\t\t<div class="m-thirdorder">\n\t\t\t\t\t<ul class="order-list"></ul>\n          <div class="load-status"></div>\n\t\t\t\t</div>\n\t        </div>\n\t    </div>\n\t</div>\n</textarea>\n\n<textarea name="jst" id="#<orderList>">\n\t{list beg..end as y} \n\t\t{var item=xlist[y]}\n      <li class="item">\n        <div class="shop">\n          <i class="icon u-icon-shop"></i>\n          <span class="name" title="${item.s_name}">${item.s_name}</span>\n          <span class="status" title="${item.s_status}">${item.s_status}</span>\n        </div>\n        <ul class="inner-list">\n          {list item.goods as good}\n          <li class="inner-item" data-action="select" data-orderindex="${item_index}" data-goodindex="${good_index}" data-params="${good.params}"  data-target="${good.target}" data-status="${good.p_status}" data-img="${good.p_img}" data-name="${good.p_name}" data-stock="${good.p_stock}" data-price="${good.p_price}" data-count="${good.p_count}">\n            <div class="bd">\n              <div class="left">\n                <img class="img" src="${good.p_img}">\n              </div>\n              <div class="mid">\n                <p class="name" title="${good.p_name}">${good.p_name}</p>\n                <p class="stock">${good.p_stock}</p>\n              </div>\n              <div class="right">\n                <p class="money">${good.p_price}</p>\n                <p class="count">${good.p_count}</p>\n                <p class="status">${good.p_status}</p>\n              </div>\n            </div>\n          </li>\n          {/list}\n        </ul>\n      </li>\n  {/list}\n</textarea>\n\n<textarea name="jst" id="#<orderListStatus>">\n  <div class="u-status">\n    {if status.type == \'loading\'}\n    <img src="https://qiyukf.nosdn.127.net/sdk/res/img/loading.gif?03ce3dcc84af110e9da8699a841e5200">\n    <span>${status.msg}</span>\n    {elseif status.type == \'error\' || status.type == \'empty\'}\n    <span>${status.msg}</span>\n    {/if}\n  </div>\n</textarea>');
I$("b1ad4666496649fea421dfbfa1c21de0",function(e,t,i,n,a,o,s,_,r,c,d,l,f){l._$$ThirdOrderList=e._$klass();f=l._$$ThirdOrderList._$extend(a._$$Abstract);f.__init=function(){this.__super()};f.__reset=function(e){this.__super(e);this.__listBox=t._$getByClassName(this.__body,"order-list")[0];this.__scrollBox=t._$getByClassName(this.__body,"m-thirdorder")[0];this.__nstatus=t._$getByClassName(this.__scrollBox,"load-status")[0];this.__data=_._$copy(e.data);this.__loadComplete=!1;this.__listConfig={listBox:this.__listBox,scrollBox:this.__scrollBox,tplSeed:this.__seed_list,scrollDelta:40,data:this.__data.content.template.list,ongetList:this.__getList._$bind(this)};var i=t._$getByClassName(this.__body,"modal_close")[0];this.__doInitDomEvent([[i,"click",this.__onClose._$bind(this)],[c._$$Cache,"onmorebotlist",this.__onListLoad._$bind(this)]]);_._$delegate(this,this.__listBox,{select:this.__onSelect._$bind(this)});this.__list=r._$$WFList._$allocate(this.__listConfig);this.__list._$next()};f.__destroy=function(){this.__list&&this.__list._$recycle();this.__list=null;this.__super()};f.__initXGui=function(){var e=o._$parseUITemplate(d);return function(){this.__seed_html=e.orderBody;this.__seed_list=e.orderList;this.__seed_status=e.orderListStatus}}();f.__initNode=function(){this.__super()};f.__renderStatus=function(e){s._$render(this.__nstatus,this.__seed_status,{status:e})};f.__getList=function(){if(!this.__loadComplete){this.__renderStatus({type:"loading",msg:"加载中"});c._$do(function(e){e._$getMoreBotList(this.__data.content)}._$bind(this))}};f.__onListLoad=function(e){var t=e.content;if("order_list"==t.template.id)if(e.error)this.__renderStatus({type:"error",msg:"加载失败，"+e.error.message});else if(0==t.template.list.length){this.__loadComplete=!0;this.__renderStatus({type:"empty",msg:"已经到底了"})}else{this.__renderStatus({type:"success",msg:""});this.__data.content=t;this.__list._$dispatchEvent("listchange",{action:"append",data:t.template.list});setTimeout(function(){if(this.__listBox.clientHeight<=this.__scrollBox.clientHeight)this.__list._$next()}._$bind(this),500)}};f.__onClose=function(){this._$recycle()};f.__onSelect=function(e,t){if(e){this._$dispatchEvent("onselect",e,t);this.__onClose()}}},"e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","4cd67180df9ce322f7a6a6207080bbc9","d4e947987e24f4ce2260131a04872457","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","0439ef8e10bbb734615931acccc290d4","115a03469de376c8d4087b69a0981423","d75d95943d0f2436559eb6094b78d11d","575d32837fac37c0643c0e82bfaee724");I$("b36b6a6c395058d0a06aa52e0e4de0b4",'<textarea name="ntp" id="#<inputCnt>">\n  <div class="m-input form-item j-flag">\n  </div>\n</textarea>\n<textarea name="jst" id="#<inputBody>">\n  <label class="label">\n    <span class="title">${label}</span>\n    {if required}\n    <span class="u-required">*</span>\n    {/if}\n  </label>\n  <div class="input">\n    <input type="text" class="j-input" name="${key}" maxlength="${maxlength}" value="${value}">\n  </div>\n  <div class="z-error j-error"></div>\n</textarea>\n');I$("16e3d6baae65cc5efbbdbe3a18ef745c",function(e,t,i,n,a,o,s,_,r,c,d){c._$$Input=e._$klass();d=c._$$Input._$extend(a._$$Abstract);d.__init=function(){this.__super()};d.__reset=function(e){this.__super(e);this.__data=_._$extend(e.data,{label:"",key:"",value:"",maxlength:100,rules:[]});s._$render(this.__body,this.__seed_body,e.data);this.__defineNode();this.__initEvent()};d.__destroy=function(){this.__super()};d.__initXGui=function(){var e=o._$parseUITemplate(r);return function(){this.__seed_html=e.inputCnt;this.__seed_body=e.inputBody}}();d.__initNode=function(){this.__super()};d.__defineNode=function(){this.__nerror=i._$getByClassName(this.__body,"j-error")[0];this.__ninput=i._$getByClassName(this.__body,"j-input")[0]};d.__initEvent=function(){this.__doInitDomEvent([[this.__ninput,"keyup",this.__onkeyUp._$bind(this)]])};d.__renderErrorMsg=function(e){this.__nerror.innerText=e};d.__onkeyUp=function(e){var t=this.__ninput.value;n._$forEach(this.__data.forbidden,function(e){this.__data.value=t.replace(e,"")}._$bind(this));if(t!=this.__data.value)this.__ninput.value=this.__data.value};d._$validate=function(){var e={required:function(e){var t="此信息不能为空";if(!e||""==e.trim()){this.__renderErrorMsg(t);return!1}else{this.__renderErrorMsg("");return!0}}};return function(){var t=this.__ninput.value;for(var i=0;i<this.__data.rules.length;i++){var n=this.__data.rules[i];var a=e[n.name].call(this,t);if(!a)return!1}return!0}}();d._$getData=function(){var e={key:this.__data.key,label:this.__data.label,value:this.__ninput.value,type:"input"};return e}},"e84bded65b98b38941ed4f3e7b9e6d19","4cd67180df9ce322f7a6a6207080bbc9","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","d4e947987e24f4ce2260131a04872457","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","0439ef8e10bbb734615931acccc290d4","b36b6a6c395058d0a06aa52e0e4de0b4");I$("757387c3b89ba61dda7ff8e05716201a",'<textarea name="ntp" id="#<uploadCnt>">\n  <div class="m-upload form-item j-flag">\n  </div>\n</textarea>\n<textarea name="jst" id="#<uploadBody>">\n  <label class="label">\n    <span class="title">${label}</span>\n    {if required}\n    <span class="u-required">*</span>\n    {/if}\n  </label>\n  <div class="input j-input">\n  </div>\n  <div class="z-error j-error"></div>\n</textarea>\n\n<textarea name="jst" id="#<uploadInput>">\n  {if !value}\n  <label class="j-upload" name="${key}">${uploadBtn}</label>\n  {else}\n  <label class="j-upload f-dn" name="${key}">${uploadBtn}</label>\n  <div class="preview">\n    <i class="u-close" data-action="remove"></i>\n    <div class="left">\n      <i class="cover" data-action="preview" data-url="${value.url}"></i>\n    </div>\n    <div class="right">\n      <div class="name">${value.name}</div>\n      <div class="size">${value.size|fileSizeFormat}</div>\n    </div>\n  </div>\n  {/if}\n</textarea>');I$("556a1e4dc886512337f091b38ec048dc",function(e,t,i,n,a,o,s,_,r,c,d,l,f){l._$$Upload=e._$klass();f=l._$$Upload._$extend(a._$$Abstract);f.__init=function(){this.__super();s._$extend({fileSizeFormat:c._$fileSizeFormat})};f.__reset=function(e){this.__super(e);this.__data=c._$extend(e.data,{label:"",key:"",value:"",uploadBtn:"上传附件",rules:[],accept:"*"});try{this.__data.value=JSON.parse(this.__data.value)}catch(t){}this.__render();this.__defineNode();this.__initWidget();this.__initEvent()};f.__destroy=function(){this.__super()};f.__initXGui=function(){var e=o._$parseUITemplate(d);return function(){this.__seed_html=e.uploadCnt;this.__seed_body=e.uploadBody;this.__seed_input=e.uploadInput}}();f.__initNode=function(){this.__super()};f.__render=function(){s._$render(this.__body,this.__seed_body,this.__data);this.__renderInput()};f.__renderInput=function(){var e=i._$getByClassName(this.__body,"j-input")[0];s._$render(e,this.__seed_input,this.__data)};f.__defineNode=function(){this.__nerror=i._$getByClassName(this.__body,"j-error")[0]};f.__initWidget=function(){var e=i._$getByClassName(this.__body,"j-upload")[0];var t={accept:this.__data.accept,multiple:!1,node:e,onchange:this.__onFileSelect._$bind(this)};this.__fileSel=_._$bind(e,t)};f.__initEvent=function(){c._$delegateWithStopEvent(this,this.__body,{remove:this.__removeFile._$bind(this),preview:this.__previewFile._$bind(this)})};f.__onFileSelect=function(e){this.__form=e.form;var t=i._$get(e.id),n=t.files;window.nim.previewFile({type:"file",fileInput:t,uploadprogress:this.__onUploadProgress._$bind(this),done:this.__onUploadDone._$bind(this)})};f.__onUploadProgress=function(e){};f.__onUploadDone=function(e,t){if(!e){t.url=c._$transNosToCdn(t.url,"nim");this.__data.value={url:t.url,name:t.name,size:t.size};if(!this.__checkFormat(t))this.__nerror.innerText="目前可支持上传jpg/jpeg/png/bmp/gif格式的图片";else this.__renderInput()}else this.__nerror.innerText="图片上传失败，请稍后重试"};f.__checkFormat=function(e){var t=this.__data.accept.split(",");for(var i=0;i<t.length;i++){var n=t[i];if(n.indexOf("*")>-1)return!0;n=n.split("/")[1];if(e.ext.toLowerCase()==n.toLowerCase())return!0}return!1};f.__renderErrorMsg=function(e){this.__nerror.innerText=e};f._$validate=function(){var e={required:function(e){var t="此信息不能为空";if(!e){this.__renderErrorMsg(t);return!1}else{this.__renderErrorMsg("");return!0}}};return function(){var t=this.__data.value;for(var i=0;i<this.__data.rules.length;i++){var n=this.__data.rules[i];var a=e[n.name].call(this,t);if(!a)return!1}return!0}}();f._$getData=function(){var e={key:this.__data.key,label:this.__data.label,value:this.__data.value,type:this.__data.fileType||"image"};return e};f.__previewFile=function(e,t){var n=t.target,a=i._$dataset(n,"url");if(a)window.open(a,"_blank")};f.__removeFile=function(e,t){this.__data.value=null;this.__renderInput();this.__initWidget()}},"e84bded65b98b38941ed4f3e7b9e6d19","4cd67180df9ce322f7a6a6207080bbc9","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","d4e947987e24f4ce2260131a04872457","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","940fa04144ba9d08b57524738e940640","8583e3004310ef86c1cedbd4391e971c","0439ef8e10bbb734615931acccc290d4","757387c3b89ba61dda7ff8e05716201a");I$("6f2e58f87dff9216aa1a75dd5cf7ddbe",'<textarea name="ntp" id="#<formCnt>">\n    <div class="m-form j-flag">\n    </div>\n</textarea>\n<textarea name="jst" id="#<formBody>">\n    <div class="form-hd">\n        ${title}\n    </div>\n    <div class="form-content j-form">\n    </div>\n    <div class="actions">\n        <button class="j-submit">${submitBtn}</button>\n    </div>\n</textarea>\n');I$("2231bda690cf611b8da6a47910b3f57d",function(e,t,i,n,a,o,s,_,r,c,d,l,f){l._$$Form=e._$klass();f=l._$$Form._$extend(a._$$Abstract);f.__init=function(){this.__super()};f.__reset=function(e){this.__super(e);c._$extend(e.data,{title:"请填写表单",submitBtn:"提交"});s._$render(this.__body,this.__seed_body,e.data);this.__defineNode();this.__initWidget(e.data.list||[]);this.__initEvent();
};f.__destroy=function(){this.__super()};f.__initXGui=function(){var e=o._$parseUITemplate(d);return function(){this.__seed_html=e.formCnt;this.__seed_body=e.formBody}}();f.__initNode=function(){this.__super()};f.__defineNode=function(){this.__nsubmit=i._$getByClassName(this.__body,"j-submit")[0];this.__nform=i._$getByClassName(this.__body,"j-form")[0]};f.__initWidget=function(e){var t={input:_._$$Input,image:r._$$Upload};this.__widgets=[];n._$forEach(e,function(e){var i=t[e.type]._$allocate({parent:this.__nform,data:e});this.__widgets.push(i)}._$bind(this))};f.__initEvent=function(){this.__doInitDomEvent([[this.__nsubmit,"click",this.__submit._$bind(this)]])};f.__validate=function(){var e=!0;n._$forEach(this.__widgets,function(t){var i=t._$validate();if(!i)e=!1});return e};f.__getData=function(){var e=[];n._$forEach(this.__widgets,function(t){var i=t._$getData();e.push(i)});return e};f.__submit=function(){if(this.__validate()){var e=this.__getData();this._$dispatchEvent("onsubmit",e)}}},"e84bded65b98b38941ed4f3e7b9e6d19","4cd67180df9ce322f7a6a6207080bbc9","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","d4e947987e24f4ce2260131a04872457","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","16e3d6baae65cc5efbbdbe3a18ef745c","556a1e4dc886512337f091b38ec048dc","0439ef8e10bbb734615931acccc290d4","6f2e58f87dff9216aa1a75dd5cf7ddbe");I$("57a06cf15ce84c62d86ed0df1b94b7da",'<textarea name="ntp" id="#<formCnt>">\n    <div class="m-bot-form-cnt">\n    </div>\n</textarea>\n<textarea name="jst" id="#<formBody>">\n    <div class="m-bot-form m-form j-flag">\n        <div class="form-hd">\n            <div class="portrait u-icon-avater">\n                <img src="${icon}" alt="">\n            </div>\n            <div class="title">${title}</div>\n            <div class="u-hide j-hide">\n                <i class="icon-hide"></i>\n            </div>\n        </div>\n        <div class="form-content j-form">\n        </div>\n        <div class="actions">\n            <button type="button" class="u-btn j-submit">${submitBtn}</button>\n        </div>\n    </div>\n</textarea>\n');I$("6700e60f82a1311d74e0c67b67f2b151",function(e,t,i,n,a,o,s,_,r,c,d,l){d._$$BotForm=e._$klass();l=d._$$BotForm._$extend(r._$$Form);l.__init=function(){this.__super()};l.__reset=function(e){e.data.icon=e.data.icon||"https://qiyukf.nosdn.127.net/sdk/res/default/robot_portrait@2x.png?5efee7fa6fe0f977ddf09e37822a1b7c";this.__super(e)};l.__destroy=function(){this.__super()};l.__initXGui=function(){var e=o._$parseUITemplate(c);return function(){this.__seed_html=e.formCnt;this.__seed_body=e.formBody}}();l.__initNode=function(){this.__super()};l.__defineNode=function(){this.__super();this.__nhide=i._$getByClassName(this.__body,"j-hide")[0]};l.__initEvent=function(){this.__super();this.__doInitDomEvent([[this.__nhide,"click",this.__hide._$bind(this)]])};l.__hide=function(){this._$dispatchEvent("onhide",this.__getData());this._$recycle()}},"e84bded65b98b38941ed4f3e7b9e6d19","4cd67180df9ce322f7a6a6207080bbc9","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","d4e947987e24f4ce2260131a04872457","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","0439ef8e10bbb734615931acccc290d4","2231bda690cf611b8da6a47910b3f57d","57a06cf15ce84c62d86ed0df1b94b7da");I$("25729465ea72bedadbb2a116bf54a0b0",'<textarea name="ntp" id="#<botListBody>">\n\t<div class="m-modal m-modal-botList">\n\t    <div class="modal_dialog">\n\t        <div class="modal_hd-bot">\n\t            <p class="modal_title j-title"></p>\n\t            <div class="modal_close">&times;</div>\n\t        </div>\n\t        <div class="modal_bd">\n\t\t\t\t<div class="m-botList j-scroll-box">\n\t\t\t\t\t<ul class="list">\n            <div class="m-card-layout">\n              <ul class="group-list j-list-box">\n              </ul>\n            </div>     \n          </ul>\n          <div class="load-status j-status"></div>\n\t\t\t\t</div>\n\t        </div>\n\t    </div>\n\t</div>\n</textarea>\n\n<textarea name="jst" id="#<botListList>">\n\t{list beg..end as y} \n\t\t{var group=xlist[y]}\n      {if group.action.type == "block"}\n      <li class="group-item" data-action="select" data-target="${group.action.target}" data-params="${group.action.params}" data-label="${group.action.label}" data-type="block">\n      {elseif group.action.type == "popup"}\n        <li class="group-item" data-action="select" data-target="${group.action.target}" data-params="${group.action.params}" data-label="${group.action.label}" data-type="popup">\n      {elseif group.action.type == "url"}\n      <li class="group-item" data-action="openlink" href="${group.action.target}">\n      {else}\n      <li class="group-item">\n      {/if}\n        <ul class="tr-list">\n          {list group.list as tr}\n            <li class="tr-item">\n              <ul class="td-list">\n                {list tr as td}\n                  <li class="td-item" style="${td.style}">\n                    <div class="inner" style="${td.innerStyle}">\n                      {if td.type == "text"}\n                        <span>${td.value}</span>\n                      {elseif td.type == "image"}\n                        <img src="${td.value}" alt="">\n                      {else}\n                        <span>[暂不支持的消息类型]</span>\n                      {/if}\n                    </div>\n                  </li>\n                {/list}\n              </ul>\n            </li>\n          {/list}\n        </ul>\n      </li>\n  {/list}\n</textarea>\n\n<textarea name="jst" id="#<botListStatus>">\n  <div class="u-status">\n    {if status.type == \'loading\'}\n    <img src="https://qiyukf.nosdn.127.net/sdk/res/img/loading.gif?03ce3dcc84af110e9da8699a841e5200">\n    <span>${status.msg}</span>\n    {elseif status.type == \'error\' || status.type == \'empty\'}\n    <span>${status.msg}</span>\n    {/if}\n  </div>\n</textarea>');I$("37d173ada4963c45b675de192a0bfe60",function(e,t,i,n,a,o,s,_,r,c,d,l,f){l._$$BotList=e._$klass();f=l._$$BotList._$extend(a._$$Abstract);f.__init=function(){this.__super()};f.__reset=function(e){this.__super(e);this.__listBox=t._$getByClassName(this.__body,"j-list-box")[0];this.__scrollBox=t._$getByClassName(this.__body,"j-scroll-box")[0];this.__nstatus=t._$getByClassName(this.__scrollBox,"j-status")[0];this.__ntitle=t._$getByClassName(this.__body,"j-title")[0];this.__data=_._$copy(e.data);this.__loadComplete=!1;this.__listConfig={listBox:this.__listBox,scrollBox:this.__scrollBox,tplSeed:this.__seed_list,scrollDelta:40,data:this.__data.content.template.list,ongetList:this.__getList._$bind(this)};var i=t._$getByClassName(this.__body,"modal_close")[0];this.__doInitDomEvent([[i,"click",this.__onClose._$bind(this)],[c._$$Cache,"onmorebotlist",this.__onListLoad._$bind(this)]]);_._$delegate(this,this.__listBox,{select:this.__onSelect._$bind(this)});this.__ntitle.innerText=this.__data.content.template.action.title||"";this.__list=r._$$WFList._$allocate(this.__listConfig);this.__list._$next()};f.__destroy=function(){this.__list&&this.__list._$recycle();this.__list=null;this.__autoScrollTimer&&clearTimeout(this.__autoScrollTimer);this.__super()};f.__initXGui=function(){var e=o._$parseUITemplate(d);return function(){this.__seed_html=e.botListBody;this.__seed_list=e.botListList;this.__seed_status=e.botListStatus}}();f.__initNode=function(){this.__super()};f.__renderStatus=function(e){s._$render(this.__nstatus,this.__seed_status,{status:e})};f.__getList=function(){if(!this.__loadComplete){this.__renderStatus({type:"loading",msg:"加载中"});c._$do(function(e){e._$getMoreBotList(this.__data.content)}._$bind(this))}};f.__onListLoad=function(e){var t=e.content;if("card_layout"==t.template.id)if(e.error)this.__renderStatus({type:"error",msg:"加载失败，"+e.error.message});else if(0==t.template.list.length){this.__loadComplete=!0;this.__renderStatus({type:"empty",msg:"已经到底了"})}else{this.__renderStatus({type:"success",msg:""});this.__data.content=t;this.__list._$dispatchEvent("listchange",{action:"append",data:t.template.list});this.__autoScrollTimer=setTimeout(function(){if(this.__listBox.clientHeight<=this.__scrollBox.clientHeight)this.__list._$next()}._$bind(this),500)}};f.__onClose=function(){this.__destroy()};f.__onSelect=function(e,t){if(e){this._$dispatchEvent("onselect",e,t);this.__onClose()}}},"e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","4cd67180df9ce322f7a6a6207080bbc9","d4e947987e24f4ce2260131a04872457","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","0439ef8e10bbb734615931acccc290d4","115a03469de376c8d4087b69a0981423","d75d95943d0f2436559eb6094b78d11d","25729465ea72bedadbb2a116bf54a0b0");I$("dd43b209fb5676fd554b74a38ac19699",'<textarea name="ntp" id="#<botDetailBody>">\n\t<div class="m-modal m-modal-botDetail">\n    <div class="modal_dialog">\n      <div class="modal_hd-bot">\n        <p class="modal_title j-title"></p>\n        <div class="modal_close">&times;</div>\n      </div>\n      <div class="modal_bd">\n  \t\t\t<div class="m-botDetail">\n  \t\t\t\t<ul class="list j-list"></ul>\n  \t\t\t</div>\n        <div class="load-status j-status"></div>\n      </div>\n    </div>\n\t</div>\n</textarea>\n\n<textarea name="jst" id="#<botDetailList>">\n  <div class="m-card-layout">\n    <ul class="group-list">\n    \t{list list as group} \n        <li class="group-item">\n          <ul class="tr-list">\n            {list group as tr}\n              <li class="tr-item">\n    \t\t\t\t\t\t<div class="left" style="${tr.left.style}">\n                  <div class="inner" style="${tr.left.innerStyle}">\n      \t\t\t\t\t\t\t{if tr.left.type == \'text\'}\n                \t\t\t<span>${tr.left.value}</span>\n                \t\t{elseif tr.left.type == \'image\'}\n                \t\t\t<img src="${tr.left.value}" alt="">\n                    {else}\n                      <span>[暂不支持的消息类型]</span>\n      \t\t\t\t\t\t\t{/if}\n                  </div>\n    \t\t\t\t\t\t</div>\n    \t\t\t\t\t\t<div class="right" style="${tr.right.style}">\n                  <div class="inner" style="${tr.right.innerStyle}">\n      \t\t\t\t\t\t\t{if tr.right.type == \'text\'}\n                \t\t\t<span>${tr.right.value}</span>\n                \t\t{elseif tr.right.type == \'image\'}\n                \t\t\t<img src="${tr.right.value}" alt="">\n                    {else}\n                      <span>[暂不支持的消息类型]</span>\n      \t\t\t\t\t\t\t{/if}\n                  </div>\n    \t\t\t\t\t\t</div>\n              </li>\n            {/list}\n          </ul>\n        </li>\n      {/list}\n    </ul>\n  </div>\n</textarea>\n\n<textarea name="jst" id="#<botDetailStatus>">\n  <div class="u-status">\n    {if status.type == \'loading\'}\n    <img src="https://qiyukf.nosdn.127.net/sdk/res/img/loading.gif?03ce3dcc84af110e9da8699a841e5200">\n    <span>${status.msg}</span>\n    {elseif status.type == \'error\'}\n    <span>${status.msg}</span>\n    {/if}\n  </div>\n</textarea>');
I$("14f9f9707c89632987f079b739c51b7d",function(e,t,i,n,a,o,s,_,r,c,d,l,f){l._$$BotDetail=e._$klass();f=l._$$BotDetail._$extend(a._$$Abstract);f.__init=function(){this.__super()};f.__reset=function(e){this.__super(e);this.__nlist=t._$getByClassName(this.__body,"j-list")[0];this.__ntitle=t._$getByClassName(this.__body,"j-title")[0];this.__nstatus=t._$getByClassName(this.__body,"j-status")[0];this.__data=_._$copy(e.data);if(this.__data.content){this.__data.content.template.id="pair";i._$merge(this.__data.content.template,this.__data.content.template.detail);this.__onDataLoad({error:null,content:this.__data.content})}else if(this.__data.request)this.__getData(this.__data.request);var n=t._$getByClassName(this.__body,"modal_close")[0];this.__doInitDomEvent([[n,"click",this.__onClose._$bind(this)],[c._$$Cache,"onmorebotdetail",this.__onDataLoad._$bind(this)]])};f.__destroy=function(){this.__super()};f.__initXGui=function(){var e=o._$parseUITemplate(d);return function(){this.__seed_html=e.botDetailBody;this.__seed_list=e.botDetailList;this.__seed_status=e.botDetailStatus}}();f.__initNode=function(){this.__super()};f.__renderList=function(){s._$render(this.__nlist,this.__seed_list,this.__data.content.template)};f.__rendStatus=function(){s._$render(this.__nstatus,this.__seed_status,{status:this.__data.status});if("success"==this.__data.status.type)t._$addClassName(this.__nstatus,"f-dn");else t._$delClassName(this.__nstatus,"f-dn")};f.__renderTitle=function(){this.__ntitle.innerText=this.__data.content.template.label||""};f.__getData=function(e){this.__data.status={type:"loading",msg:""};this.__rendStatus();c._$do(function(t){t._$getMoreBotDetail(e)}._$bind(this))};f.__onDataLoad=function(e){var t=e.content;if("pair"==t.template.id)if(e.error){this.__data.status={type:"error",msg:"加载失败，"+e.error.message};this.__rendStatus()}else{if(0==t.template.list.length)this.__data.status={type:"error",msg:t.template.label};else{this.__data.status={type:"success",msg:""};this.__data.content=e.content}this.__rendStatus();this.__renderTitle();this.__renderList()}};f.__onClose=function(){this.__destroy()}},"e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","780a96dd705b8404d9982fdccc656c08","4cd67180df9ce322f7a6a6207080bbc9","d4e947987e24f4ce2260131a04872457","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","0439ef8e10bbb734615931acccc290d4","115a03469de376c8d4087b69a0981423","d75d95943d0f2436559eb6094b78d11d","dd43b209fb5676fd554b74a38ac19699");I$("a00a32e61e2b942574493bbe4122a1e2",function(e,t,i,n,a,o,s,_,r,c,d,l,f,u,h,m,p,g,b,$,v,y,C,x,S,I){S._$$Module=e._$klass();I=S._$$Module._$extend(_._$$Module);I.__init=function(e){this.__super(e);this.__evalModal={};this.__nScrollContainer=t._$getByClassName(document.body,"f-scrocnt")[0];this.__nUpscroll=t._$getByClassName(document.body,"j-upscroll")[0];this.__upscrollStatus="init";var i=c._$getConfig("client_input");this.__thSendInputContent=v._$throttle(this.__sendInputContent,1e3*i.sendingRate)._$bind(this)};I.__reset=function(e){this.__super(e);this.__doInitDomEvent([[document.body,"click",this.__onClickBox._$bind(this)],[r._$$Cache,"onevalmsgid",this.__onEvalMessageId._$bind(this)],[this.__nScrollContainer,"scroll",this.__onScroll._$bind(this)]]);c._$batEvent({onconnect:this.__onConnect._$bind(this),onfinish:this.__onFinish._$bind(this),ondisconnect:this.__onDisconnect._$bind(this),onkefuerror:this.__onDisconnect._$bind(this),onnokefu:this.__onNokefu._$bind(this),onnokefunoleave:this.__onNokefuNoLeave._$bind(this),onkickout:this.__onFinish._$bind(this),onusererror:this.__onUserErr._$bind(this),onqueuestart:this.__onQueueStart._$bind(this),onqueuechange:this.__onQueue._$bind(this),onovertime:this.__onOverTime._$bind(this),onshunt:this.__onShuntEntries._$bind(this),onshuntstatus:this.__onShuntStatus._$bind(this),ontransferresult:this.__onTransferResult._$bind(this),onproducterror:this.__onProductError._$bind(this),onevalresultmsg:this.__cbReceiveResultEvaluate._$bind(this),onbotentry:this.__onBotEntry._$bind(this),unbotentry:this.__unBotEntry._$bind(this),onconfig:this.__onConfig._$bind(this)});this.__cache=r._$$Cache._$allocate({onerror:function(e){if(e&&"NotAnImage"===e.code){var t="目前可支持传送jpg/jpeg/png/bmp/gif格式的图片";this.__showTip(t,!0);this.__editor._$resetFile()}}._$bind(this),onofflinemsgsend:this.__onSendLeave._$bind(this),onhistorylistload:this.__onHistoryListLoad._$bind(this),onhistorylistloaderr:this.__onHistoryListLoadErr._$bind(this),onhistorylistend:this.__onHistoryListEnd._$bind(this)})};I.__destroy=function(){this.__doClearComponent();this.__super()};I.__doScrollBottom=function(e){var t=this.__nScrollContainer;if(this.__scrollTimer){clearTimeout(this.__scrollTimer);delete this.__scrollTimer}this.__scrollTimer=setTimeout(function(){t.scrollTop=2*t.scrollHeight},100)};I.__doScrollToFill=function(){var e=this.__nScrollContainer;if(this.__upscrollTimer){clearTimeout(this.__upscrollTimer);delete this.__upscrollTimer}this.__upscrollTimer=setTimeout(function(){var i=t._$getByClassName(e,"j-history-split");if(!(i.length<2)){var n=Math.abs(t._$offset(i[0],document.body).y-t._$offset(i[1],document.body).y)-50;e.scrollTop=n<0?0:n}}._$bind(this),100)};I.__onAfterInsert=function(e){if("afterBegin"==e.pos&&this.__historyHasLoad)this.__doScrollToFill();else this.__doScrollBottom()};I.__onAfterUpdate=function(e){var t=e.data;if(this.__isResend&&t.state===-1){this.__isResend=0;var i="网络连接失败，请稍后再试";this.__showTip(i,!0);this.__editor._$resetFile()}};I.__onEmptyList=function(e){e.stopped=!0};I.__onAfterListLoad=function(e){var t=this;t.__doScrollBottom.call(t);if(!this.__isRobot&&1==this.__isChatting)c._$sendPrdMsg();this.__listHasLoad=!0;this.__cache._$getHistory({isFirst:!0})};I.__setCommentBtnState=function(e){if(0===e){t._$replaceClassName(this.__commentBtn,"f-dn","z-dis");this.__commentBtn.disabled=!0;this.__setActionBtnState(0)}else if(1===e){t._$delClassName(this.__commentBtn,"z-dis f-dn");this.__commentBtn.disabled=!1;this.__setActionBtnState(0)}else if(2===e)t._$addClassName(this.__commentBtn,"f-dn")};I.__initEvaluatonForm=function(){var e=c._$getEvaluation();this.__evalModal[e.type]=m._$$EvaluateModal._$allocate({form:e,parent:document.body,submit:this.__evalSubmit._$bind(this)})};I.__doComment=function(e,i){var n=Number(t._$dataset(e,"initial")||0),a=t._$dataset(e,"sid"),o=t._$dataset(e,"mid"),s=t._$dataset(e,"type")||c._$getEvaluation().type,_=c._$getSessionID();if(n)if(this.__commentBtn.disabled)return;this.__evalModal[s]._$showModal(n,a,o)};I.__evalSubmit=function(e){var i=c._$getSessionID();e=n._$merge(e,{sid:e.sid||i,id:e.id||c._$getEvaluation().id});if(e.flag){var a=t._$getByClassName(document.body,"j-flagcomment");if(a.length){var o=t._$dataset(a[a.length-1],"sid");if(o==i)e.flag=0}}this.__cache._$sendEvalMessage(e,e.flag);if(e.sid==i)this.__setCommentBtnState(0)};I.__cbReceiveResultEvaluate=function(e){if(e.sid==c._$getSessionID())this.__setCommentBtnState(0)};I.__onEvalMessageId=function(e){var t=document.getElementById("comment_btn");if(t)t.setAttribute("data-mid",e)};I.__onScroll=function(){var e;return function(t){i._$stop(t);if("loading"!=this.__upscrollStatus&&"end"!=this.__upscrollStatus){if(!e)e=this.__nScrollContainer.scrollTop;var n=this.__nScrollContainer.scrollTop<e?"up":"down";if("up"==n&&this.__nScrollContainer.scrollTop<=20){this.__upscrollStatus="loading";this.__renderUpscroll();this.__cache._$getHistory({isFirst:!this.__historyHasLoad})}e=this.__nScrollContainer.scrollTop}}}();I.__renderUpscroll=function(){o._$render(this.__nUpscroll,"upscroll",{status:this.__upscrollStatus,historyHasLoad:this.__historyHasLoad});if("loading"==this.__upscrollStatus||"error"==this.__upscrollStatus)this.__nScrollContainer.scrollTop=0};I.__onHistoryListLoad=function(){this.__upscrollStatus="success";this.__renderUpscroll();this.__historyHasLoad=!0};I.__onHistoryListLoadErr=function(){this.__upscrollStatus="error";this.__renderUpscroll()};I.__onHistoryListEnd=function(){this.__upscrollStatus="end";this.__renderUpscroll()};I.__onBotEntry=function(e){e=e||[];if(0!==e.length){var i=t._$getByClassName(document.body,"j-flag-bot")[0],n=t._$getByClassName(document.body,"f-scrocnt")[0];var a=t._$getStyle(i,"bottom");t._$style(i,{opacity:1});t._$style(n,{bottom:parseInt(a.replace(/px/gi,""))+i.offsetHeight+"px"});if(this.__botentry)this.__botentry._$recycle();this.__botentry=b._$$BotEntry._$allocate({parent:i,list:e,select:this.__onBotSelect._$bind(this)})}};I.__unBotEntry=function(){var e=t._$getByClassName(document.body,"j-flag-bot")[0],i=t._$getByClassName(document.body,"f-scrocnt")[0];t._$style(i,{bottom:t._$getStyle(e,"bottom")});t._$style(e,{opacity:0,"z-index":-100})};I.__onBotSelect=function(e){var t=e.action;if(1==t)this.__sendMsg({type:"text",content:e.label});else if(2==t)window.open(e.url,"bot-"+e.label)};I.__showBotForm=function(e,i){var n=t._$dataset(e,"id"),a=t._$dataset(e,"sid");if(a==c._$getSessionID()&&c._$canSendMessage()){var o=this.__cache._$getItemInCache(n);if(o)this.__initBotForm(o)}else{var s="该会话已结束，表单已失效";this.__showTip(s,!0)}};I.__initBotForm=function(e){this.__editor&&this.__editor._$blur();var t=e.content.template;n._$forEach(t.forms,function(e){e.key=e.id;e.rules=[];if(e.required)e.rules.push({name:"required",value:e.required});if("image"==e.type){var t=navigator.userAgent;var i=t.match(/MicroMessenger\/([\d\.]+)/i);if(/android/.test(t.toLowerCase())&&i&&parseFloat(i[1])>6.3)e.accept="image/*";else e.accept="image/jpg,image/jpeg,image/png,image/bmp,image/gif"}else if("input"==e.type)e.forbidden=["&"]});this.__botForm=y._$$BotForm._$allocate({parent:this.__chatBox||document.body,data:{list:t.forms,title:t.label,icon:e.from.portrait,submitBtn:"提交"},onhide:this.__onBotFormHide._$bind(this,e),onsubmit:this.__onBotFormSubmit._$bind(this,e)})};I.__onBotFormSubmit=function(e,t){var i=e.content.template,a=i.params;n._$forEach(t,function(e){var t="image"==e.type?JSON.stringify(e.value):e.value;var i=e.key+"="+t;a+="&"+i});a+="&msgIdClient="+e.msgIdClient;
if(c._$canSendMessage()){this.__cache._$sendMessage({type:"crm-thirdorder",content:{params:a,template:{id:"qiyu_template_botForm",forms:t}}});i.submitted=1;this.__cache._$updateMessage(e);this.__botForm._$recycle()}else{this.__botForm._$recycle();var o="该会话已结束，表单已失效";this.__showTip(o,!0)}};I.__onBotFormHide=function(e,t){var i=e.content.template;n._$forEach(i.forms,function(e,i){e.value=t[i].value});this.__cache._$updateMessage(e)};I.__onSelectBotCard=function(e,n){i._$stop(event);var a=t._$dataset(e,"target"),o=t._$dataset(e,"params"),s=t._$dataset(e,"label"),_=t._$dataset(e,"type");if("popup"==_)x._$$BotDetail._$allocate({parent:document.body,data:{request:{target:a,params:o}}});else if(!a)this.__sendMsg({type:"text",content:s});else this.__sendMsg({content:{target:a,params:o,template:{id:"qiyu_template_text",label:s}},type:"crm-thirdorder"})};I.__onBotDetail=function(e,i){var n=t._$dataset(e,"id"),a=this.__cache._$getItemInCache(n);if(a)x._$$BotDetail._$allocate({parent:document.body,data:{request:{target:a.content.template.target,params:a.content.template.params},content:a.content}})};I.__onMoreBotCard=function(e,i){this.__send(function(){var i=t._$dataset(e,"id"),n=this.__cache._$getItemInCache(i);C._$$BotList._$allocate({parent:document.body,data:n,onselect:this.__onSelectBotCard._$bind(this)})}._$bind(this))};I.__send=function(e){if(this.__isChatting){if(1==c._$keepConnection){c.__doDisConnect();c._$keepConnection=0}if(c._$canSendMessage())e();else{this.__editor&&this.__editor._$resetFile();if(!this.__isRobot)this.__editor&&this.__editor._$toast("请等待连线成功后，再发送消息");if(this.__isChatting||1==window.setting.pushSwitch){window.setting.pushSwitch=0;var i=t._$getByClassName(this.__listConf.parent,"j-finish")[0];t._$remove(i);this.__tmpEventMsg=event;this.__doConnect()}}}};I.__receiveThirdOrder=function(e){n._$merge(e,{type:"crm-thirdorder"});var t=e.content.template;if(t&&"bot_form"==t.id)this.__initBotForm(e)};I.__onSelectThirdOrder=function(e,n){i._$stop(n);var a=t._$dataset(e,"target"),o=t._$dataset(e,"params"),s=t._$dataset(e,"status"),_=t._$dataset(e,"img"),r=t._$dataset(e,"name"),c=t._$dataset(e,"stock"),d=t._$dataset(e,"price"),l=t._$dataset(e,"count");this.__sendMsg({content:{target:a,params:o,template:{id:"qiyu_template_goods",p_status:s,p_img:_,p_name:r,p_stock:c,p_price:d,p_count:l}},type:"crm-thirdorder"})};I.__onSendThirdOrderAction=function(e,n){i._$stop(n);var a=t._$dataset(e,"target"),o=t._$dataset(e,"params"),s=t._$dataset(e,"label");if(!a)this.__sendMsg({type:"text",content:s});else this.__sendMsg({content:{target:a,params:o,template:{id:"qiyu_template_text",label:s}},type:"crm-thirdorder"})};I.__onConfig=function(e){var t=c._$getConfig(e.type);switch(e.type){case"client_input":this.__thSendInputContent=v._$throttle(this.__sendInputContent,1e3*t.sendingRate)}};I.__onInputChange=function(e){if(c._$canSendMessage())this.__thSendInputContent(e.substring(0,4500))};I.__sendInputContent=function(){var e;return function(t){if(t!=e){var i=c._$getConfig("client_input");if(!this.__isRobot&&i["switch"])c._$sendInputContent({sessionId:c._$getSessionID(),content:t});e=t}}}()},"e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","1e81d1884b46bf4bdbf59103ab669284","2137f385e9bbd5978a6a1d0b6271ef2c","d75d95943d0f2436559eb6094b78d11d","6cabb143c99287da4b40b5b45f0c77e4","186691795a2fc1193976edeb8747c76d","7af663264574a4890d1d6945b73ab82f","59486eaf249342cac1b5b90408aaa0bc","8fd72c7e0540f7cdb299f6ddb8bbd1ab","e7fe559a934e9f3b6e372effae2b8215","3c79b85c8f9d273108d56c2535ce239a","a59d2c87e9141105094aa7628e8fb3e4","a65f10bd97b7e6580861baf173f7b424","dc0818cb792326d52de3dc64bfa05fba","b1ad4666496649fea421dfbfa1c21de0","0439ef8e10bbb734615931acccc290d4","6700e60f82a1311d74e0c67b67f2b151","37d173ada4963c45b675de192a0bfe60","14f9f9707c89632987f079b739c51b7d");I$("04938f5b0692d2fcd6f3951b2dc4f646",function(e,t,i,n,a,o,s,_,r,c,d,l,f,u,h,m,p,g,b,$,v,y,C){y._$$Module=t._$klass();C=y._$$Module._$extend(e._$$Module);C.__init=function(e){this.__super(e);this.__title=document.title;this.__isChatting=0;var t=i._$getByClassName(document.body,"j-flag");this.__headName=i._$getByClassName(document.body,"j-headflag")[0]?i._$getByClassName(document.body,"j-headflag")[0]:{};this.__headIcon=i._$getByClassName(document.body,"j-iconflag")[0]?i._$getByClassName(document.body,"j-iconflag")[0]:{};this.__box=t[0];this.__sendForm=t[2];b._$media(t[1]);this.__commentBtn=i._$get("comment_btn");this.__actionBtn=i._$get("action_btn");this.__errTip=i._$getByClassName(document.body,"j-tip");this.__pushNode=i._$getByClassName(t[1].parentNode,"j-flagpush")[0];this.__chatBox=i._$getByClassName(this.__box,"j-chat")[0];this.__listConf={limit:1e4,parent:t[1],item:{ext:{},klass:"session-item",config:appConfig,theme:theme,imgfilter:function(e){e=e||"";if(e.indexOf("://")>=0)return e;else return appConfig.path.sdk+e},imgclip:function(e){e=(e||"")+"?imageView&type=png|imageView&thumbnail=76y76&axis=5";if(e.indexOf("://")>=0)return e;else return appConfig.path.sdk+e},filterTagA:function(e){e=e||"";return e.replace(/<a[^>]*>([\s\S]*?)<\/a>/gi,function(e,t){return t})},filterHref:function(e){e=e||"";var t=/(<a)/g;return e.replace(t,'$1 target="_blank"')},fileSizeFormat:v._$fileSizeFormat,fileProgressFormat:function(e){var t=e.content.size,i=0;if(e.progressObj)i=e.progressObj.loaded;if(i>t)i=t;if(t>Math.pow(1024,2))return v._$fileSizeFormat(i,"MB")+"/"+v._$fileSizeFormat(t,"MB")+"MB";else if(t>1024)return v._$fileSizeFormat(i,"KB")+"/"+v._$fileSizeFormat(t,"KB")+"KB";else return v._$fileSizeFormat(i,"B")+"/"+v._$fileSizeFormat(t,"B")+"B"},formatDownloadUrl:function(e){if(e)return e.replace(/^http:/,"https:")},spliceSuffix:v._$spliceSuffix,text2portrait:h._$text2portrait,complete:c._$completeURL,d2w:b._$dur2width,duration:b._$dur2time,urlFormat:function(e){e=e||"";e=e.trim();var t=/^http[s]?:\/\//.test(e);return t?e:"http://"+e},escapeWithoutSpace:v._$escapeWithoutSpace},cache:{lkey:"msg-all",klass:c._$$Cache},onafterinsert:this.__onAfterInsert._$bind(this),onafterupdate:this.__onAfterUpdate._$bind(this),onemptylist:this.__onEmptyList._$bind(this),onafterlistload:this.__onAfterListLoad._$bind(this)};this.__sopt={parent:t[1].parentNode};s._$extend({timeformat:function(e,t){if(0===t||new Date(t).getFullYear()===new Date(e).getFullYear())return a._$format(e,"HH:mm");else return a._$format(e,"yyyy-MM-dd HH:mm")},timeformatEx:function(e){var t=864e5,i=+new Date;if((new Date).getFullYear()==new Date(e).getFullYear())if(i-e<=t)return"今天"+a._$format(e,"HH:mm:ss");else if(i-e<=2*t)return"昨天"+a._$format(e,"HH:mm:ss");else return a._$format(e,"MM-dd HH:mm:ss");else return a._$format(e,"yyyy-MM-dd HH:mm:ss")}});this.__eopt={popt:{parent:"gbody",col:12},log:"fk-sp",maxLength:4500,parent:t[2],onsubmit:this.__sendMsg._$bind(this),checkcansendfile:this.__checkCanSendFile._$bind(this),oninputchange:this.__onInputChange._$bind(this)};n._$addEvent(window,"message",this.__cbReceiveSdkMsg._$bind(this));n._$addEvent(window,"beforeunload",function(){this.__clearLocalItems(this.__findLocalItems(/YSF-MSGID-/gi));this.__clearLocalItems(this.__findLocalItems(/YSF-SATISFY-/gi))}._$bind(this))};C.__reset=function(e){this.__super(e);this.__doInitDomEvent([[c._$$Cache,"fileuploadprogress",this.__onFileUploadProgress._$bind(this)],[c._$$Cache,"onthirdorder",this.__receiveThirdOrder._$bind(this)],[document,"visibilitychange",this.__onVisibilityChange._$bind(this)]]);d._$batEvent({onpushmessage:this.__cbReceivePushMsg._$bind(this),oncansendfile:this.__onCanSendFile._$bind(this)});d._$addEvent("onmessage",this.__onMessage._$bind(this));n._$addEvent(window,"resize",function(e){if(this.__sclist){this.__calculateCampanyInfo();this.__sclist._$resize()}}._$bind(this));this.__editor=f._$$YSFEditor._$allocate(this.__eopt);this._$disable(!0);this.__editor._$toggleOpr(!0);if(1!=window.setting.dialogStyle){this.__doConnect();n._$addEvent(window,"beforeunload",this.__onBeforeUnload._$bind(this))}if(i._$getByClassName(document.body,"j-comquestions")){this.__calculateCampanyInfo();this.__sclist=l._$$Scrollbar._$allocate({parent:i._$getByClassName(document.body,"j-comquestions")[0]});this.__scinfo=l._$$Scrollbar._$allocate({parent:i._$getByClassName(document.body,"j-announceinfo")[0]})}};C.__destroy=function(){this.__doClearComponent();this.__super()};C.__onClickBox=function(){var e={toqiyu:function(){window.open("https://www.qiyukf.com/")},resend:function(e){this.__sendMsg({id:i._$dataset(e,"id")},!0)},reconnect:function(e){this.__hideTip();var t=i._$getByClassName(this.__listConf.parent,"j-finish")[0];i._$remove(t);d.__sdkWindowStatus=1;this.__doConnect(!1,!0)},reconnectshunt:function(){this.__hideTip();var e=i._$getByClassName(this.__listConf.parent,"j-finish")[0];i._$remove(e);d.__sdkWindowStatus=1;this.__doConnect(!1,!0)},selRobot:function(e){var t=i._$dataset(e,"id");if(t)if(!this.__isRobot){var n=this.__cache._$getRobotItem(t);if(!n)return;var a=n.question;this.__sendMsg({type:"text",content:a})}else this.__send(function(){this.__cache._$sendRobotMessage(t)}._$bind(this))},selShunt:function(e){var t=i._$dataset(e,"id"),n=i._$dataset(e,"type"),a=i._$dataset(e,"disabled"),o=i._$dataset(e,"entryid");if(1!=a&&null!=t&&null!=n&&null!=o){var s=1==n?{staffid:0,groupid:t,entryid:o}:{staffid:t,groupid:0,entryid:o};if(t){window.__shuntdata__=s;d._$sendSelectShunt(s);this.__disableShuntList(1)}}},pictureHref:function(e){var t=i._$dataset(e,"href");window.open(t,"_blank")},productHref:function(e){var t=i._$dataset(e,"href");window.open(t,"_blank")},applyKf:function(e){if(this.__isRobot){this.__botForm&&this.__botForm._$recycle();this._$disable(!0);this.__hideTip();var t=i._$getByClassName(this.__listConf.parent,"j-finish")[0];t&&i._$remove(t);if(d._$canSendMessage()){i._$delClassName(this.__errTip[1],"f-dn");this.__cache._$sendAction("kefu");this.__setCommentBtnState(0);
this.__editor._$blur(!0)}else this.__doConnect(!0)}},hideIframe:function(){parent.postMessage("pkg:"+JSON.stringify({category:"closeIframe"}),"*")},comment:function(e,t){this.__doComment(e,t)},richContentDelegate:function(e,t){t=t||window.event;var a=n._$getElement(t,"d:group");if(a){var o=i._$dataset(a,"url");window.open(o,"_blank")}var s=n._$getElement(t,"t:a");if(!s);else{var o=i._$attr(s,"href"),_=i._$dataset(s,"name");if("kefu"==_||"qiyu://action.qiyukf.com?command=applyHumanStaff"==o){n._$stopDefault(t);var r=i._$dataset(s,"id"),c=i._$dataset(s,"disabled");if(c)return;this.__applyHumanStaff(s,r)}else i._$attr(s,"target","_blank")}},leaveMsg:function(){var e={};var t=i._$get("leaveForm");if(t){if(t.mobile)e.mobile=t.mobile.value.trim();if(t.email)e.email=t.email.value.trim();if(this.__validateLeaveForm()){t.leaveBtn.innerText="发送中...";e.content=t.content.value.trim();this.__cache._$sendOfflineMessage({type:"text",content:e})}}},close:function(){if(1!=window.setting.dialogStyle)window.close();else parent.postMessage("pkg:"+JSON.stringify({category:"closeIframe"}),"*")},questionlist:function(e){var t=e.parentNode.parentNode,n=e.parentNode.getElementsByTagName("p")[0],a=e.parentNode.getElementsByTagName("i")[0],o=i._$hasClassName(a,"u-icon-infodown");this.__disableQuestionList(t);if(o){i._$delClassName(n,"f-dn");i._$replaceClassName(a,"u-icon-infodown","u-icon-infoup")}else{i._$replaceClassName(a,"u-icon-infoup","u-icon-infodown");i._$addClassName(n,"f-dn")}},openlink:function(e,t){n._$stop(t);var a=i._$attr(e,"href");window.open(a)},thirdorderList:function(e,t){this.__onSelectThirdOrder(e,t)},moreOrder:function(e,t){this.__send(function(){var t=i._$dataset(e,"id"),n=this.__cache._$getItemInCache(t);$._$$ThirdOrderList._$allocate({parent:document.body,data:n,onselect:this.__onSelectThirdOrder._$bind(this)})}._$bind(this))},moreBotCard:function(e,t){this.__onMoreBotCard(e,t)},selectBotCard:function(e,t){this.__onSelectBotCard(e,t)},botCardDetail:function(e,t){this.__onBotDetail(e,t)},thirdorderStatus:function(e,t){this.__onSendThirdOrderAction(e,t)},thirdorderService:function(e,t){this.__onSendThirdOrderAction(e,t)},abortFileTrans:function(e,t){var n=i._$dataset(e,"id");c._$do(function(e){e._$abortFileTrans(n)})},download:function(e,t){var n=i._$dataset(e,"url"),a=i._$dataset(e,"name");var o=(window.setting.remoteRoot||"")+n+"?download="+encodeURIComponent(a);i._$createXFrame({visible:!1,src:o})},evalRobotAnswer:function(e,t){var n=i._$dataset(e,"id"),a=i._$dataset(e,"sid"),o=i._$dataset(e,"idclient"),s=i._$dataset(e,"evaluation");if(!i._$hasClassName(e,"z-sel"))if(a==d._$getSessionID())if(d._$canSendMessage())d._$evalRobotAnswer({id:n,msgIdClient:o,evaluation:s});else{var _="会话已结束，暂不支持评价";this.__showTip(_,!0)}else{_="该会话已结束，暂不支持评价";this.__showTip(_,!0)}},showBotForm:function(e,t){this.__showBotForm(e,t)}};return function(t){e.leaveCancel=this.__onCancelLeave;var o=n._$getElement(t,"d:action");if(o){var s=e[i._$dataset(o,"action")];if(a._$isFunction(s))s.call(this,o,t)}}}();C.__doConnect=function(e,t){this.__editor._$toggleOpr(!0);if(this.__isChatting){if(!this.__isRobot)i._$delClassName(this.__errTip[1],"f-dn")}else{if(this.__list)this.__list._$recycle();this.__listConf.parent.innerHTML=o._$getTextTemplate("chat-connecting")}d._$connect(window.setting,e,t)};C.__onConnect=function(e){this.__getWebAnalyticsInfo(e);if(3!==this.__isChatting){this.__hideTip();i._$addClassName(this.__errTip[1],"f-dn");this.__isChatting=1;var t=this.__listConf.item.ext.kefuid;this.__listConf.item.ext.kefuid=e.id;this._$disable(!1);if(!this.__list){this.__list=_._$$ListModuleWF._$allocate(this.__listConf);d._$hasList=1}this.__switchKefuEntry(t,e);if(!e.hasEvaluated){this.__setCommentBtnState(1);if(!e.hasKefuEntry)this.__initEvaluatonForm()}var n=e.isRobot;if(e.isRobot){n=!0;this.__headName.innerHTML=d._$getKefu().nickname||"";if(1==window.setting.dialogStyle){this.__headIcon.style.display=this.__headName.innerHTML?"inline":"none";this.__headIcon.setAttribute("src",d._$getKefu().portrait||appConfig.path.sdk+"res/default/robot_portrait.png")}this.__listConf.item.ext.isRobot=!0;this.__setCommentBtnState(2);this.__editor._$toggleOpr(!0)}else{n=!1;this.__headName.innerHTML=d._$getKefu().nickname||"";this.__listConf.item.ext.isRobot=!1;this.__editor._$toggleOpr(!1);if(1==window.setting.dialogStyle){this.__headIcon.style.display=this.__headName.innerHTML?"inline":"none";this.__headIcon.setAttribute("src",d._$getKefu().portrait||appConfig.path.sdk+"res/img/test/kefu-1.png?imageView&type=png|imageView")}if(!e.hasKefuEntry){if(this.__listHasLoad)d._$sendPrdMsg();d._$sendKefuHeart(d._$getSessionID())}}if(e.hasKefuEntry)this.__setActionBtnState(1);if(this.__isRobot)if(this.__tmpEventMsg)this.__sendMsg(this.__tmpEventMsg);delete this.__tmpEventMsg;this.__isRobot=n}else this.__headName.style&&(this.__headName.style.paddingLeft="10px")};C.__doInitKefu=function(e){if(2!==this.__isChatting){var t=d._$getKefu();if(!t)return;a._$merge(t,{welcome:e.isRobot?"":e.welcome});this.__listConf.parent.insertAdjacentHTML("beforeEnd",s._$get("chat-kefu",t));this.__doScrollBottom()}};C.__doInitShunt=function(e){if(e.nickname)if(2!==this.__isChatting){var t={nickname:e.nickname,groupname:e.groupname,welcome:e.welcome||""};this.__listConf.parent.insertAdjacentHTML("beforeEnd",s._$get("chat-kefu-shunt",t));this.__doScrollBottom()}};C.__onTransferResult=function(e){if(2!==this.__isChatting){this.__listConf.parent.insertAdjacentHTML("beforeEnd",s._$get("trans-kefu",e));this.__headName.innerHTML=e.staffName;d._$setSessionID(e.sessionId);this.__setCommentBtnState(1);this.__doScrollBottom()}};C.__onFinish=function(e){var t={0:e.message||"客服已关闭会话",1:"由于您长时间不在线，会话已结束",2:e.message||"本次会话已超时结束",4:"客服离开，会话已结束"};var n=i._$getByClassName(this.__listConf.parent,"j-finish")[0];i._$remove(n);if(!e)var a="会话已断开，如需继续咨询";else a=t[e.closeReason]||"";if(this.__isRobot&&1==e.closeReason)a="本次会话已超时结束";this.__listConf.parent.insertAdjacentHTML("beforeEnd",s._$get("chat-finish",{msg:a}));if(!this.__isRobot)if(3===this.__isChatting)this.__setCommentBtnState(2);this.__doScrollBottom()};C.__onDisconnect=function(){if(1!=window.setting.getPushSwitch){i._$addClassName(this.__errTip[1],"f-dn");var e='连接客服失败，你可以尝试<a href="#" data-action="reconnect">重新连接</a>';this.__showTip(e);if(!this.__isChatting)i._$clearChildren(this.__listConf.parent);if(3===this.__isChatting){this.__setCommentBtnState(2);this.__setActionBtnState(0)}else this.__setCommentBtnState(0)}else window.setting.getPushSwitch=0};C.__validateLeaveForm=function(){var e={};var t;var n={email:[/^\w+[-.\w]*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,/^[^@]{1,30}@[^@]{1,30}$/],mobile:[/^\d{11}$/]};var o=function(o){var _=!0;if(e.email&&!e.email.value&&(!o||"email"==o)||e.mobile&&!e.mobile.value&&(!o||"mobile"==o)||!t&&(!o||"content"==o))return!1;a._$forEach(["mobile","email"],function(t){if(o==t||!o){var a=e[t];var r=!0;if(a&&a.must){var c=a.value;var d=n[t];for(var l=0,f=d.length;l<f;l++)if(!d[l].test(c))r=!1}if(a&&!r){a.err.innerText=a.errTip;i._$delClassName(a.err,"f-dn");i._$addClassName(a.node,"z-ipt-error");_=!1}else if(a)s(t)}});return _};var s=function(t){if(t){var n=e[t];if(n){i._$addClassName(n.err,"f-dn");i._$delClassName(n.node,"z-ipt-error")}}};return function(n){var a=i._$get("leaveForm");if(!a)return!1;if("发送中..."===a.leaveBtn.innerText||"发送成功"===a.leaveBtn.innerText)return!1;if(a.mobile&&("mobile"==n||!n))e.mobile={must:!0,value:a.mobile.value.trim(),node:a.mobile,err:i._$getByClassName(a.mobile.parentNode,"j-errmsg")[0],errTip:"手机号不足11位"};if(a.email&&("email"==n||!n))e.email={must:!0,value:a.email.value.trim(),node:a.email,err:i._$getByClassName(a.email.parentNode,"j-errmsg")[0],errTip:"请填写正确的邮箱地址"};if("content"==n||!n)t=a.content.value.trim();return o(n)}}();C.__onNokefuNoLeave=function(e){if(1!=e.stafftype){this.__isChatting=3;this.__hideTip();this.__setCommentBtnState(2);this.__setActionBtnState(0);this.__headName.innerHTML="客服不在线";this.__headName.style&&(this.__headName.style.paddingLeft="10px");this.__headIcon.style&&(this.__headIcon.style.display="none");n._$dispatchEvent(document,"click");i._$addClassName(this.__sendForm,"z-hidden");i._$clearChildren(this.__box);d._$chatNoKefu=1;this.__box.innerHTML=s._$get("chat-nokefunoleave",{leaveOffTips:window.leaveOffTips,qiyuInfoSwitch:window.qiyuInfoSwitch})}else{i._$addClassName(this.__errTip[1],"f-dn");this._$disable(!1)}};C.__onNokefu=function(){var e=function(e,t){if("mobile"==t)e.mobile.value=e.mobile.value.replace(/[^\d]/g,"");var n=!e.mobile?0:e.mobile.value.trim()?1:2;var a=!e.email?0:e.email.value.trim()?1:2;if(2==n||2==a||!e.content.value.trim()){i._$addClassName(e.leaveBtn,"u-btn-disabled");e.leaveBtn.disabled=!0}else{i._$delClassName(e.leaveBtn,"u-btn-disabled");e.leaveBtn.disabled=!1}};var t=function(){var t=i._$get("leaveForm");if(t){if(t.email){n._$addEvent(t.email,"input",e._$bind(this,t,"email"));n._$addEvent(t.email,"blur",this.__validateLeaveForm._$bind(this,"email"))}if(t.mobile){n._$addEvent(t.mobile,"input",e._$bind(this,t,"mobile"));n._$addEvent(t.mobile,"blur",this.__validateLeaveForm._$bind(this,"mobile"))}n._$addEvent(t.content,"input",e._$bind(this,t,"content"));n._$addEvent(t.content,"blur",this.__validateLeaveForm._$bind(this,"content"));e(t)}};return function(e){this.__isChatting=3;this.__hideTip();this.__setCommentBtnState(2);this.__setActionBtnState(0);this.__headName.innerHTML="给我们留言";this.__headName.style&&(this.__headName.style.paddingLeft="10px");this.__headIcon.style&&(this.__headIcon.style.display="none");n._$dispatchEvent(document,"click");i._$addClassName(this.__sendForm,"z-hidden");i._$clearChildren(this.__box);d._$chatNoKefu=1;this.__box.innerHTML=s._$get("chat-nokefu",{leaveInfo:window.leaveInfo,leaveType:window.leaveType,qiyuInfoSwitch:window.qiyuInfoSwitch});t.call(this)}}();C.__onSendLeave=function(e){var t=e.success;var n=i._$get("leaveForm");if(t){n.leaveBtn.innerText="发送成功";parent.postMessage("pkg:"+JSON.stringify({category:"leaveOk"}),"*");
setTimeout(this.__onCancelLeave._$bind(this),3e3)}else n.leaveBtn.innerText="发送"};C.__onCancelLeave=function(){window.close()};C.__onUserErr=function(e){i._$addClassName(this.__errTip[1],"f-dn");var t=e||"帐户不合法";this.__showTip(t);if(!this.__isChatting)i._$clearChildren(this.__listConf.parent)};C.__sendMsg=function(e,t){this.__send(function(){if(t){this.__isResend=1;this.__cache._$reSendMessage(e.id)}else this.__cache._$sendMessage(e);if("image"===e.type||"file"==e.type)this.__editor._$resetFile();else this.__editor._$clear({focus:!0})}._$bind(this))};C.__onBeforeUnload=function(e){g._$closeBySessionId();if(d._$canSendMessage()&&3!==this.__isChatting&&!window.setting.unconfirm){e=e||window.event;var t=" ";if(e)e.returnValue=t;return t}};C.__onQueueStart=function(e){this.__isChatting=2;this.__isRobot=!1;this.__listConf.item.ext.kefuid=null;if(!this.__list)this.__list=_._$$ListModuleWF._$allocate(this.__listConf);i._$addClassName(this.__errTip[1],"f-dn");this.__showQueueInfo(e);this.__editor._$toggleOpr(!1);this._$disable(!1)};C.__onQueue=function(e){this.__showQueueInfo(e)};C.__onQueueFail=function(e){this.__box.innerHTML=s._$get("chat-nokefu",{leaveInfo:window.leaveInfo,leaveType:window.leaveType,qiyuInfoSwitch:window.qiyuInfoSwitch})};C.__showQueueInfo=function(e){var t;if(e.showNum&&e.count)t="正在排队，你的前面还有"+e.count+"个人，请稍等...";else t=e.inqueueNotify||"您好，当前正在排队，请先简单描述您的问题...";this.__showTip(t)};C.__onOverTime=function(e){this.__listConf.parent.insertAdjacentHTML("beforeEnd",s._$get("chat-overtime",e));this.__doScrollBottom()};C.__setCommentBtnState=function(e){if(0===e){i._$replaceClassName(this.__commentBtn,"f-dn","z-dis");this.__commentBtn.disabled=!0;this.__setActionBtnState(0)}else if(1===e){i._$delClassName(this.__commentBtn,"z-dis f-dn");this.__commentBtn.disabled=!1;this.__setActionBtnState(0)}else if(2===e)i._$addClassName(this.__commentBtn,"f-dn")};C.__setActionBtnState=function(e){if(0===e)i._$addClassName(this.__actionBtn,"f-dn");else if(1===e){i._$delClassName(this.__actionBtn,"f-dn");this.__setCommentBtnState(2)}};C.__showTip=function(e,t){this.__errTip[0].innerHTML=e;i._$addClassName(this.__box,"z-show");if(t)setTimeout(function(){i._$delClassName(this.__box,"z-show")}._$bind(this),3e3)};C.__hideTip=function(){i._$delClassName(this.__box,"z-show")};C.__onShuntEntries=function(){if(!this.__list){this.__list=_._$$ListModuleWF._$allocate(this.__listConf);d._$hasList=1}this.__isChatting=0;this._$disable(!0);i._$addClassName(this.__errTip[1],"f-dn");this.__setCommentBtnState(0)};C.__onShuntStatus=function(e){this._$disable(!1);this.__disableShuntList(1)};C.__disableShuntList=function(e){var t=i._$getByClassName(this.__box,"j-sel-shunt");for(var n=0;n<t.length;n++){var a=t[n];e?i._$addClassName(a,"u-shunt-disabled"):i._$delClassName(a,"u-shunt-disabled");var o=i._$getByClassName(a,"shunt_child");for(var s=0;s<o.length;s++){var _=o[s];e?i._$dataset(_,"disabled","1"):i._$dataset(_,"disabled","0")}}};C.__disableQuestionList=function(e){var t=e.getElementsByTagName("p"),n=e.getElementsByTagName("i");for(var a=0;a<t.length;a++)i._$addClassName(t[a],"f-dn");for(var a=0;a<n.length;a++)i._$replaceClassName(n[a],"u-icon-infoup","u-icon-infodown")};C._$disable=function(e){this.__editor._$disable(e)};C._$disable2Kefu=function(e){i._$dataset(e,"disabled",!0);i._$setStyle(e,"color","#37474f")};C.__calculateCampanyInfo=function(){var e=i._$getByClassName(document.body,"j-companyinfo-right")[0];try{var t=i._$getByClassName(e,"j-announceinfo")[0],n=i._$getByClassName(e,"j-comquestions")[0],a=e.clientHeight-t.clientHeight-78}catch(o){if(e)a=e.clientHeight-78}finally{if(a>0)n?i._$setStyle(n,"height",a+"px"):""}};C.__onProductError=function(e){console.log("消息过长,发送失败")};C.__preLoadImg=function(e,t){var i=document.createElement("img");i.onload=function(){e.src=t;this.onload=null};i.src=t};C.__findLocalItems=function(e,t){var i,n=[],a;for(i in localStorage)if(i.match(e)||!e&&"string"==typeof i){a=!t?localStorage.getItem(i):JSON.parse(localStorage.getItem(i));n.push({key:i,val:a})}return n};C.__clearLocalItems=function(e){for(var t=0;t<e.length;t++)window.localStorage.removeItem(e[t].key)};C.__cbReceiveSdkMsg=function(e){var t={status:function(e){d.__sdkWindowStatus=e.layerOpen},doconnect:function(e){this.__doConnect()},dopushmsg:function(e){window.setting.pushSwitch=1;d._$pushMsgConnect(setting.appkey,e.pushMsgId);this._$disable(!1)},dogetpushmsg:function(e){window.setting.getPushSwitch=1;window.setting.pushSwitch=1;d._$pushMsgConnect(setting.appkey,e.ids,1);this._$disable(!1)},dopushmsgread:function(e){d._$sendPushMsgStatus(2,e.ids)}};return function(e){try{var i=(e.data||"").split(":"),n=t[(i.shift()||"").toLowerCase()];if(n)n.call(this,JSON.parse(i.join(":")))}catch(a){}}}();C.__cbReceivePushMsg=function(e){if(e.append)this.__pushNode.insertAdjacentHTML("beforeEnd",s._$get("push-message",e));parent.postMessage("pkg:"+JSON.stringify({data:{content:e.content,type:e.type,msgSessionId:e.msgSessionId,sdkAppend:e.sdkAppend},category:"pushMsg"}),"*");d._$sendPushMsgStatus(1,[e.msgSessionId])};C.__switchKefuEntry=function(e,t){if(!t.twiceKefuEntry)if(e!=t.id)if(t.groupname)this.__doInitShunt(t);else this.__doInitKefu(t)};C.__onFileUploadProgress=function(e){var t=e.msg,n=i._$getByClassName(this.__box,"msg_right");var o;a._$forEach(n,function(e){if(i._$attr(e,"id").indexOf(t.id)>-1)o=e});if(o){var s=i._$getByClassName(o,"progress-size")[0],_=i._$getByClassName(o,"progress-bar")[0],r=i._$getByClassName(_,"inner")[0];var c=this.__listConf.item.fileProgressFormat(t);s.innerText=c;var d=i._$getStyle(_,"width").replace("px","");i._$setStyle(r,"width",t.progressObj.percentage/100*d+"px")}};C.__checkCanSendFile=function(e){d._$checkCanSendFile({timestamp:e})};C.__onCanSendFile=function(e){this.__editor._$dispatchEvent("oncansendfile",e)};C.__onMessage=function(){if(!document.hidden)this.__doUnMarqueeTitle();else this.__doMarqueeTitle("在线客服（有新消息）")};C.__onVisibilityChange=function(){if(!document.hidden)this.__doUnMarqueeTitle()};C.__doMarqueeTitle=function(){var e;var t=function(){if(e)document.title=e.join("")};var i=function(){e.push(e.shift());t()};return function(n){if(this.__xtimer)window.clearInterval(this.__xtimer);e=n.split("");this.__xtimer=window.setInterval(i,500);t()}}();C.__doUnMarqueeTitle=function(){if(this.__xtimer){this.__xtimer=window.clearInterval(this.__xtimer);document.title=this.__title}};C.__applyHumanStaff=function(e,t){if(this.__isRobot){this._$disable2Kefu(e);if(d._$canSendMessage()){i._$delClassName(this.__errTip[1],"f-dn");this.__cache._$sendAction("kefu",t);this.__setCommentBtnState(0)}else this.__doConnect(!0)}};C.__getWebAnalyticsInfo=function(e){if(!e.isRobot){var t=function(e,t){t=t||function(){};var i=new Image;i.onerror=function(){console.log("faild to load qa.gif")};i.onload=function(){t()};i.src=e;i.width=1;i.height=1;return i};if(window.localStorage){var i="X-"+setting.appkey.toUpperCase()+"-YSF-WEBANALYTICS",n=localStorage.getItem(i);if(!n)return;var o=a._$query2object(n);var s=window.__YSFDAROOT__+"?ak="+o.ak+"&dv="+o.dv+"&si="+e.sid+"&su="+o.su+"&cup="+o.cup+"&tm="+o.tm+"&cy="+o.cy+"&lp="+o.lp;t(s)}}}},"a00a32e61e2b942574493bbe4122a1e2","e84bded65b98b38941ed4f3e7b9e6d19","455067b9dcb8d33b1e1808745dbbb96a","4cd67180df9ce322f7a6a6207080bbc9","780a96dd705b8404d9982fdccc656c08","2318238864a492451a5aba5d50acbc2d","4b460e06b9deefa9efed504ac2d1a610","1e81d1884b46bf4bdbf59103ab669284","2137f385e9bbd5978a6a1d0b6271ef2c","d75d95943d0f2436559eb6094b78d11d","6cabb143c99287da4b40b5b45f0c77e4","186691795a2fc1193976edeb8747c76d","7af663264574a4890d1d6945b73ab82f","59486eaf249342cac1b5b90408aaa0bc","8fd72c7e0540f7cdb299f6ddb8bbd1ab","e7fe559a934e9f3b6e372effae2b8215","3c79b85c8f9d273108d56c2535ce239a","a59d2c87e9141105094aa7628e8fb3e4","a65f10bd97b7e6580861baf173f7b424","b1ad4666496649fea421dfbfa1c21de0","0439ef8e10bbb734615931acccc290d4");I$("2c60069bf1affe16793c956cecdfd5c6",function(){return{"fk-sp":["访客端","发图"],"fk-cm":["访客端","web主动评价入口"],"fk-cs":["访客端","web满意度评价",["满意","不满意"]],"fk-lt":["访客端","网易七鱼小尾巴"]}});I$("fc1857ba68f6a9512db818d2a24e40b6",function(e,t,i,n){n._$log=function(e,t){var n=i[e];if(n){var a=n[2]||[];_gaq.push(["_trackEvent",n[0],n[1],a[t]||""])}};n._$delegate=function(i){e._$addEvent(i,"click",function(i){var a=e._$getElement(i,"d:log");if(a)n._$log(t._$dataset(a,"log"),t._$dataset(a,"logLabel"))},!0)};var a=!1;if(!a){a=!0;n._$delegate(document)}},"4cd67180df9ce322f7a6a6207080bbc9","455067b9dcb8d33b1e1808745dbbb96a","2c60069bf1affe16793c956cecdfd5c6");I$("82cf82eaea79f469cf3ddc29dce33f91",function(e,t,i,n,a){i._$parseTemplate("template-box");var o=e._$query2object(location.search.substr(1));setting.appkey=o.k||"";setting.fid=o.u;setting.device=o.u||o.d;setting.uuid=o.uuid||"";setting.templateId=o.templateId||0;setting.groupid=o.gid||0;setting.bid=o.bid||-1;setting.staffid=o.sid||0;setting.qtype=o.qtype||0;setting.dvcTimer=o.dvctimer||0;setting.dialogStyle=Number(o.w||0);setting.robotShuntSwitch=o.robotShuntSwitch||0;setting.unconfirm=o.unconfirm||0;setting.robotId=o.robotId||0;if(null!=o.e)setting.email=o.e;if(null!=o.m)setting.mobile=o.m;if(null!=o.n)setting.realname=o.n;if(!setting.device)setting.device=localStorage.getItem("YSF-"+setting.appkey.toUpperCase()+"-UID")||t._$md52hex(e._$uniqueID()+"-"+ +new Date);window.localStorage.setItem("YSF-"+setting.appkey.toUpperCase()+"-UID",setting.device);if(/(iPhone|iPod|iOS|Android)/i.test(navigator.userAgent)||1==o.wp)window.setting.dialogStyle=3;var s=encodeURIComponent(setting.device),_=encodeURIComponent(setting.appkey.toUpperCase());document.cookie="X-"+_+"-DEVICE="+s+";path=/";n._$$Module._$allocate()},"780a96dd705b8404d9982fdccc656c08","43182f014b9d40a77d4ee9e345c2f016","2318238864a492451a5aba5d50acbc2d","04938f5b0692d2fcd6f3951b2dc4f646","fc1857ba68f6a9512db818d2a24e40b6");